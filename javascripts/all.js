function getChartOptions(){var e=document.querySelector('input[name="title"]').value;return{title:{text:e},plotOptions:{series:{animation:!1}}}}window.CodeMirror=function(){"use strict";function e(n,r){if(!(this instanceof e))return new e(n,r);this.options=r=r||{};for(var i in ao)!r.hasOwnProperty(i)&&ao.hasOwnProperty(i)&&(r[i]=ao[i]);h(r);var o="string"==typeof r.value?0:r.value.first,a=this.display=t(n,o);a.wrapper.CodeMirror=this,s(this),r.autofocus&&!Fi&&dt(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Kr},u(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var l=r.value;"string"==typeof l&&(l=new wo(r.value,r.mode)),at(this,pr)(this,l),Ai&&setTimeout(ri(pt,this,!0),20),gt(this);var c;try{c=document.activeElement==a.input}catch(f){}c||r.autofocus&&!Fi?setTimeout(ri(_t,this),20):jt(this),at(this,function(){for(var e in oo)oo.propertyIsEnumerable(e)&&oo[e](this,r[e],uo);for(var t=0;t<fo.length;++t)fo[t](this)})()}function t(e,t){var n={},r=n.input=ai("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");return Oi?r.style.width="1000px":r.setAttribute("wrap","off"),zi&&(r.style.border="1px solid black"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),r.setAttribute("spellcheck","false"),n.inputDiv=ai("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=ai("div",[ai("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=ai("div",[ai("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=ai("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=ai("div",null,"CodeMirror-gutter-filler"),n.lineDiv=ai("div",null,"CodeMirror-code"),n.selectionDiv=ai("div",null,null,"position: relative; z-index: 1"),n.cursor=ai("div"," ","CodeMirror-cursor"),n.otherCursor=ai("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),n.measure=ai("div",null,"CodeMirror-measure"),n.lineSpace=ai("div",[n.measure,n.selectionDiv,n.lineDiv,n.cursor,n.otherCursor],null,"position: relative; outline: none"),n.mover=ai("div",[ai("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=ai("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=ai("div",null,null,"position: absolute; height: "+qo+"px; width: 1px;"),n.gutters=ai("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=ai("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=ai("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),Ti&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),e.appendChild?e.appendChild(n.wrapper):e(n.wrapper),zi&&(r.style.width="0px"),Oi||(n.scroller.draggable=!0),ji?(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"):Ti&&(n.scrollbarH.style.minWidth=n.scrollbarV.style.minWidth="18px"),n.viewOffset=n.lastSizeC=0,n.showingFrom=n.showingTo=t,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new Kr,n.cachedCharWidth=n.cachedTextHeight=null,n.measureLineCache=[],n.measureLineCachePos=0,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),t.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),t.doc.frontier=t.doc.first,E(t,100),t.state.modeGen++,t.curOp&&st(t)}function r(e){e.options.lineWrapping?(e.display.wrapper.className+=" CodeMirror-wrap",e.display.sizer.style.minWidth=""):(e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),f(e)),o(e),st(e),G(e),setTimeout(function(){p(e)},100)}function i(e){var t=nt(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/rt(e.display)-3);return function(i){return Bn(e.doc,i)?0:n?(Math.ceil(i.text.length/r)||1)*t:t}}function o(e){var t=e.doc,n=i(e);t.iter(function(e){var t=n(e);t!=e.height&&vr(e,t)})}function a(e){var t=mo[e.options.keyMap],n=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:""),e.state.disableInput=t.disableInput}function u(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),G(e)}function l(e){s(e),st(e),setTimeout(function(){m(e)},20)}function s(e){var t=e.display.gutters,n=e.options.gutters;ui(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(ai("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none"}function c(e,t){if(0==t.height)return 0;for(var n,r=t.text.length,i=t;n=Fn(i);){var o=n.find();i=dr(e,o.from.line),r+=o.from.ch-o.to.ch}for(i=t;n=$n(i);){var o=n.find();r-=i.text.length-o.from.ch,i=dr(e,o.to.line),r+=i.text.length-o.to.ch}return r}function f(e){var t=e.display,n=e.doc;t.maxLine=dr(n,n.first),t.maxLineLength=c(n,t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var r=c(n,e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}function h(e){var t=Qr(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function p(e){var t=e.display,n=e.doc.height,r=n+H(t);t.sizer.style.minHeight=t.heightForcer.style.top=r+"px",t.gutters.style.height=Math.max(r,t.scroller.clientHeight-qo)+"px";var i=Math.max(r,t.scroller.scrollHeight),o=t.scroller.scrollWidth>t.scroller.clientWidth+1,a=i>t.scroller.clientHeight+1;a?(t.scrollbarV.style.display="block",t.scrollbarV.style.bottom=o?hi(t.measure)+"px":"0",t.scrollbarV.firstChild.style.height=i-t.scroller.clientHeight+t.scrollbarV.clientHeight+"px"):(t.scrollbarV.style.display="",t.scrollbarV.firstChild.style.height="0"),o?(t.scrollbarH.style.display="block",t.scrollbarH.style.right=a?hi(t.measure)+"px":"0",t.scrollbarH.firstChild.style.width=t.scroller.scrollWidth-t.scroller.clientWidth+t.scrollbarH.clientWidth+"px"):(t.scrollbarH.style.display="",t.scrollbarH.firstChild.style.width="0"),o&&a?(t.scrollbarFiller.style.display="block",t.scrollbarFiller.style.height=t.scrollbarFiller.style.width=hi(t.measure)+"px"):t.scrollbarFiller.style.display="",o&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(t.gutterFiller.style.display="block",t.gutterFiller.style.height=hi(t.measure)+"px",t.gutterFiller.style.width=t.gutters.offsetWidth+"px"):t.gutterFiller.style.display="",Wi&&0===hi(t.measure)&&(t.scrollbarV.style.minWidth=t.scrollbarH.style.minHeight=Hi?"18px":"12px",t.scrollbarV.style.pointerEvents=t.scrollbarH.style.pointerEvents="none")}function d(e,t,n){var r=e.scroller.scrollTop,i=e.wrapper.clientHeight;"number"==typeof n?r=n:n&&(r=n.top,i=n.bottom-n.top),r=Math.floor(r-W(e));var o=Math.ceil(r+i);return{from:br(t,r),to:br(t,o)}}function m(e){var t=e.display;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=y(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,i=n+"px",o=t.lineDiv.firstChild;o;o=o.nextSibling)if(o.alignable)for(var a=0,u=o.alignable;a<u.length;++a)u[a].style.left=i;e.options.fixedGutter&&(t.gutters.style.left=n+r+"px")}}function g(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=v(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(ai("div",[ai("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a),r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",!0}return!1}function v(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function y(e){return ci(e.scroller).left-ci(e.sizer).left}function b(e,t,n,r){for(var i,o=e.display.showingFrom,a=e.display.showingTo,u=d(e.display,e.doc,n),l=!0;;l=!1){var s=e.display.scroller.clientWidth;if(!S(e,t,u,r))break;if(i=!0,t=[],T(e),p(e),l&&e.options.lineWrapping&&s!=e.display.scroller.clientWidth)r=!0;else if(r=!1,n&&(n=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,"number"==typeof n?n:n.top)),u=d(e.display,e.doc,n),u.from>=e.display.showingFrom&&u.to<=e.display.showingTo)break}return i&&(Br(e,"update",e),(e.display.showingFrom!=o||e.display.showingTo!=a)&&Br(e,"viewportChange",e,e.display.showingFrom,e.display.showingTo)),i}function S(e,t,n,r){var i=e.display,o=e.doc;if(!i.wrapper.clientWidth)return i.showingFrom=i.showingTo=o.first,i.viewOffset=0,void 0;if(!(!r&&0==t.length&&n.from>i.showingFrom&&n.to<i.showingTo)){g(e)&&(t=[{from:o.first,to:o.first+o.size}]);var a=i.sizer.style.marginLeft=i.gutters.offsetWidth+"px";i.scrollbarH.style.left=e.options.fixedGutter?a:"0";var u=1/0;if(e.options.lineNumbers)for(var l=0;l<t.length;++l)t[l].diff&&t[l].from<u&&(u=t[l].from);var s=o.first+o.size,c=Math.max(n.from-e.options.viewportMargin,o.first),f=Math.min(s,n.to+e.options.viewportMargin);if(i.showingFrom<c&&c-i.showingFrom<20&&(c=Math.max(o.first,i.showingFrom)),i.showingTo>f&&i.showingTo-f<20&&(f=Math.min(s,i.showingTo)),Yi)for(c=yr(Rn(o,dr(o,c)));s>f&&Bn(o,dr(o,f));)++f;var h=[{from:Math.max(i.showingFrom,o.first),to:Math.min(i.showingTo,s)}];if(h=h[0].from>=h[0].to?[]:C(h,t),Yi)for(var l=0;l<h.length;++l)for(var p,d=h[l];p=$n(dr(o,d.to-1));){var m=p.find().from.line;if(!(m>d.from)){h.splice(l--,1);break}d.to=m}for(var v=0,l=0;l<h.length;++l){var d=h[l];d.from<c&&(d.from=c),d.to>f&&(d.to=f),d.from>=d.to?h.splice(l--,1):v+=d.to-d.from}if(!r&&v==f-c&&c==i.showingFrom&&f==i.showingTo)return x(e),void 0;h.sort(function(e,t){return e.from-t.from});try{var y=document.activeElement}catch(b){}.7*(f-c)>v&&(i.lineDiv.style.display="none"),L(e,c,f,h,u),i.lineDiv.style.display="",y&&document.activeElement!=y&&y.offsetHeight&&y.focus();var S=c!=i.showingFrom||f!=i.showingTo||i.lastSizeC!=i.wrapper.clientHeight;return S&&(i.lastSizeC=i.wrapper.clientHeight,E(e,400)),i.showingFrom=c,i.showingTo=f,w(e),x(e),!0}}function w(e){for(var t,n=e.display,r=n.lineDiv.offsetTop,i=n.lineDiv.firstChild;i;i=i.nextSibling)if(i.lineObj){if(Ti){var o=i.offsetTop+i.offsetHeight;t=o-r,r=o}else{var a=ci(i);t=a.bottom-a.top}var u=i.lineObj.height-t;if(2>t&&(t=nt(n)),u>.001||-.001>u){vr(i.lineObj,t);var l=i.lineObj.widgets;if(l)for(var s=0;s<l.length;++s)l[s].height=l[s].node.offsetHeight}}}function x(e){var t=e.display.viewOffset=Sr(e,dr(e.doc,e.display.showingFrom));e.display.mover.style.top=t+"px"}function C(e,t){for(var n=0,r=t.length||0;r>n;++n){for(var i=t[n],o=[],a=i.diff||0,u=0,l=e.length;l>u;++u){var s=e[u];i.to<=s.from&&i.diff?o.push({from:s.from+a,to:s.to+a}):i.to<=s.from||i.from>=s.to?o.push(s):(i.from>s.from&&o.push({from:s.from,to:i.from}),i.to<s.to&&o.push({from:i.to+a,to:s.to+a}))}e=o}return e}function k(e){for(var t=e.display,n={},r={},i=t.gutters.firstChild,o=0;i;i=i.nextSibling,++o)n[e.options.gutters[o]]=i.offsetLeft,r[e.options.gutters[o]]=i.offsetWidth;return{fixedPos:y(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function L(e,t,n,r,i){function o(t){var n=t.nextSibling;return Oi&&$i&&e.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),n}var a=k(e),u=e.display,l=e.options.lineNumbers;r.length||Oi&&e.display.currentWheelTarget||ui(u.lineDiv);var s=u.lineDiv,c=s.firstChild,f=r.shift(),h=t;for(e.doc.iter(t,n,function(t){if(f&&f.to==h&&(f=r.shift()),Bn(e.doc,t)){if(0!=t.height&&vr(t,0),t.widgets&&c&&c.previousSibling)for(var n=0;n<t.widgets.length;++n){var u=t.widgets[n];if(u.showIfHidden){var p=c.previousSibling;if(/pre/i.test(p.nodeName)){var d=ai("div",null,null,"position: relative");p.parentNode.replaceChild(d,p),d.appendChild(p),p=d}var m=p.appendChild(ai("div",[u.node],"CodeMirror-linewidget"));u.handleMouseEvents||(m.ignoreEvents=!0),A(u,m,p,a)}}}else if(f&&f.from<=h&&f.to>h){for(;c.lineObj!=t;)c=o(c);l&&h>=i&&c.lineNumber&&si(c.lineNumber,v(e.options,h)),c=c.nextSibling}else{if(t.widgets)for(var g,y=0,b=c;b&&20>y;++y,b=b.nextSibling)if(b.lineObj==t&&/div/i.test(b.nodeName)){g=b;break}var S=q(e,t,h,a,g);if(S!=g)s.insertBefore(S,c);else{for(;c!=g;)c=o(c);c=c.nextSibling}S.lineObj=t}++h});c;)c=o(c)}function q(e,t,n,r,i){var o,a=rr(e,t),u=a.pre,l=t.gutterMarkers,s=e.display,c=a.bgClass?a.bgClass+" "+(t.bgClass||""):t.bgClass;if(!(e.options.lineNumbers||l||c||t.wrapClass||t.widgets))return u;if(i){i.alignable=null;for(var f,h=!0,p=0,d=null,m=i.firstChild;m;m=f)if(f=m.nextSibling,/\bCodeMirror-linewidget\b/.test(m.className)){for(var g=0;g<t.widgets.length;++g){var y=t.widgets[g];if(y.node==m.firstChild){y.above||d||(d=m),A(y,m,i,r),++p;break}}if(g==t.widgets.length){h=!1;break}}else i.removeChild(m);i.insertBefore(u,d),h&&p==t.widgets.length&&(o=i,i.className=t.wrapClass||"")}if(o||(o=ai("div",null,t.wrapClass,"position: relative"),o.appendChild(u)),c&&o.insertBefore(ai("div",null,c+" CodeMirror-linebackground"),o.firstChild),e.options.lineNumbers||l){var b=o.insertBefore(ai("div",null,null,"position: absolute; left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px"),o.firstChild);if(e.options.fixedGutter&&(o.alignable||(o.alignable=[])).push(b),!e.options.lineNumbers||l&&l["CodeMirror-linenumbers"]||(o.lineNumber=b.appendChild(ai("div",v(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+s.lineNumInnerWidth+"px"))),l)for(var S=0;S<e.options.gutters.length;++S){var w=e.options.gutters[S],x=l.hasOwnProperty(w)&&l[w];x&&b.appendChild(ai("div",[x],"CodeMirror-gutter-elt","left: "+r.gutterLeft[w]+"px; width: "+r.gutterWidth[w]+"px"))}}if(Ti&&(o.style.zIndex=2),t.widgets&&o!=i)for(var g=0,C=t.widgets;g<C.length;++g){var y=C[g],k=ai("div",[y.node],"CodeMirror-linewidget");y.handleMouseEvents||(k.ignoreEvents=!0),A(y,k,o,r),y.above?o.insertBefore(k,e.options.lineNumbers&&0!=t.height?b:u):o.appendChild(k),Br(y,"redraw")}return o}function A(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function T(e){var t=e.display,n=Kt(e.doc.sel.from,e.doc.sel.to);if(n||e.options.showCursorWhenSelecting?M(e):t.cursor.style.display=t.otherCursor.style.display="none",n?t.selectionDiv.style.display="none":O(e),e.options.moveInputWithCursor){var r=J(e,e.doc.sel.head,"div"),i=ci(t.wrapper),o=ci(t.lineDiv);t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+o.top-i.top))+"px",t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+o.left-i.left))+"px"}}function M(e){var t=e.display,n=J(e,e.doc.sel.head,"div");t.cursor.style.left=n.left+"px",t.cursor.style.top=n.top+"px",t.cursor.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",t.cursor.style.display="",n.other?(t.otherCursor.style.display="",t.otherCursor.style.left=n.other.left+"px",t.otherCursor.style.top=n.other.top+"px",t.otherCursor.style.height=.85*(n.other.bottom-n.other.top)+"px"):t.otherCursor.style.display="none"}function O(e){function t(e,t,n,r){0>t&&(t=0),a.appendChild(ai("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?u-e:n)+"px; height: "+(r-t)+"px"))}function n(n,r,o){function a(t,r){return Z(e,Ut(n,t),"div",f,r)}var s,c,f=dr(i,n),h=f.text.length;return di(wr(f),r||0,null==o?h:o,function(e,n,i){var f,p,d,m=a(e,"left");if(e==n)f=m,p=d=m.left;else{if(f=a(n-1,"right"),"rtl"==i){var g=m;m=f,f=g}p=m.left,d=f.right}null==r&&0==e&&(p=l),f.top-m.top>3&&(t(p,m.top,null,m.bottom),p=l,m.bottom<f.top&&t(p,m.bottom,null,f.top)),null==o&&n==h&&(d=u),(!s||m.top<s.top||m.top==s.top&&m.left<s.left)&&(s=m),(!c||f.bottom>c.bottom||f.bottom==c.bottom&&f.right>c.right)&&(c=f),l+1>p&&(p=l),t(p,f.top,d-p,f.bottom)}),{start:s,end:c}}var r=e.display,i=e.doc,o=e.doc.sel,a=document.createDocumentFragment(),u=r.lineSpace.offsetWidth,l=D(e.display);if(o.from.line==o.to.line)n(o.from.line,o.from.ch,o.to.ch);else{var s=dr(i,o.from.line),c=dr(i,o.to.line),f=Rn(i,s)==Rn(i,c),h=n(o.from.line,o.from.ch,f?s.text.length:null).end,p=n(o.to.line,f?0:null,o.to.ch).start;f&&(h.top<p.top-2?(t(h.right,h.top,null,h.bottom),t(l,p.top,p.left,p.bottom)):t(h.right,h.top,p.left-h.right,h.bottom)),h.bottom<p.top&&t(l,h.bottom,null,p.top)}li(r.selectionDiv,a),r.selectionDiv.style.display=""}function I(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",e.options.cursorBlinkRate>0&&(t.blinker=setInterval(function(){t.cursor.style.visibility=t.otherCursor.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate))}}function E(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.showingTo&&e.state.highlight.set(t,ri(N,e))}function N(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.showingTo)){var n,r=+new Date+e.options.workTime,i=Sn(t.mode,j(e,t.frontier)),o=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.showingTo+500),function(a){if(t.frontier>=e.display.showingFrom){var u=a.styles;a.styles=Qn(e,a,i);for(var l=!u||u.length!=a.styles.length,s=0;!l&&s<u.length;++s)l=u[s]!=a.styles[s];l&&(n&&n.end==t.frontier?n.end++:o.push(n={start:t.frontier,end:t.frontier+1})),a.stateAfter=Sn(t.mode,i)}else tr(e,a,i),a.stateAfter=0==t.frontier%5?Sn(t.mode,i):null;return++t.frontier,+new Date>r?(E(e,e.options.workDelay),!0):void 0}),o.length&&at(e,function(){for(var e=0;e<o.length;++e)st(this,o[e].start,o[e].end)})()}}function _(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),u=t;u>a;--u){if(u<=o.first)return o.first;var l=dr(o,u-1);if(l.stateAfter&&(!n||u<=o.frontier))return u;var s=Xr(l.text,null,e.options.tabSize);(null==i||r>s)&&(i=u-1,r=s)}return i}function j(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var o=_(e,t,n),a=o>r.first&&dr(r,o-1).stateAfter;return a=a?Sn(r.mode,a):wn(r.mode),r.iter(o,t,function(n){tr(e,n,a);var u=o==t-1||0==o%5||o>=i.showingFrom&&o<i.showingTo;n.stateAfter=u?Sn(r.mode,a):null,++o}),n&&(r.frontier=o),a}function W(e){return e.lineSpace.offsetTop}function H(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function D(e){var t=li(e.measure,ai("pre",null,null,"text-align: left")).appendChild(ai("span","x"));return t.offsetLeft}function z(e,t,n,r,i){var o=-1;if(r=r||R(e,t),r.crude){var a=r.left+n*r.width;return{left:a,right:a+r.width,top:r.top,bottom:r.bottom}}for(var u=n;;u+=o){var l=r[u];if(l)break;0>o&&0==u&&(o=1)}return i=u>n?"left":n>u?"right":i,"left"==i&&l.leftSide?l=l.leftSide:"right"==i&&l.rightSide&&(l=l.rightSide),{left:n>u?l.right:l.left,right:u>n?l.left:l.right,top:l.top,bottom:l.bottom}}function F(e,t){for(var n=e.display.measureLineCache,r=0;r<n.length;++r){var i=n[r];if(i.text==t.text&&i.markedSpans==t.markedSpans&&e.display.scroller.clientWidth==i.width&&i.classes==t.textClass+"|"+t.wrapClass)return i}}function $(e,t){var n=F(e,t);n&&(n.text=n.measure=n.markedSpans=null)}function R(e,t){var n=F(e,t);if(n)return n.measure;var r=B(e,t),i=e.display.measureLineCache,o={text:t.text,width:e.display.scroller.clientWidth,markedSpans:t.markedSpans,measure:r,classes:t.textClass+"|"+t.wrapClass};return 16==i.length?i[++e.display.measureLineCachePos%16]=o:i.push(o),r}function B(e,t){function n(e){var t=e.top-d.top,n=e.bottom-d.top;n>v&&(n=v),0>t&&(t=0);for(var r=m.length-2;r>=0;r-=2){var i=m[r],o=m[r+1];if(!(i>n||t>o)&&(t>=i&&o>=n||i>=t&&n>=o||Math.min(n,o)-Math.max(t,i)>=n-t>>1)){m[r]=Math.min(t,i),m[r+1]=Math.max(n,o);break}}return 0>r&&(r=m.length,m.push(t,n)),{left:e.left-d.left,right:e.right-d.left,top:r,bottom:null}}function r(e){e.bottom=m[e.top+1],e.top=m[e.top]}if(!e.options.lineWrapping&&t.text.length>=e.options.crudeMeasuringFrom)return P(e,t);var i=e.display,o=ni(t.text.length),a=rr(e,t,o,!0).pre;if(Ai&&!Ti&&!e.options.lineWrapping&&a.childNodes.length>100){for(var u=document.createDocumentFragment(),l=10,s=a.childNodes.length,c=0,f=Math.ceil(s/l);f>c;++c){for(var h=ai("div",null,null,"display: inline-block"),p=0;l>p&&s;++p)h.appendChild(a.firstChild),--s;u.appendChild(h)}a.appendChild(u)}li(i.measure,a);var d=ci(i.lineDiv),m=[],g=ni(t.text.length),v=a.offsetHeight;Mi&&i.measure.first!=a&&li(i.measure,a);for(var y,c=0;c<o.length;++c)if(y=o[c]){var b=y,S=null;if(/\bCodeMirror-widget\b/.test(y.className)&&y.getClientRects){1==y.firstChild.nodeType&&(b=y.firstChild);var w=b.getClientRects();w.length>1&&(S=g[c]=n(w[0]),S.rightSide=n(w[w.length-1]))}S||(S=g[c]=n(ci(b))),y.measureRight&&(S.right=ci(y.measureRight).left),y.leftSide&&(S.leftSide=n(ci(y.leftSide)))}ui(e.display.measure);for(var y,c=0;c<g.length;++c)(y=g[c])&&(r(y),y.leftSide&&r(y.leftSide),y.rightSide&&r(y.rightSide));return g}function P(e,t){var n=new vo(t.text.slice(0,100),null);t.textClass&&(n.textClass=t.textClass);var r=B(e,n),i=z(e,n,0,r,"left"),o=z(e,n,99,r,"right");return{crude:!0,top:i.top,left:i.left,bottom:i.bottom,width:(o.right-i.left)/100}}function V(e,t){var n=!1;if(t.markedSpans)for(var r=0;r<t.markedSpans;++r){var i=t.markedSpans[r];!i.collapsed||null!=i.to&&i.to!=t.text.length||(n=!0)}var o=!n&&F(e,t);if(o||t.text.length>=e.options.crudeMeasuringFrom)return z(e,t,t.text.length,o&&o.measure,"right").right;var a=rr(e,t,null,!0).pre,u=a.appendChild(pi(e.display.measure));return li(e.display.measure,a),ci(u).right-ci(e.display.lineDiv).left}function G(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function U(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function K(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function X(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=Kn(t.widgets[i]);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=Sr(e,t);if("local"==r?a+=W(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var u=ci(e.display.lineSpace);a+=u.top+("window"==r?0:K());var l=u.left+("window"==r?0:U());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function Y(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=U(),i-=K();else if("local"==n||!n){var o=ci(e.display.sizer);r+=o.left,i+=o.top}var a=ci(e.display.lineSpace);return{left:r-a.left,top:i-a.top}}function Z(e,t,n,r,i){return r||(r=dr(e.doc,t.line)),X(e,r,z(e,r,t.ch,null,i),n)}function J(e,t,n,r,i){function o(t,o){var a=z(e,r,t,i,o?"right":"left");return o?a.left=a.right:a.right=a.left,X(e,r,a,n)}function a(e,t){var n=u[t],r=n.level%2;return e==mi(n)&&t&&n.level<u[t-1].level?(n=u[--t],e=gi(n)-(n.level%2?0:1),r=!0):e==gi(n)&&t<u.length-1&&n.level<u[t+1].level&&(n=u[++t],e=mi(n)-n.level%2,r=!1),r&&e==n.to&&e>n.from?o(e-1):o(e,r)}r=r||dr(e.doc,t.line),i||(i=R(e,r));var u=wr(r),l=t.ch;if(!u)return o(l);var s=xi(u,l),c=a(l,s);return null!=Do&&(c.other=a(l,Do)),c}function Q(e,t,n,r){var i=new Ut(e,t);return i.xRel=r,n&&(i.outside=!0),i}function et(e,t,n){var r=e.doc;if(n+=e.display.viewOffset,0>n)return Q(r.first,0,!0,-1);var i=br(r,n),o=r.first+r.size-1;if(i>o)return Q(r.first+r.size-1,dr(r,o).text.length,!0,1);for(0>t&&(t=0);;){var a=dr(r,i),u=tt(e,a,i,t,n),l=$n(a),s=l&&l.find();if(!l||!(u.ch>s.from.ch||u.ch==s.from.ch&&u.xRel>0))return u;i=s.to.line}}function tt(e,t,n,r,i){function o(r){var i=J(e,Ut(n,r),"line",t,s);return u=!0,a>i.bottom?i.left-l:a<i.top?i.left+l:(u=!1,i.left)}var a=i-Sr(e,t),u=!1,l=2*e.display.wrapper.clientWidth,s=R(e,t),c=wr(t),f=t.text.length,h=vi(t),p=yi(t),d=o(h),m=u,g=o(p),v=u;if(r>g)return Q(n,p,v,1);for(;;){if(c?p==h||p==ki(t,h,1):1>=p-h){for(var y=d>r||g-r>=r-d?h:p,b=r-(y==h?d:g);Oo.test(t.text.charAt(y));)++y;var S=Q(n,y,y==h?m:v,0>b?-1:b?1:0);return S}var w=Math.ceil(f/2),x=h+w;if(c){x=h;for(var C=0;w>C;++C)x=ki(t,x,1)}var k=o(x);k>r?(p=x,g=k,(v=u)&&(g+=1e3),f=w):(h=x,d=k,m=u,f-=w)}}function nt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Pi){Pi=ai("pre");for(var t=0;49>t;++t)Pi.appendChild(document.createTextNode("x")),Pi.appendChild(ai("br"));Pi.appendChild(document.createTextNode("x"))}li(e.measure,Pi);var n=Pi.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),ui(e.measure),n||1}function rt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=ai("span","x"),n=ai("pre",[t]);li(e.measure,n);var r=t.offsetWidth;return r>2&&(e.cachedCharWidth=r),r||10}function it(e){e.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Zi},Lo++||(ko=[])}function ot(e){var t=e.curOp,n=e.doc,r=e.display;if(e.curOp=null,t.updateMaxLine&&f(e),r.maxLineChanged&&!e.options.lineWrapping&&r.maxLine){var i=V(e,r.maxLine);r.sizer.style.minWidth=Math.max(0,i+3+qo)+"px",r.maxLineChanged=!1;var o=Math.max(0,r.sizer.offsetLeft+r.sizer.offsetWidth-r.scroller.clientWidth);o<n.scrollLeft&&!t.updateScrollPos&&qt(e,Math.min(r.scroller.scrollLeft,o),!0)}var a,u;if(t.updateScrollPos)a=t.updateScrollPos;else if(t.selectionChanged&&r.scroller.clientHeight){var l=J(e,n.sel.head);a=cn(e,l.left,l.top,l.left,l.bottom)}(t.changes.length||t.forceUpdate||a&&null!=a.scrollTop)&&(u=b(e,t.changes,a&&a.scrollTop,t.forceUpdate),e.display.scroller.offsetHeight&&(e.doc.scrollTop=e.display.scroller.scrollTop)),!u&&t.selectionChanged&&T(e),t.updateScrollPos?(r.scroller.scrollTop=r.scrollbarV.scrollTop=n.scrollTop=a.scrollTop,r.scroller.scrollLeft=r.scrollbarH.scrollLeft=n.scrollLeft=a.scrollLeft,m(e),t.scrollToPos&&ln(e,Jt(e.doc,t.scrollToPos.from),Jt(e.doc,t.scrollToPos.to),t.scrollToPos.margin)):a&&un(e),t.selectionChanged&&I(e),e.state.focused&&t.updateInput&&pt(e,t.userSelChange);var s=t.maybeHiddenMarkers,c=t.maybeUnhiddenMarkers;if(s)for(var h=0;h<s.length;++h)s[h].lines.length||Rr(s[h],"hide");if(c)for(var h=0;h<c.length;++h)c[h].lines.length&&Rr(c[h],"unhide");var p;if(--Lo||(p=ko,ko=null),t.textChanged&&Rr(e,"change",e,t.textChanged),t.cursorActivity&&Rr(e,"cursorActivity",e),p)for(var h=0;h<p.length;++h)p[h]()}function at(e,t){return function(){var n=e||this,r=!n.curOp;r&&it(n);try{var i=t.apply(n,arguments)}finally{r&&ot(n)}return i}}function ut(e){return function(){var t,n=this.cm&&!this.cm.curOp;n&&it(this.cm);try{t=e.apply(this,arguments)}finally{n&&ot(this.cm)}return t}}function lt(e,t){var n,r=!e.curOp;r&&it(e);try{n=t()}finally{r&&ot(e)}return n}function st(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),e.curOp.changes.push({from:t,to:n,diff:r})}function ct(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){ht(e),e.state.focused&&ct(e)})}function ft(e){function t(){var r=ht(e);r||n?(e.display.pollingFast=!1,ct(e)):(n=!0,e.display.poll.set(60,t))}var n=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function ht(e){var t=e.display.input,n=e.display.prevInput,r=e.doc,i=r.sel;if(!e.state.focused||jo(t)||mt(e)||e.state.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var o=t.value;if(o==n&&Kt(i.from,i.to))return!1;if(Ai&&!Mi&&e.display.inputHasSelection===o)return pt(e,!0),!1;var a=!e.curOp;a&&it(e),i.shift=!1;for(var u=0,l=Math.min(n.length,o.length);l>u&&n.charCodeAt(u)==o.charCodeAt(u);)++u;var s=i.from,c=i.to;u<n.length?s=Ut(s.line,s.ch-(n.length-u)):e.state.overwrite&&Kt(s,c)&&!e.state.pasteIncoming&&(c=Ut(c.line,Math.min(dr(r,c.line).text.length,c.ch+(o.length-u))));var f=e.curOp.updateInput,h={from:s,to:c,text:_o(o.slice(u)),origin:e.state.pasteIncoming?"paste":"+input"};return Ft(e.doc,h,"end"),e.curOp.updateInput=f,Br(e,"inputRead",e,h),o.length>1e3||o.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=o,a&&ot(e),e.state.pasteIncoming=!1,!0}function pt(e,t){var n,r,i=e.doc;if(Kt(i.sel.from,i.sel.to))t&&(e.display.prevInput=e.display.input.value="",Ai&&!Mi&&(e.display.inputHasSelection=null));else{e.display.prevInput="",n=Wo&&(i.sel.to.line-i.sel.from.line>100||(r=e.getSelection()).length>1e3);var o=n?"-":r||e.getSelection();e.display.input.value=o,e.state.focused&&Jr(e.display.input),Ai&&!Mi&&(e.display.inputHasSelection=o)}e.display.inaccurateSelection=n}function dt(e){"nocursor"==e.options.readOnly||Fi&&document.activeElement==e.display.input||e.display.input.focus()}function mt(e){return e.options.readOnly||e.doc.cantEdit}function gt(e){function t(){e.state.focused&&setTimeout(ri(dt,e),0)}function n(){null==u&&(u=setTimeout(function(){u=null,a.cachedCharWidth=a.cachedTextHeight=Eo=null,G(e),lt(e,ri(st,e))},100))}function r(){for(var e=a.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(r,5e3):$r(window,"resize",n)}function i(t){Pr(e,t)||e.options.onDragEvent&&e.options.onDragEvent(e,Nr(t))||Hr(t)}function o(){a.inaccurateSelection&&(a.prevInput="",a.inaccurateSelection=!1,a.input.value=e.getSelection(),Jr(a.input))}var a=e.display;Fr(a.scroller,"mousedown",at(e,bt)),Ai?Fr(a.scroller,"dblclick",at(e,function(t){if(!Pr(e,t)){var n=yt(e,t);if(n&&!xt(e,t)&&!vt(e.display,t)){_r(t);var r=vn(dr(e.doc,n.line).text,n);tn(e.doc,r.from,r.to)}}})):Fr(a.scroller,"dblclick",function(t){Pr(e,t)||_r(t)}),Fr(a.lineSpace,"selectstart",function(e){vt(a,e)||_r(e)}),Ki||Fr(a.scroller,"contextmenu",function(t){Wt(e,t)}),Fr(a.scroller,"scroll",function(){a.scroller.clientHeight&&(Lt(e,a.scroller.scrollTop),qt(e,a.scroller.scrollLeft,!0),Rr(e,"scroll",e))}),Fr(a.scrollbarV,"scroll",function(){a.scroller.clientHeight&&Lt(e,a.scrollbarV.scrollTop)}),Fr(a.scrollbarH,"scroll",function(){a.scroller.clientHeight&&qt(e,a.scrollbarH.scrollLeft)}),Fr(a.scroller,"mousewheel",function(t){At(e,t)}),Fr(a.scroller,"DOMMouseScroll",function(t){At(e,t)}),Fr(a.scrollbarH,"mousedown",t),Fr(a.scrollbarV,"mousedown",t),Fr(a.wrapper,"scroll",function(){a.wrapper.scrollTop=a.wrapper.scrollLeft=0});var u;Fr(window,"resize",n),setTimeout(r,5e3),Fr(a.input,"keyup",at(e,function(t){Pr(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,Nr(t))||16==t.keyCode&&(e.doc.sel.shift=!1)})),Fr(a.input,"input",function(){Ai&&!Mi&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),ft(e)}),Fr(a.input,"keydown",at(e,Et)),Fr(a.input,"keypress",at(e,Nt)),Fr(a.input,"focus",ri(_t,e)),Fr(a.input,"blur",ri(jt,e)),e.options.dragDrop&&(Fr(a.scroller,"dragstart",function(t){kt(e,t)}),Fr(a.scroller,"dragenter",i),Fr(a.scroller,"dragover",i),Fr(a.scroller,"drop",at(e,Ct))),Fr(a.scroller,"paste",function(t){vt(a,t)||(dt(e),ft(e))}),Fr(a.input,"paste",function(){if(Oi&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=a.input.selectionStart,n=a.input.selectionEnd;a.input.value+="$",a.input.selectionStart=t,a.input.selectionEnd=n,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,ft(e)}),Fr(a.input,"cut",o),Fr(a.input,"copy",o),ji&&Fr(a.sizer,"mouseup",function(){document.activeElement==a.input&&a.input.blur(),dt(e)})}function vt(e,t){for(var n=Dr(t);n!=e.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==e.sizer&&n!=e.mover)return!0}function yt(e,t,n){var r=e.display;if(!n){var i=Dr(t);if(i==r.scrollbarH||i==r.scrollbarH.firstChild||i==r.scrollbarV||i==r.scrollbarV.firstChild||i==r.scrollbarFiller||i==r.gutterFiller)return null}var o,a,u=ci(r.lineSpace);try{o=t.clientX,a=t.clientY}catch(t){return null}return et(e,o-u.left,a-u.top)}function bt(e){function t(e){if(!Kt(v,e)){if(v=e,"single"==c)return tn(i.doc,Jt(a,l),e),void 0;if(m=Jt(a,m),g=Jt(a,g),"double"==c){var t=vn(dr(a,e.line).text,e);Xt(e,m)?tn(i.doc,t.from,g):tn(i.doc,m,t.to)}else"triple"==c&&(Xt(e,m)?tn(i.doc,g,Jt(a,Ut(e.line,0))):tn(i.doc,m,Jt(a,Ut(e.line+1,0))))}}function n(e){var r=++b,u=yt(i,e,!0);if(u)if(Kt(u,h)){var l=e.clientY<y.top?-20:e.clientY>y.bottom?20:0;l&&setTimeout(at(i,function(){b==r&&(o.scroller.scrollTop+=l,n(e))}),50)}else{i.state.focused||_t(i),h=u,t(u);var s=d(o,a);(u.line>=s.to||u.line<s.from)&&setTimeout(at(i,function(){b==r&&n(e)}),150)}}function r(e){b=1/0,_r(e),dt(i),$r(document,"mousemove",S),$r(document,"mouseup",w)}if(!Pr(this,e)){var i=this,o=i.display,a=i.doc,u=a.sel;if(u.shift=e.shiftKey,vt(o,e))return Oi||(o.scroller.draggable=!1,setTimeout(function(){o.scroller.draggable=!0
},100)),void 0;if(!xt(i,e)){var l=yt(i,e);switch(zr(e)){case 3:return Ki&&Wt.call(i,i,e),void 0;case 2:return Oi&&(i.state.lastMiddleDown=+new Date),l&&tn(i.doc,l),setTimeout(ri(dt,i),20),_r(e),void 0}if(!l)return Dr(e)==o.scroller&&_r(e),void 0;i.state.focused||_t(i);var s=+new Date,c="single";if(Gi&&Gi.time>s-400&&Kt(Gi.pos,l))c="triple",_r(e),setTimeout(ri(dt,i),20),yn(i,l.line);else if(Vi&&Vi.time>s-400&&Kt(Vi.pos,l)){c="double",Gi={time:s,pos:l},_r(e);var f=vn(dr(a,l.line).text,l);tn(i.doc,f.from,f.to)}else Vi={time:s,pos:l};var h=l;if(i.options.dragDrop&&Io&&!mt(i)&&!Kt(u.from,u.to)&&!Xt(l,u.from)&&!Xt(u.to,l)&&"single"==c){var p=at(i,function(t){Oi&&(o.scroller.draggable=!1),i.state.draggingText=!1,$r(document,"mouseup",p),$r(o.scroller,"drop",p),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(_r(t),tn(i.doc,l),dt(i))});return Oi&&(o.scroller.draggable=!0),i.state.draggingText=p,o.scroller.dragDrop&&o.scroller.dragDrop(),Fr(document,"mouseup",p),Fr(o.scroller,"drop",p),void 0}_r(e),"single"==c&&tn(i.doc,Jt(a,l));var m=u.from,g=u.to,v=l,y=ci(o.wrapper),b=0,S=at(i,function(e){Ai||zr(e)?n(e):r(e)}),w=at(i,r);Fr(document,"mousemove",S),Fr(document,"mouseup",w)}}}function St(e,t,n,r,i){try{var o=t.clientX,a=t.clientY}catch(t){return!1}if(o>=Math.floor(ci(e.display.gutters).right))return!1;r&&_r(t);var u=e.display,l=ci(u.lineDiv);if(a>l.bottom||!Gr(e,n))return Wr(t);a-=l.top-u.viewOffset;for(var s=0;s<e.options.gutters.length;++s){var c=u.gutters.childNodes[s];if(c&&ci(c).right>=o){var f=br(e.doc,a),h=e.options.gutters[s];return i(e,n,e,f,h,t),Wr(t)}}}function wt(e,t){return Gr(e,"gutterContextMenu")?St(e,t,"gutterContextMenu",!1,Rr):!1}function xt(e,t){return St(e,t,"gutterClick",!0,Br)}function Ct(e){var t=this;if(!(Pr(t,e)||vt(t.display,e)||t.options.onDragEvent&&t.options.onDragEvent(t,Nr(e)))){_r(e),Ai&&(Ji=+new Date);var n=yt(t,e,!0),r=e.dataTransfer.files;if(n&&!mt(t))if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,u=function(e,r){var u=new FileReader;u.onload=function(){o[r]=u.result,++a==i&&(n=Jt(t.doc,n),Ft(t.doc,{from:n,to:n,text:_o(o.join("\n")),origin:"paste"},"around"))},u.readAsText(e)},l=0;i>l;++l)u(r[l],l);else{if(t.state.draggingText&&!Xt(n,t.doc.sel.from)&&!Xt(t.doc.sel.to,n))return t.state.draggingText(e),setTimeout(ri(dt,t),20),void 0;try{var o=e.dataTransfer.getData("Text");if(o){var s=t.doc.sel.from,c=t.doc.sel.to;rn(t.doc,n,n),t.state.draggingText&&Gt(t.doc,"",s,c,"paste"),t.replaceSelection(o,null,"paste"),dt(t),_t(t)}}catch(e){}}}}function kt(e,t){if(Ai&&(!e.state.draggingText||+new Date-Ji<100))return Hr(t),void 0;if(!Pr(e,t)&&!vt(e.display,t)){var n=e.getSelection();if(t.dataTransfer.setData("Text",n),t.dataTransfer.setDragImage&&!_i){var r=ai("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Ni&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),Ni&&r.parentNode.removeChild(r)}}}function Lt(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,qi||b(e,[],t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),qi&&b(e,[]),E(e,100))}function qt(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,m(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function At(e,t){var n=t.wheelDeltaX,r=t.wheelDeltaY;null==n&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(n=t.detail),null==r&&t.detail&&t.axis==t.VERTICAL_AXIS?r=t.detail:null==r&&(r=t.wheelDelta);var i=e.display,o=i.scroller;if(n&&o.scrollWidth>o.clientWidth||r&&o.scrollHeight>o.clientHeight){if(r&&$i&&Oi)for(var a=t.target;a!=o;a=a.parentNode)if(a.lineObj){e.display.currentWheelTarget=a;break}if(n&&!qi&&!Ni&&null!=eo)return r&&Lt(e,Math.max(0,Math.min(o.scrollTop+r*eo,o.scrollHeight-o.clientHeight))),qt(e,Math.max(0,Math.min(o.scrollLeft+n*eo,o.scrollWidth-o.clientWidth))),_r(t),i.wheelStartX=null,void 0;if(r&&null!=eo){var u=r*eo,l=e.doc.scrollTop,s=l+i.wrapper.clientHeight;0>u?l=Math.max(0,l+u-50):s=Math.min(e.doc.height,s+u+50),b(e,[],{top:l,bottom:s})}20>Qi&&(null==i.wheelStartX?(i.wheelStartX=o.scrollLeft,i.wheelStartY=o.scrollTop,i.wheelDX=n,i.wheelDY=r,setTimeout(function(){if(null!=i.wheelStartX){var e=o.scrollLeft-i.wheelStartX,t=o.scrollTop-i.wheelStartY,n=t&&i.wheelDY&&t/i.wheelDY||e&&i.wheelDX&&e/i.wheelDX;i.wheelStartX=i.wheelStartY=null,n&&(eo=(eo*Qi+n)/(Qi+1),++Qi)}},200)):(i.wheelDX+=n,i.wheelDY+=r))}}function Tt(e,t,n){if("string"==typeof t&&(t=po[t],!t))return!1;e.display.pollingFast&&ht(e)&&(e.display.pollingFast=!1);var r=e.doc,i=r.sel.shift,o=!1;try{mt(e)&&(e.state.suppressEdits=!0),n&&(r.sel.shift=!1),o=t(e)!=Ao}finally{r.sel.shift=i,e.state.suppressEdits=!1}return o}function Mt(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function Ot(e,t){var n=xn(e.options.keyMap),r=n.auto;clearTimeout(to),r&&!kn(t)&&(to=setTimeout(function(){xn(e.options.keyMap)==n&&(e.options.keyMap=r.call?r.call(null,e):r,a(e))},50));var i=Ln(t,!0),o=!1;if(!i)return!1;var u=Mt(e);return o=t.shiftKey?Cn("Shift-"+i,u,function(t){return Tt(e,t,!0)})||Cn(i,u,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?Tt(e,t):void 0}):Cn(i,u,function(t){return Tt(e,t)}),o&&(_r(t),I(e),Mi&&(t.oldKeyCode=t.keyCode,t.keyCode=0),Br(e,"keyHandled",e,i,t)),o}function It(e,t,n){var r=Cn("'"+n+"'",Mt(e),function(t){return Tt(e,t,!0)});return r&&(_r(t),I(e),Br(e,"keyHandled",e,"'"+n+"'",t)),r}function Et(e){var t=this;if(t.state.focused||_t(t),!(Pr(t,e)||t.options.onKeyEvent&&t.options.onKeyEvent(t,Nr(e)))){Ai&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.doc.sel.shift=16==n||e.shiftKey;var r=Ot(t,e);Ni&&(ro=r?n:null,!r&&88==n&&!Wo&&($i?e.metaKey:e.ctrlKey)&&t.replaceSelection(""))}}function Nt(e){var t=this;if(!(Pr(t,e)||t.options.onKeyEvent&&t.options.onKeyEvent(t,Nr(e)))){var n=e.keyCode,r=e.charCode;if(Ni&&n==ro)return ro=null,_r(e),void 0;if(!(Ni&&(!e.which||e.which<10)||ji)||!Ot(t,e)){var i=String.fromCharCode(null==r?n:r);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!mt(this)&&this.doc.mode.electricChars.indexOf(i)>-1&&setTimeout(at(t,function(){pn(t,t.doc.sel.to.line,"smart")}),75),It(t,e,i)||(Ai&&!Mi&&(t.display.inputHasSelection=null),ft(t))}}}function _t(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(Rr(e,"focus",e),e.state.focused=!0,-1==e.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(e.display.wrapper.className+=" CodeMirror-focused"),e.curOp||(pt(e,!0),Oi&&setTimeout(ri(pt,e,!0),0))),ct(e),I(e))}function jt(e){e.state.focused&&(Rr(e,"blur",e),e.state.focused=!1,e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.doc.sel.shift=!1)},150)}function Wt(e,t){function n(){if(null!=i.input.selectionStart){var e=i.input.value="​"+(Kt(o.from,o.to)?"":i.input.value);i.prevInput="​",i.input.selectionStart=1,i.input.selectionEnd=e.length}}function r(){if(i.inputDiv.style.position="relative",i.input.style.cssText=s,Mi&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=u),ct(e),null!=i.input.selectionStart){(!Ai||Mi)&&n(),clearTimeout(no);var t=0,r=function(){" "==i.prevInput&&0==i.input.selectionStart?at(e,po.selectAll)(e):t++<10?no=setTimeout(r,500):pt(e)};no=setTimeout(r,200)}}if(!Pr(e,t,"contextmenu")){var i=e.display,o=e.doc.sel;if(!vt(i,t)&&!wt(e,t)){var a=yt(e,t),u=i.scroller.scrollTop;if(a&&!Ni){var l=e.options.resetSelectionOnContextMenu;l&&(Kt(o.from,o.to)||Xt(a,o.from)||!Xt(a,o.to))&&at(e,rn)(e.doc,a,a);var s=i.input.style.cssText;if(i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",dt(e),pt(e,!0),Kt(o.from,o.to)&&(i.input.value=i.prevInput=" "),Ai&&!Mi&&n(),Ki){Hr(t);var c=function(){$r(window,"mouseup",c),setTimeout(r,20)};Fr(window,"mouseup",c)}else setTimeout(r,50)}}}}function Ht(e,t,n){if(!Xt(t.from,n))return Jt(e,n);var r=t.text.length-1-(t.to.line-t.from.line);if(n.line>t.to.line+r){var i=n.line-r,o=e.first+e.size-1;return i>o?Ut(o,dr(e,o).text.length):Qt(n,dr(e,i).text.length)}if(n.line==t.to.line+r)return Qt(n,Zr(t.text).length+(1==t.text.length?t.from.ch:0)+dr(e,t.to.line).text.length-t.to.ch);var a=n.line-t.from.line;return Qt(n,t.text[a].length+(a?0:t.from.ch))}function Dt(e,t,n){if(n&&"object"==typeof n)return{anchor:Ht(e,t,n.anchor),head:Ht(e,t,n.head)};if("start"==n)return{anchor:t.from,head:t.from};var r=io(t);if("around"==n)return{anchor:t.from,head:r};if("end"==n)return{anchor:r,head:r};var i=function(e){if(Xt(e,t.from))return e;if(!Xt(t.to,e))return r;var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=r.ch-t.to.ch),Ut(n,i)};return{anchor:i(e.sel.anchor),head:i(e.sel.head)}}function zt(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(t,n,r,i){t&&(this.from=Jt(e,t)),n&&(this.to=Jt(e,n)),r&&(this.text=r),void 0!==i&&(this.origin=i)}),Rr(e,"beforeChange",e,r),e.cm&&Rr(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Ft(e,t,n,r){if(e.cm){if(!e.cm.curOp)return at(e.cm,Ft)(e,t,n,r);if(e.cm.state.suppressEdits)return}if(!(Gr(e,"beforeChange")||e.cm&&Gr(e.cm,"beforeChange"))||(t=zt(e,t,!0))){var i=Xi&&!r&&Dn(e,t.from,t.to);if(i){for(var o=i.length-1;o>=1;--o)$t(e,{from:i[o].from,to:i[o].to,text:[""]});i.length&&$t(e,{from:i[0].from,to:i[0].to,text:t.text},n)}else $t(e,t,n)}}function $t(e,t,n){if(1!=t.text.length||""!=t.text[0]||!Kt(t.from,t.to)){var r=Dt(e,t,n);Lr(e,t,r,e.cm?e.cm.curOp.id:0/0),Pt(e,t,r,Wn(e,t));var i=[];hr(e,function(e,n){n||-1!=Qr(i,e.history)||(Ir(e.history,t),i.push(e.history)),Pt(e,t,null,Wn(e,t))})}}function Rt(e,t){if(!e.cm||!e.cm.state.suppressEdits){var n=e.history,r=("undo"==t?n.done:n.undone).pop();if(r){var i={changes:[],anchorBefore:r.anchorAfter,headBefore:r.headAfter,anchorAfter:r.anchorBefore,headAfter:r.headBefore,generation:n.generation};("undo"==t?n.undone:n.done).push(i),n.generation=r.generation||++n.maxGeneration;for(var o=Gr(e,"beforeChange")||e.cm&&Gr(e.cm,"beforeChange"),a=r.changes.length-1;a>=0;--a){var u=r.changes[a];if(u.origin=t,o&&!zt(e,u,!1))return("undo"==t?n.done:n.undone).length=0,void 0;i.changes.push(kr(e,u));var l=a?Dt(e,u,null):{anchor:r.anchorBefore,head:r.headBefore};Pt(e,u,l,Hn(e,u));var s=[];hr(e,function(e,t){t||-1!=Qr(s,e.history)||(Ir(e.history,u),s.push(e.history)),Pt(e,u,null,Hn(e,u))})}}}}function Bt(e,t){function n(e){return Ut(e.line+t,e.ch)}e.first+=t,e.cm&&st(e.cm,e.first,e.first,t),e.sel.head=n(e.sel.head),e.sel.anchor=n(e.sel.anchor),e.sel.from=n(e.sel.from),e.sel.to=n(e.sel.to)}function Pt(e,t,n,r){if(e.cm&&!e.cm.curOp)return at(e.cm,Pt)(e,t,n,r);if(t.to.line<e.first)return Bt(e,t.text.length-1-(t.to.line-t.from.line)),void 0;if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Bt(e,i),t={from:Ut(e.first,0),to:Ut(t.to.line+i,t.to.ch),text:[Zr(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:Ut(o,dr(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=mr(e,t.from,t.to),n||(n=Dt(e,t,null)),e.cm?Vt(e.cm,t,r,n):sr(e,t,r,n)}}function Vt(e,t,n,r){var o=e.doc,a=e.display,u=t.from,l=t.to,s=!1,f=u.line;e.options.lineWrapping||(f=yr(Rn(o,dr(o,u.line))),o.iter(f,l.line+1,function(e){return e==a.maxLine?(s=!0,!0):void 0})),Xt(o.sel.head,t.from)||Xt(t.to,o.sel.head)||(e.curOp.cursorActivity=!0),sr(o,t,n,r,i(e)),e.options.lineWrapping||(o.iter(f,u.line+t.text.length,function(e){var t=c(o,e);t>a.maxLineLength&&(a.maxLine=e,a.maxLineLength=t,a.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0)),o.frontier=Math.min(o.frontier,u.line),E(e,400);var h=t.text.length-(l.line-u.line)-1;if(st(e,u.line,l.line+1,h),Gr(e,"change")){var p={from:u,to:l,text:t.text,removed:t.removed,origin:t.origin};if(e.curOp.textChanged){for(var d=e.curOp.textChanged;d.next;d=d.next);d.next=p}else e.curOp.textChanged=p}}function Gt(e,t,n,r,i){if(r||(r=n),Xt(r,n)){var o=r;r=n,n=o}"string"==typeof t&&(t=_o(t)),Ft(e,{from:n,to:r,text:t,origin:i},null)}function Ut(e,t){return this instanceof Ut?(this.line=e,this.ch=t,void 0):new Ut(e,t)}function Kt(e,t){return e.line==t.line&&e.ch==t.ch}function Xt(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function Yt(e){return Ut(e.line,e.ch)}function Zt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Jt(e,t){if(t.line<e.first)return Ut(e.first,0);var n=e.first+e.size-1;return t.line>n?Ut(n,dr(e,n).text.length):Qt(t,dr(e,t.line).text.length)}function Qt(e,t){var n=e.ch;return null==n||n>t?Ut(e.line,t):0>n?Ut(e.line,0):e}function en(e,t){return t>=e.first&&t<e.first+e.size}function tn(e,t,n,r){if(e.sel.shift||e.sel.extend){var i=e.sel.anchor;if(n){var o=Xt(t,i);o!=Xt(n,i)?(i=t,t=n):o!=Xt(t,n)&&(t=n)}rn(e,i,t,r)}else rn(e,t,n||t,r);e.cm&&(e.cm.curOp.userSelChange=!0)}function nn(e,t,n){var r={anchor:t,head:n};return Rr(e,"beforeSelectionChange",e,r),e.cm&&Rr(e.cm,"beforeSelectionChange",e.cm,r),r.anchor=Jt(e,r.anchor),r.head=Jt(e,r.head),r}function rn(e,t,n,r,i){if(!i&&Gr(e,"beforeSelectionChange")||e.cm&&Gr(e.cm,"beforeSelectionChange")){var o=nn(e,t,n);n=o.head,t=o.anchor}var a=e.sel;if(a.goalColumn=null,null==r&&(r=Xt(n,a.head)?-1:1),(i||!Kt(t,a.anchor))&&(t=an(e,t,r,"push"!=i)),(i||!Kt(n,a.head))&&(n=an(e,n,r,"push"!=i)),!Kt(a.anchor,t)||!Kt(a.head,n)){a.anchor=t,a.head=n;var u=Xt(n,t);a.from=u?n:t,a.to=u?t:n,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=e.cm.curOp.cursorActivity=!0),Br(e,"cursorActivity",e)}}function on(e){rn(e.doc,e.doc.sel.from,e.doc.sel.to,null,"push")}function an(e,t,n,r){var i=!1,o=t,a=n||1;e.cantEdit=!1;e:for(;;){var u=dr(e,o.line);if(u.markedSpans)for(var l=0;l<u.markedSpans.length;++l){var s=u.markedSpans[l],c=s.marker;if((null==s.from||(c.inclusiveLeft?s.from<=o.ch:s.from<o.ch))&&(null==s.to||(c.inclusiveRight?s.to>=o.ch:s.to>o.ch))){if(r&&(Rr(c,"beforeCursorEnter"),c.explicitlyCleared)){if(u.markedSpans){--l;continue}break}if(!c.atomic)continue;var f=c.find()[0>a?"from":"to"];if(Kt(f,o)&&(f.ch+=a,f.ch<0?f=f.line>e.first?Jt(e,Ut(f.line-1)):null:f.ch>u.text.length&&(f=f.line<e.first+e.size-1?Ut(f.line+1,0):null),!f)){if(i)return r?(e.cantEdit=!0,Ut(e.first,0)):an(e,t,n,!0);i=!0,f=t,a=-a}o=f;continue e}}return o}}function un(e){var t=ln(e,e.doc.sel.head,null,e.options.cursorScrollMargin);if(e.state.focused){var n=e.display,r=ci(n.sizer),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!Di){var o="none"==n.cursor.style.display;o&&(n.cursor.style.display="",n.cursor.style.left=t.left+"px",n.cursor.style.top=t.top-n.viewOffset+"px"),n.cursor.scrollIntoView(i),o&&(n.cursor.style.display="none")}}}function ln(e,t,n,r){for(null==r&&(r=0);;){var i=!1,o=J(e,t),a=n&&n!=t?J(e,n):o,u=cn(e,Math.min(o.left,a.left),Math.min(o.top,a.top)-r,Math.max(o.left,a.left),Math.max(o.bottom,a.bottom)+r),l=e.doc.scrollTop,s=e.doc.scrollLeft;if(null!=u.scrollTop&&(Lt(e,u.scrollTop),Math.abs(e.doc.scrollTop-l)>1&&(i=!0)),null!=u.scrollLeft&&(qt(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-s)>1&&(i=!0)),!i)return o}}function sn(e,t,n,r,i){var o=cn(e,t,n,r,i);null!=o.scrollTop&&Lt(e,o.scrollTop),null!=o.scrollLeft&&qt(e,o.scrollLeft)}function cn(e,t,n,r,i){var o=e.display,a=nt(e.display);0>n&&(n=0);var u=o.scroller.clientHeight-qo,l=o.scroller.scrollTop,s={},c=e.doc.height+H(o),f=a>n,h=i>c-a;if(l>n)s.scrollTop=f?0:n;else if(i>l+u){var p=Math.min(n,(h?c:i)-u);p!=l&&(s.scrollTop=p)}var d=o.scroller.clientWidth-qo,m=o.scroller.scrollLeft;t+=o.gutters.offsetWidth,r+=o.gutters.offsetWidth;var g=o.gutters.offsetWidth,v=g+10>t;return m+g>t||v?(v&&(t=0),s.scrollLeft=Math.max(0,t-10-g)):r>d+m-3&&(s.scrollLeft=r+10-d),s}function fn(e,t,n){e.curOp.updateScrollPos={scrollLeft:null==t?e.doc.scrollLeft:t,scrollTop:null==n?e.doc.scrollTop:n}}function hn(e,t,n){var r=e.curOp.updateScrollPos||(e.curOp.updateScrollPos={scrollLeft:e.doc.scrollLeft,scrollTop:e.doc.scrollTop}),i=e.display.scroller;r.scrollTop=Math.max(0,Math.min(i.scrollHeight-i.clientHeight,r.scrollTop+n)),r.scrollLeft=Math.max(0,Math.min(i.scrollWidth-i.clientWidth,r.scrollLeft+t))}function pn(e,t,n,r){var i=e.doc;if(null==n&&(n="add"),"smart"==n)if(e.doc.mode.indent)var o=j(e,t);else n="prev";var a,u=e.options.tabSize,l=dr(i,t),s=Xr(l.text,null,u),c=l.text.match(/^\s*/)[0];if("smart"==n&&(a=e.doc.mode.indent(o,l.text.slice(c.length),l.text),a==Ao)){if(!r)return;n="prev"}"prev"==n?a=t>i.first?Xr(dr(i,t-1).text,null,u):0:"add"==n?a=s+e.options.indentUnit:"subtract"==n?a=s-e.options.indentUnit:"number"==typeof n&&(a=s+n),a=Math.max(0,a);var f="",h=0;if(e.options.indentWithTabs)for(var p=Math.floor(a/u);p;--p)h+=u,f+="	";a>h&&(f+=Yr(a-h)),f!=c&&Gt(e.doc,f,Ut(t,0),Ut(t,c.length),"+input"),l.stateAfter=null}function dn(e,t,n){var r=t,i=t,o=e.doc;return"number"==typeof t?i=dr(o,Zt(o,t)):r=yr(t),null==r?null:n(i,r)?(st(e,r,r+1),i):null}function mn(e,t,n,r,i){function o(){var t=u+n;return t<e.first||t>=e.first+e.size?f=!1:(u=t,c=dr(e,t))}function a(e){var t=(i?ki:Li)(c,l,n,!0);if(null==t){if(e||!o())return f=!1;l=i?(0>n?yi:vi)(c):0>n?c.text.length:0}else l=t;return!0}var u=t.line,l=t.ch,s=n,c=dr(e,u),f=!0;if("char"==r)a();else if("column"==r)a(!0);else if("word"==r||"group"==r)for(var h=null,p="group"==r,d=!0;!(0>n)||a(!d);d=!1){var m=c.text.charAt(l)||"\n",g=ii(m)?"w":p?/\s/.test(m)?null:"p":null;if(h&&h!=g){0>n&&(n=1,a());break}if(g&&(h=g),n>0&&!a(!d))break}var v=an(e,Ut(u,l),s,!0);return f||(v.hitSide=!0),v}function gn(e,t,n,r){var i,o=e.doc,a=t.left;if("page"==r){var u=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=t.top+n*(u-(0>n?1.5:.5)*nt(e.display))}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;;){var l=et(e,a,i);if(!l.outside)break;if(0>n?0>=i:i>=o.height){l.hitSide=!0;break}i+=5*n}return l}function vn(e,t){var n=t.ch,r=t.ch;if(e){(t.xRel<0||r==e.length)&&n?--n:++r;for(var i=e.charAt(n),o=ii(i)?ii:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ii(e)};n>0&&o(e.charAt(n-1));)--n;for(;r<e.length&&o(e.charAt(r));)++r}return{from:Ut(t.line,n),to:Ut(t.line,r)}}function yn(e,t){tn(e.doc,Ut(t,0),Jt(e.doc,Ut(t+1,0)))}function bn(t,n,r,i){e.defaults[t]=n,r&&(oo[t]=i?function(e,t,n){n!=uo&&r(e,t,n)}:r)}function Sn(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function wn(e,t,n){return e.startState?e.startState(t,n):!0}function xn(e){return"string"==typeof e?mo[e]:e}function Cn(e,t,n){function r(t){t=xn(t);var i=t[e];if(i===!1)return"stop";if(null!=i&&n(i))return!0;if(t.nofallthrough)return"stop";var o=t.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return r(o);for(var a=0,u=o.length;u>a;++a){var l=r(o[a]);if(l)return l}return!1}for(var i=0;i<t.length;++i){var o=r(t[i]);if(o)return"stop"!=o}}function kn(e){var t=Ho[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Ln(e,t){if(Ni&&34==e.keyCode&&e["char"])return!1;var n=Ho[e.keyCode];return null==n||e.altGraphKey?!1:(e.altKey&&(n="Alt-"+n),(Ui?e.metaKey:e.ctrlKey)&&(n="Ctrl-"+n),(Ui?e.ctrlKey:e.metaKey)&&(n="Cmd-"+n),!t&&e.shiftKey&&(n="Shift-"+n),n)}function qn(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0}function An(e,t){this.lines=[],this.type=t,this.doc=e}function Tn(e,t,n,r,i){if(r&&r.shared)return On(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return at(e.cm,Tn)(e,t,n,r,i);var o=new An(e,i);if("range"==i&&!Xt(t,n))return o;r&&ti(r,o),o.replacedWith&&(o.collapsed=!0,o.replacedWith=ai("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||(o.replacedWith.ignoreEvents=!0)),o.collapsed&&(Yi=!0),o.addToHistory&&Lr(e,{from:t,to:n,origin:"markText"},{head:e.sel.head,anchor:e.sel.anchor},0/0);var a,u,l,s=t.line,c=0,f=e.cm;if(e.iter(s,n.line+1,function(r){f&&o.collapsed&&!f.options.lineWrapping&&Rn(e,r)==f.display.maxLine&&(l=!0);var i={from:null,to:null,marker:o};c+=r.text.length,s==t.line&&(i.from=t.ch,c-=t.ch),s==n.line&&(i.to=n.ch,c-=r.text.length-n.ch),o.collapsed&&(s==n.line&&(u=zn(r,n.ch)),s==t.line?a=zn(r,t.ch):vr(r,0)),Nn(r,i),++s}),o.collapsed&&e.iter(t.line,n.line+1,function(t){Bn(e,t)&&vr(t,0)}),o.clearOnEnter&&Fr(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(Xi=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed){if(a!=u)throw new Error("Inserting collapsed marker overlapping an existing one");o.size=c,o.atomic=!0}return f&&(l&&(f.curOp.updateMaxLine=!0),(o.className||o.title||o.startStyle||o.endStyle||o.collapsed)&&st(f,t.line,n.line+1),o.atomic&&on(f)),o}function Mn(e,t){this.markers=e,this.primary=t;for(var n=0,r=this;n<e.length;++n)e[n].parent=this,Fr(e[n],"clear",function(){r.clear()})}function On(e,t,n,r,i){r=ti(r),r.shared=!1;var o=[Tn(e,t,n,r,i)],a=o[0],u=r.replacedWith;return hr(e,function(e){u&&(r.replacedWith=u.cloneNode(!0)),o.push(Tn(e,Jt(e,t),Jt(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=Zr(o)}),new Mn(o,a)}function In(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function En(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Nn(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function _n(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker,u=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);if(u||"bookmark"==a.type&&o.from==t&&(!n||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push({from:o.from,to:l?null:o.to,marker:a})}}return r}function jn(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker,u=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);if(u||"bookmark"==a.type&&o.from==t&&(!n||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push({from:l?null:o.from-t,to:null==o.to?null:o.to-t,marker:a})}}return r}function Wn(e,t){var n=en(e,t.from.line)&&dr(e,t.from.line).markedSpans,r=en(e,t.to.line)&&dr(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=Kt(t.from,t.to),u=_n(n,i,a),l=jn(r,o,a),s=1==t.text.length,c=Zr(t.text).length+(s?i:0);if(u)for(var f=0;f<u.length;++f){var h=u[f];if(null==h.to){var p=In(l,h.marker);p?s&&(h.to=null==p.to?null:p.to+c):h.to=i}}if(l)for(var f=0;f<l.length;++f){var h=l[f];if(null!=h.to&&(h.to+=c),null==h.from){var p=In(u,h.marker);p||(h.from=c,s&&(u||(u=[])).push(h))}else h.from+=c,s&&(u||(u=[])).push(h)}if(s&&u){for(var f=0;f<u.length;++f)null!=u[f].from&&u[f].from==u[f].to&&"bookmark"!=u[f].marker.type&&u.splice(f--,1);u.length||(u=null)}var d=[u];if(!s){var m,g=t.text.length-2;if(g>0&&u)for(var f=0;f<u.length;++f)null==u[f].to&&(m||(m=[])).push({from:null,to:null,marker:u[f].marker});for(var f=0;g>f;++f)d.push(m);d.push(l)}return d}function Hn(e,t){var n=Ar(e,t),r=Wn(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var u=0;u<a.length;++u){for(var l=a[u],s=0;s<o.length;++s)if(o[s].marker==l.marker)continue e;o.push(l)}else a&&(n[i]=a)}return n}function Dn(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=Qr(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],u=a.find(),l=0;l<i.length;++l){var s=i[l];if(!Xt(s.to,u.from)&&!Xt(u.to,s.from)){var c=[l,1];(Xt(s.from,u.from)||!a.inclusiveLeft&&Kt(s.from,u.from))&&c.push({from:s.from,to:u.from}),(Xt(u.to,s.to)||!a.inclusiveRight&&Kt(s.to,u.to))&&c.push({from:u.to,to:s.to}),i.splice.apply(i,c),l+=c.length-1}}return i}function zn(e,t){var n,r=Yi&&e.markedSpans;if(r)for(var i,o=0;o<r.length;++o)i=r[o],i.marker.collapsed&&(null==i.from||i.from<t)&&(null==i.to||i.to>t)&&(!n||n.width<i.marker.width)&&(n=i.marker);return n}function Fn(e){return zn(e,-1)}function $n(e){return zn(e,e.text.length+1)}function Rn(e,t){for(var n;n=Fn(t);)t=dr(e,n.find().from.line);return t}function Bn(e,t){var n=Yi&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i)if(r=n[i],r.marker.collapsed){if(null==r.from)return!0;if(!r.marker.replacedWith&&0==r.from&&r.marker.inclusiveLeft&&Pn(e,t,r))return!0}}function Pn(e,t,n){if(null==n.to){var r=n.marker.find().to,i=dr(e,r.line);return Pn(e,i,In(i.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var o,a=0;a<t.markedSpans.length;++a)if(o=t.markedSpans[a],o.marker.collapsed&&!o.marker.replacedWith&&o.from==n.to&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&Pn(e,t,o))return!0}function Vn(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Gn(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Un(e){return function(){var t=!this.cm.curOp;t&&it(this.cm);try{var n=e.apply(this,arguments)}finally{t&&ot(this.cm)}return n}}function Kn(e){return null!=e.height?e.height:(e.node.parentNode&&1==e.node.parentNode.nodeType||li(e.cm.display.measure,ai("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function Xn(e,t,n,r){var i=new go(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),dn(e,t,function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,!Bn(e.doc,t)||i.showIfHidden){var r=Sr(e,t)<e.doc.scrollTop;vr(t,t.height+Kn(i)),r&&hn(e,0,i.height)}return!0}),i}function Yn(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Vn(e),Gn(e,n);var i=r?r(e):1;i!=e.height&&vr(e,i)}function Zn(e){e.parent=null,Vn(e)}function Jn(e,t,n,r,i){var o=n.flattenSpans;null==o&&(o=e.options.flattenSpans);var a,u=0,l=null,s=new qn(t,e.options.tabSize);for(""==t&&n.blankLine&&n.blankLine(r);!s.eol();)s.pos>e.options.maxHighlightLength?(o=!1,s.pos=t.length,a=null):a=n.token(s,r),o&&l==a||(u<s.start&&i(s.start,l),u=s.start,l=a),s.start=s.pos;for(;u<s.pos;){var c=Math.min(s.pos,u+5e4);i(c,l),u=c}}function Qn(e,t,n){var r=[e.state.modeGen];Jn(e,t.text,e.doc.mode,n,function(e,t){r.push(e,t)});for(var i=0;i<e.state.overlays.length;++i){var o=e.state.overlays[i],a=1,u=0;Jn(e,t.text,o.mode,!0,function(e,t){for(var n=a;e>u;){var i=r[a];i>e&&r.splice(a,1,e,r[a+1],i),a+=2,u=Math.min(e,i)}if(t)if(o.opaque)r.splice(n,a-n,e,t),a=n+2;else for(;a>n;n+=2){var l=r[n+1];r[n+1]=l?l+" "+t:t}})}return r}function er(e,t){return t.styles&&t.styles[0]==e.state.modeGen||(t.styles=Qn(e,t,t.stateAfter=j(e,yr(t)))),t.styles}function tr(e,t,n){var r=e.doc.mode,i=new qn(t.text,e.options.tabSize);for(""==t.text&&r.blankLine&&r.blankLine(n);!i.eol()&&i.pos<=e.options.maxHighlightLength;)r.token(i,n),i.start=i.pos}function nr(e,t){if(!e)return null;for(;;){var n=e.match(/(?:^|\s)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return yo[e]||(yo[e]="cm-"+e.replace(/ +/g," cm-"))}function rr(e,t,n,r){for(var i,o=t,a=!0;i=Fn(o);)o=dr(e.doc,i.find().from.line);var u={pre:ai("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:e,copyWidgets:r};do{o.text&&(a=!1),u.measure=o==t&&n,u.pos=0,u.addToken=u.measure?or:ir,(Ai||Oi)&&e.getOption("lineWrapping")&&(u.addToken=ar(u.addToken));var l=lr(o,u,er(e,o));n&&o==t&&!u.measuredSomething&&(n[0]=u.pre.appendChild(pi(e.display.measure)),u.measuredSomething=!0),l&&(o=dr(e.doc,l.to.line))}while(l);!n||u.measuredSomething||n[0]||(n[0]=u.pre.appendChild(a?ai("span"," "):pi(e.display.measure))),u.pre.firstChild||Bn(e.doc,t)||u.pre.appendChild(document.createTextNode(" "));var s;if(n&&Ai&&(s=wr(o))){var c=s.length-1;s[c].from==s[c].to&&--c;var f=s[c],h=s[c-1];if(f.from+1==f.to&&h&&f.level<h.level){var p=n[u.pos-1];p&&p.parentNode.insertBefore(p.measureRight=pi(e.display.measure),p.nextSibling)}}var d=u.textClass?u.textClass+" "+(t.textClass||""):t.textClass;return d&&(u.pre.className=d),Rr(e,"renderLine",e,t,u.pre),u}function ir(e,t,n,r,i,o){if(t){if(bo.test(t))for(var a=document.createDocumentFragment(),u=0;;){bo.lastIndex=u;var l=bo.exec(t),s=l?l.index-u:t.length-u;if(s&&(a.appendChild(document.createTextNode(t.slice(u,u+s))),e.col+=s),!l)break;if(u+=s+1,"	"==l[0]){var c=e.cm.options.tabSize,f=c-e.col%c;a.appendChild(ai("span",Yr(f),"cm-tab")),e.col+=f}else{var h=ai("span","•","cm-invalidchar");h.title="\\u"+l[0].charCodeAt(0).toString(16),a.appendChild(h),e.col+=1}}else{e.col+=t.length;var a=document.createTextNode(t)}if(n||r||i||e.measure){var p=n||"";r&&(p+=r),i&&(p+=i);var h=ai("span",[a],p);return o&&(h.title=o),e.pre.appendChild(h)}e.pre.appendChild(a)}}function or(e,t,n,r,i){for(var o=e.cm.options.lineWrapping,a=0;a<t.length;++a){var u=t.charAt(a),l=0==a;u>=""&&"">u&&a<t.length-1?(u=t.slice(a,a+2),++a):a&&o&&fi(t,a)&&e.pre.appendChild(ai("wbr"));var s=e.measure[e.pos],c=e.measure[e.pos]=ir(e,u,n,l&&r,a==t.length-1&&i);s&&(c.leftSide=s.leftSide||s),Ai&&o&&" "==u&&a&&!/\s/.test(t.charAt(a-1))&&a<t.length-1&&!/\s/.test(t.charAt(a+1))&&(c.style.whiteSpace="normal"),e.pos+=u.length}t.length&&(e.measuredSomething=!0)}function ar(e){function t(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":" ";return t+=" "}return function(n,r,i,o,a,u){return e(n,r.replace(/ {3,}/g,t),i,o,a,u)}}function ur(e,t,n,r){var i=!r&&n.replacedWith;if(i&&(e.copyWidgets&&(i=i.cloneNode(!0)),e.pre.appendChild(i),e.measure)){if(t)e.measure[e.pos]=i;else{var o=pi(e.cm.display.measure);if("bookmark"!=n.type||n.insertLeft){if(e.measure[e.pos])return;e.measure[e.pos]=e.pre.insertBefore(o,i)}else e.measure[e.pos]=e.pre.appendChild(o)}e.measuredSomething=!0}e.pos+=t}function lr(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,u,l,s,c,f,h=i.length,p=0,d=1,m="",g=0;;){if(g==p){u=l=s=c="",f=null,g=1/0;for(var v=[],y=0;y<r.length;++y){var b=r[y],S=b.marker;b.from<=p&&(null==b.to||b.to>p)?(null!=b.to&&g>b.to&&(g=b.to,l=""),S.className&&(u+=" "+S.className),S.startStyle&&b.from==p&&(s+=" "+S.startStyle),S.endStyle&&b.to==g&&(l+=" "+S.endStyle),S.title&&!c&&(c=S.title),S.collapsed&&(!f||f.marker.size<S.size)&&(f=b)):b.from>p&&g>b.from&&(g=b.from),"bookmark"==S.type&&b.from==p&&S.replacedWith&&v.push(S)}if(f&&(f.from||0)==p&&(ur(t,(null==f.to?h:f.to)-p,f.marker,null==f.from),null==f.to))return f.marker.find();if(!f&&v.length)for(var y=0;y<v.length;++y)ur(t,0,v[y])}if(p>=h)break;for(var w=Math.min(h,g);;){if(m){var x=p+m.length;if(!f){var C=x>w?m.slice(0,w-p):m;t.addToken(t,C,a?a+u:u,s,p+C.length==g?l:"",c)}if(x>=w){m=m.slice(w-p),p=w;break}p=x,s=""}m=i.slice(o,o=n[d++]),a=nr(n[d++],t)}}else for(var d=1;d<n.length;d+=2)t.addToken(t,i.slice(o,o=n[d]),nr(n[d+1],t))}function sr(e,t,n,r,i){function o(e){return n?n[e]:null}function a(e,n,r){Yn(e,n,r,i),Br(e,"change",e,t)}var u=t.from,l=t.to,s=t.text,c=dr(e,u.line),f=dr(e,l.line),h=Zr(s),p=o(s.length-1),d=l.line-u.line;if(0==u.ch&&0==l.ch&&""==h){for(var m=0,g=s.length-1,v=[];g>m;++m)v.push(new vo(s[m],o(m),i));a(f,f.text,p),d&&e.remove(u.line,d),v.length&&e.insert(u.line,v)}else if(c==f)if(1==s.length)a(c,c.text.slice(0,u.ch)+h+c.text.slice(l.ch),p);else{for(var v=[],m=1,g=s.length-1;g>m;++m)v.push(new vo(s[m],o(m),i));v.push(new vo(h+c.text.slice(l.ch),p,i)),a(c,c.text.slice(0,u.ch)+s[0],o(0)),e.insert(u.line+1,v)}else if(1==s.length)a(c,c.text.slice(0,u.ch)+s[0]+f.text.slice(l.ch),o(0)),e.remove(u.line+1,d);else{a(c,c.text.slice(0,u.ch)+s[0],o(0)),a(f,h+f.text.slice(l.ch),p);for(var m=1,g=s.length-1,v=[];g>m;++m)v.push(new vo(s[m],o(m),i));d>1&&e.remove(u.line+1,d-1),e.insert(u.line+1,v)}Br(e,"change",e,t),rn(e,r.anchor,r.head,null,!0)}function cr(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;n>t;++t)e[t].parent=this,r+=e[t].height;this.height=r}function fr(e){this.children=e;for(var t=0,n=0,r=0,i=e.length;i>r;++r){var o=e[r];t+=o.chunkSize(),n+=o.height,o.parent=this}this.size=t,this.height=n,this.parent=null}function hr(e,t,n){function r(e,i,o){if(e.linked)for(var a=0;a<e.linked.length;++a){var u=e.linked[a];
if(u.doc!=i){var l=o&&u.sharedHist;(!n||l)&&(t(u.doc,l),r(u.doc,e,l))}}}r(e,null,!0)}function pr(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,o(e),n(e),e.options.lineWrapping||f(e),e.options.mode=t.modeOption,st(e)}function dr(e,t){for(t-=e.first;!e.lines;)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(i>t){e=r;break}t-=i}return e.lines[t]}function mr(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i}),r}function gr(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function vr(e,t){for(var n=t-e.height,r=e;r;r=r.parent)r.height+=n}function yr(e){if(null==e.parent)return null;for(var t=e.parent,n=Qr(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function br(e,t){var n=e.first;e:do{for(var r=0,i=e.children.length;i>r;++r){var o=e.children[r],a=o.height;if(a>t){e=o;continue e}t-=a,n+=o.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;i>r;++r){var u=e.lines[r],l=u.height;if(l>t)break;t-=l}return n+r}function Sr(e,t){t=Rn(e.doc,t);for(var n=0,r=t.parent,i=0;i<r.lines.length;++i){var o=r.lines[i];if(o==t)break;n+=o.height}for(var a=r.parent;a;r=a,a=r.parent)for(var i=0;i<a.children.length;++i){var u=a.children[i];if(u==r)break;n+=u.height}return n}function wr(e){var t=e.order;return null==t&&(t=e.order=zo(e.text)),t}function xr(e){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:e||1,maxGeneration:e||1}}function Cr(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function kr(e,t){var n={line:t.from.line,ch:t.from.ch},r={from:n,to:io(t),text:mr(e,t.from,t.to)};return Cr(e,r,t.from.line,t.to.line+1),hr(e,function(e){Cr(e,r,t.from.line,t.to.line+1)},!0),r}function Lr(e,t,n,r){var i=e.history;i.undone.length=0;var o=+new Date,a=Zr(i.done);if(a&&(i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastTime>o-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))){var u=Zr(a.changes);Kt(t.from,t.to)&&Kt(t.from,u.to)?u.to=io(t):a.changes.push(kr(e,t)),a.anchorAfter=n.anchor,a.headAfter=n.head}else for(a={changes:[kr(e,t)],generation:i.generation,anchorBefore:e.sel.anchor,headBefore:e.sel.head,anchorAfter:n.anchor,headAfter:n.head},i.done.push(a),i.generation=++i.maxGeneration;i.done.length>i.undoDepth;)i.done.shift();i.lastTime=o,i.lastOp=r,i.lastOrigin=t.origin}function qr(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Ar(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(qr(n[r]));return i}function Tr(e,t){for(var n=0,r=[];n<e.length;++n){var i=e[n],o=i.changes,a=[];r.push({changes:a,anchorBefore:i.anchorBefore,headBefore:i.headBefore,anchorAfter:i.anchorAfter,headAfter:i.headAfter});for(var u=0;u<o.length;++u){var l,s=o[u];if(a.push({from:s.from,to:s.to,text:s.text}),t)for(var c in s)(l=c.match(/^spans_(\d+)$/))&&Qr(t,Number(l[1]))>-1&&(Zr(a)[c]=s[c],delete s[c])}}return r}function Mr(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function Or(e,t,n,r){for(var i=0;i<e.length;++i){for(var o=e[i],a=!0,u=0;u<o.changes.length;++u){var l=o.changes[u];if(o.copied||(l.from=Yt(l.from),l.to=Yt(l.to)),n<l.from.line)l.from.line+=r,l.to.line+=r;else if(t<=l.to.line){a=!1;break}}o.copied||(o.anchorBefore=Yt(o.anchorBefore),o.headBefore=Yt(o.headBefore),o.anchorAfter=Yt(o.anchorAfter),o.readAfter=Yt(o.headAfter),o.copied=!0),a?(Mr(o.anchorBefore),Mr(o.headBefore),Mr(o.anchorAfter),Mr(o.headAfter)):(e.splice(0,i+1),i=0)}}function Ir(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;Or(e.done,n,r,i),Or(e.undone,n,r,i)}function Er(){Hr(this)}function Nr(e){return e.stop||(e.stop=Er),e}function _r(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function jr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Wr(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Hr(e){_r(e),jr(e)}function Dr(e){return e.target||e.srcElement}function zr(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),$i&&e.ctrlKey&&1==t&&(t=3),t}function Fr(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}}function $r(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}}function Rr(e,t){var n=e._handlers&&e._handlers[t];if(n)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function Br(e,t){function n(e){return function(){e.apply(null,i)}}var r=e._handlers&&e._handlers[t];if(r){var i=Array.prototype.slice.call(arguments,2);ko||(++Lo,ko=[],setTimeout(Vr,0));for(var o=0;o<r.length;++o)ko.push(n(r[o]))}}function Pr(e,t,n){return Rr(e,n||t.type,e,t),Wr(t)||t.codemirrorIgnore}function Vr(){--Lo;var e=ko;ko=null;for(var t=0;t<e.length;++t)e[t]()}function Gr(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function Ur(e){e.prototype.on=function(e,t){Fr(this,e,t)},e.prototype.off=function(e,t){$r(this,e,t)}}function Kr(){this.id=null}function Xr(e,t,n,r,i){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var o=r||0,a=i||0;t>o;++o)"	"==e.charAt(o)?a+=n-a%n:++a;return a}function Yr(e){for(;To.length<=e;)To.push(Zr(To)+" ");return To[e]}function Zr(e){return e[e.length-1]}function Jr(e){if(zi)e.selectionStart=0,e.selectionEnd=e.value.length;else try{e.select()}catch(t){}}function Qr(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;r>n;++n)if(e[n]==t)return n;return-1}function ei(e,t){function n(){}n.prototype=e;var r=new n;return t&&ti(t,r),r}function ti(e,t){t||(t={});for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function ni(e){for(var t=[],n=0;e>n;++n)t.push(void 0);return t}function ri(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function ii(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Mo.test(e))}function oi(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function ai(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)si(i,t);else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function ui(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function li(e,t){return ui(e).appendChild(t)}function si(e,t){Mi?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function ci(e){return e.getBoundingClientRect()}function fi(){return!1}function hi(e){if(null!=Eo)return Eo;var t=ai("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return li(e,t),t.offsetWidth&&(Eo=t.offsetHeight-t.clientHeight),Eo||0}function pi(e){if(null==No){var t=ai("span","​");li(e,ai("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(No=t.offsetWidth<=1&&t.offsetHeight>2&&!Ti)}return No?ai("span","​"):ai("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function di(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr"),i=!0)}i||r(t,n,"ltr")}function mi(e){return e.level%2?e.to:e.from}function gi(e){return e.level%2?e.from:e.to}function vi(e){var t=wr(e);return t?mi(t[0]):0}function yi(e){var t=wr(e);return t?gi(Zr(t)):e.text.length}function bi(e,t){var n=dr(e.doc,t),r=Rn(e.doc,n);r!=n&&(t=yr(r));var i=wr(r),o=i?i[0].level%2?yi(r):vi(r):0;return Ut(t,o)}function Si(e,t){for(var n,r;n=$n(r=dr(e.doc,t));)t=n.find().to.line;var i=wr(r),o=i?i[0].level%2?vi(r):yi(r):r.text.length;return Ut(t,o)}function wi(e,t,n){var r=e[0].level;return t==r?!0:n==r?!1:n>t}function xi(e,t){for(var n,r=0;r<e.length;++r){var i=e[r];if(i.from<t&&i.to>t)return Do=null,r;if(i.from==t||i.to==t){if(null!=n)return wi(e,i.level,e[n].level)?(Do=n,r):(Do=r,n);n=r}}return Do=null,n}function Ci(e,t,n,r){if(!r)return t+n;do t+=n;while(t>0&&Oo.test(e.text.charAt(t)));return t}function ki(e,t,n,r){var i=wr(e);if(!i)return Li(e,t,n,r);for(var o=xi(i,t),a=i[o],u=Ci(e,t,a.level%2?-n:n,r);;){if(u>a.from&&u<a.to)return u;if(u==a.from||u==a.to)return xi(i,u)==o?u:(a=i[o+=n],n>0==a.level%2?a.to:a.from);if(a=i[o+=n],!a)return null;u=n>0==a.level%2?Ci(e,a.to,-1,r):Ci(e,a.from,1,r)}}function Li(e,t,n,r){var i=t+n;if(r)for(;i>0&&Oo.test(e.text.charAt(i));)i+=n;return 0>i||i>e.text.length?null:i}var qi=/gecko\/\d/i.test(navigator.userAgent),Ai=/MSIE \d/.test(navigator.userAgent),Ti=Ai&&(null==document.documentMode||document.documentMode<8),Mi=Ai&&(null==document.documentMode||document.documentMode<9),Oi=/WebKit\//.test(navigator.userAgent),Ii=Oi&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Ei=/Chrome\//.test(navigator.userAgent),Ni=/Opera\//.test(navigator.userAgent),_i=/Apple Computer/.test(navigator.vendor),ji=/KHTML\//.test(navigator.userAgent),Wi=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Hi=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Di=/PhantomJS/.test(navigator.userAgent),zi=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Fi=zi||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),$i=zi||/Mac/.test(navigator.platform),Ri=/win/i.test(navigator.platform),Bi=Ni&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Bi&&(Bi=Number(Bi[1])),Bi&&Bi>=15&&(Ni=!1,Oi=!0);var Pi,Vi,Gi,Ui=$i&&(Ii||Ni&&(null==Bi||12.11>Bi)),Ki=qi||Ai&&!Mi,Xi=!1,Yi=!1,Zi=0,Ji=0,Qi=0,eo=null;Ai?eo=-.53:qi?eo=15:Ei?eo=-.7:_i&&(eo=-1/3);var to,no,ro=null,io=e.changeEnd=function(e){return e.text?Ut(e.from.line+e.text.length-1,Zr(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.Pos=Ut,e.prototype={constructor:e,focus:function(){window.focus(),dt(this),_t(this),ft(this)},setOption:function(e,t){var n=this.options,r=n[e];(n[e]!=t||"mode"==e)&&(n[e]=t,oo.hasOwnProperty(e)&&at(this,oo[e])(this,t,r))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||"string"!=typeof t[n]&&t[n].name==e)return t.splice(n,1),!0},addOverlay:at(null,function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,st(this)}),removeOverlay:at(null,function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,st(this),void 0}}),indentLine:at(null,function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),en(this.doc,e)&&pn(this,e,t,n)}),indentSelection:at(null,function(e){var t=this.doc.sel;if(Kt(t.from,t.to))return pn(this,t.from.line,e);for(var n=t.to.line-(t.to.ch?0:1),r=t.from.line;n>=r;++r)pn(this,r,e)}),getTokenAt:function(e,t){var n=this.doc;e=Jt(n,e);for(var r=j(this,e.line,t),i=this.doc.mode,o=dr(n,e.line),a=new qn(o.text,this.options.tabSize);a.pos<e.ch&&!a.eol();){a.start=a.pos;var u=i.token(a,r)}return{start:a.start,end:a.pos,string:a.current(),className:u||null,type:u||null,state:r}},getTokenTypeAt:function(e){e=Jt(this.doc,e);var t=er(this,dr(this.doc,e.line)),n=0,r=(t.length-1)/2,i=e.ch;if(0==i)return t[2];for(;;){var o=n+r>>1;if((o?t[2*o-1]:0)>=i)r=o;else{if(!(t[2*o+1]<i))return t[2*o+2];n=o+1}}},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){if(ho.hasOwnProperty(t)){var n=ho[t],r=this.getModeAt(e);return r[t]&&n[r[t]]||r.helperType&&n[r.helperType]||n[r.name]}},getStateAfter:function(e,t){var n=this.doc;return e=Zt(n,null==e?n.first+n.size-1:e),j(this,e+1,t)},cursorCoords:function(e,t){var n,r=this.doc.sel;return n=null==e?r.head:"object"==typeof e?Jt(this.doc,e):e?r.from:r.to,J(this,n,t||"page")},charCoords:function(e,t){return Z(this,Jt(this.doc,e),t||"page")},coordsChar:function(e,t){return e=Y(this,e,t||"page"),et(this,e.left,e.top)},lineAtHeight:function(e,t){return e=Y(this,{top:e,left:0},t||"page").top,br(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n=!1,r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,n=!0);var i=dr(this.doc,e);return X(this,dr(this.doc,e),{top:0,left:0},t||"page").top+(n?i.height:0)},defaultTextHeight:function(){return nt(this.display)},defaultCharWidth:function(){return rt(this.display)},setGutterMarker:at(null,function(e,t,n){return dn(this,e,function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&oi(r)&&(e.gutterMarkers=null),!0})}),clearGutter:at(null,function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,st(t,r,r+1),oi(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),addLineClass:at(null,function(e,t,n){return dn(this,e,function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[r]){if(new RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:at(null,function(e,t,n){return dn(this,e,function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!o)return!1;var a=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:at(null,function(e,t,n){return Xn(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!en(this.doc,e))return null;var t=e;if(e=dr(this.doc,e),!e)return null}else{var t=yr(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,n,r,i){var o=this.display;e=J(this,Jt(this.doc,e));var a=e.bottom,u=e.left;if(t.style.position="absolute",o.sizer.appendChild(t),"over"==r)a=e.top;else if("above"==r||"near"==r){var l=Math.max(o.wrapper.clientHeight,this.doc.height),s=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(a=e.bottom),u+t.offsetWidth>s&&(u=s-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(u=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&sn(this,u,a,u+t.offsetWidth,a+t.offsetHeight)},triggerOnKeyDown:at(null,Et),execCommand:function(e){return po[e](this)},findPosH:function(e,t,n,r){var i=1;0>t&&(i=-1,t=-t);for(var o=0,a=Jt(this.doc,e);t>o&&(a=mn(this.doc,a,i,n,r),!a.hitSide);++o);return a},moveH:at(null,function(e,t){var n,r=this.doc.sel;n=r.shift||r.extend||Kt(r.from,r.to)?mn(this.doc,r.head,e,t,this.options.rtlMoveVisually):0>e?r.from:r.to,tn(this.doc,n,n,e)}),deleteH:at(null,function(e,t){var n=this.doc.sel;Kt(n.from,n.to)?Gt(this.doc,"",n.from,mn(this.doc,n.head,e,t,!1),"+delete"):Gt(this.doc,"",n.from,n.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(e,t,n,r){var i=1,o=r;0>t&&(i=-1,t=-t);for(var a=0,u=Jt(this.doc,e);t>a;++a){var l=J(this,u,"div");if(null==o?o=l.left:l.left=o,u=gn(this,l,i,n),u.hitSide)break}return u},moveV:at(null,function(e,t){var n=this.doc.sel,r=J(this,n.head,"div");null!=n.goalColumn&&(r.left=n.goalColumn);var i=gn(this,r,e,t);"page"==t&&hn(this,0,Z(this,i,"div").top-r.top),tn(this.doc,i,i,e),n.goalColumn=r.left}),toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:at(null,function(e,t){fn(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller,t=qo;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:at(null,function(e,t){null==e?e={from:this.doc.sel.head,to:null}:"number"==typeof e?e={from:Ut(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),t||(t=0);var n=e;null!=e.from.line&&(this.curOp.scrollToPos={from:e.from,to:e.to,margin:t},n={from:J(this,e.from),to:J(this,e.to)});var r=cn(this,Math.min(n.from.left,n.to.left),Math.min(n.from.top,n.to.top)-t,Math.max(n.from.right,n.to.right),Math.max(n.from.bottom,n.to.bottom)+t);fn(this,r.scrollLeft,r.scrollTop)}),setSize:at(null,function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0),this.curOp.forceUpdate=!0}),operation:function(e){return lt(this,e)},refresh:at(null,function(){var e=null==this.display.cachedTextHeight;G(this),fn(this,this.doc.scrollLeft,this.doc.scrollTop),st(this),e&&o(this)}),swapDoc:at(null,function(e){var t=this.doc;return t.cm=null,pr(this,e),G(this),pt(this,!0),fn(this,e.scrollLeft,e.scrollTop),Br(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ur(e);var oo=e.optionHandlers={},ao=e.defaults={},uo=e.Init={toString:function(){return"CodeMirror.Init"}};bn("value","",function(e,t){e.setValue(t)},!0),bn("mode",null,function(e,t){e.doc.modeOption=t,n(e)},!0),bn("indentUnit",2,n,!0),bn("indentWithTabs",!1),bn("smartIndent",!0),bn("tabSize",4,function(e){n(e),G(e),st(e)},!0),bn("electricChars",!0),bn("rtlMoveVisually",!Ri),bn("theme","default",function(e){u(e),l(e)},!0),bn("keyMap","default",a),bn("extraKeys",null),bn("onKeyEvent",null),bn("onDragEvent",null),bn("lineWrapping",!1,r,!0),bn("gutters",[],function(e){h(e.options),l(e)},!0),bn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?y(e.display)+"px":"0",e.refresh()},!0),bn("coverGutterNextToScrollbar",!1,p,!0),bn("lineNumbers",!1,function(e){h(e.options),l(e)},!0),bn("firstLineNumber",1,l,!0),bn("lineNumberFormatter",function(e){return e},l,!0),bn("showCursorWhenSelecting",!1,T,!0),bn("resetSelectionOnContextMenu",!0),bn("readOnly",!1,function(e,t){"nocursor"==t?(jt(e),e.display.input.blur()):t||pt(e,!0)}),bn("dragDrop",!0),bn("cursorBlinkRate",530),bn("cursorScrollMargin",0),bn("cursorHeight",1),bn("workTime",100),bn("workDelay",100),bn("flattenSpans",!0),bn("pollInterval",100),bn("undoDepth",40,function(e,t){e.doc.history.undoDepth=t}),bn("historyEventDelay",500),bn("viewportMargin",10,function(e){e.refresh()},!0),bn("maxHighlightLength",1e4,function(e){n(e),e.refresh()},!0),bn("crudeMeasuringFrom",1e4),bn("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),bn("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),bn("autofocus",null);var lo=e.modes={},so=e.mimeModes={};e.defineMode=function(t,n){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){n.dependencies=[];for(var r=2;r<arguments.length;++r)n.dependencies.push(arguments[r])}lo[t]=n},e.defineMIME=function(e,t){so[e]=t},e.resolveMode=function(t){if("string"==typeof t&&so.hasOwnProperty(t))t=so[t];else if(t&&"string"==typeof t.name&&so.hasOwnProperty(t.name)){var n=so[t.name];t=ei(n,t),t.name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),r=lo[n.name];if(!r)return e.getMode(t,"text/plain");var i=r(t,n);if(co.hasOwnProperty(n.name)){var o=co[n.name];for(var a in o)o.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=o[a])}return i.name=n.name,i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var co=e.modeExtensions={};e.extendMode=function(e,t){var n=co.hasOwnProperty(e)?co[e]:co[e]={};ti(t,n)},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){wo.prototype[e]=t},e.defineOption=bn;var fo=[];e.defineInitHook=function(e){fo.push(e)};var ho=e.helpers={};e.registerHelper=function(t,n,r){ho.hasOwnProperty(t)||(ho[t]=e[t]={}),ho[t][n]=r},e.isWordChar=ii,e.copyState=Sn,e.startState=wn,e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var po=e.commands={selectAll:function(e){e.setSelection(Ut(e.firstLine(),0),Ut(e.lastLine()))},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!Kt(t,n);r||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,r?n:Ut(t.line),"+delete"):e.replaceRange("",t,Ut(t.line+1,0),"+delete")},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",Ut(t,0),Ut(t),"+delete")},delLineLeft:function(e){var t=e.getCursor();e.replaceRange("",Ut(t.line,0),t,"+delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection(Ut(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(Ut(e.lastLine()))},goLineStart:function(e){e.extendSelection(bi(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),n=bi(e,t.line),r=e.getLineHandle(n.line),i=wr(r);if(i&&0!=i[0].level)e.extendSelection(n);else{var o=Math.max(0,r.text.search(/\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;e.extendSelection(Ut(n.line,a?0:o))}},goLineEnd:function(e){e.extendSelection(Si(e,e.getCursor().line))},goLineRight:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:t},"div"))},goLineLeft:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:0,top:t},"div"))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end","+input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end","+input")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),Ut(t.line,t.ch-1),Ut(t.line,t.ch+1))},newlineAndIndent:function(e){at(e,function(){e.replaceSelection("\n","end","+input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},mo=e.keyMap={};mo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},mo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},mo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},mo["default"]=$i?mo.macDefault:mo.pcDefault,mo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.lookupKey=Cn,e.isModifierKey=kn,e.keyName=Ln,e.fromTextArea=function(t,n){function r(){t.value=s.getValue()}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var i=document.body;try{i=document.activeElement}catch(o){}n.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(Fr(t.form,"submit",r),!n.leaveSubmitMethodAlone)){var a=t.form,u=a.submit;try{var l=a.submit=function(){r(),a.submit=u,a.submit(),a.submit=l}}catch(o){}}t.style.display="none";var s=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return s.save=r,s.getTextArea=function(){return t},s.toTextArea=function(){r(),t.parentNode.removeChild(s.getWrapperElement()),t.style.display="",t.form&&($r(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=u))},s},qn.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Xr(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Xr(this.string,null,this.tabSize)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);return i(o)==i(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=qn,e.TextMarker=An,Ur(An),An.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&it(e),Gr(this,"clear")){var n=this.find();n&&Br(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],u=In(a.markedSpans,this);null!=u.to&&(i=yr(a)),a.markedSpans=En(a.markedSpans,u),null!=u.from?r=yr(a):this.collapsed&&!Bn(this.doc,a)&&e&&vr(a,nt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=Rn(e.doc,this.lines[o]),s=c(e.doc,l);s>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=s,e.display.maxLineChanged=!0)}null!=r&&e&&st(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&on(e)),t&&ot(e)}},An.prototype.find=function(){for(var e,t,n=0;n<this.lines.length;++n){var r=this.lines[n],i=In(r.markedSpans,this);if(null!=i.from||null!=i.to){var o=yr(r);null!=i.from&&(e=Ut(o,i.from)),null!=i.to&&(t=Ut(o,i.to))}}return"bookmark"==this.type?e:e&&{from:e,to:t}},An.prototype.changed=function(){var e=this.find(),t=this.doc.cm;if(e&&t){"bookmark"!=this.type&&(e=e.from);var n=dr(this.doc,e.line);if($(t,n),e.line>=t.display.showingFrom&&e.line<t.display.showingTo){for(var r=t.display.lineDiv.firstChild;r;r=r.nextSibling)if(r.lineObj==n){r.offsetHeight!=n.height&&vr(n,r.offsetHeight);break}lt(t,function(){t.curOp.selectionChanged=t.curOp.forceUpdate=t.curOp.updateMaxLine=!0})}}},An.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Qr(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},An.prototype.detachLine=function(e){if(this.lines.splice(Qr(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},e.SharedTextMarker=Mn,Ur(Mn),Mn.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Br(this,"clear")}},Mn.prototype.find=function(){return this.primary.find()};var go=e.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this.node=t};Ur(go),go.prototype.clear=Un(function(){var e=this.line.widgets,t=yr(this.line);if(null!=t&&e){for(var n=0;n<e.length;++n)e[n]==this&&e.splice(n--,1);e.length||(this.line.widgets=null);var r=Sr(this.cm,this.line)<this.cm.doc.scrollTop;vr(this.line,Math.max(0,this.line.height-Kn(this))),r&&hn(this.cm,0,-this.height),st(this.cm,t,t+1)}}),go.prototype.changed=Un(function(){var e=this.height;this.height=null;var t=Kn(this)-e;if(t){vr(this.line,this.line.height+t);var n=yr(this.line);st(this.cm,n,n+1)}});var vo=e.Line=function(e,t,n){this.text=e,Gn(this,t),this.height=n?n(this):1};Ur(vo);var yo={},bo=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;cr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;r>n;++n){var i=this.lines[n];this.height-=i.height,Zn(i),Br(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0,i=t.length;i>r;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;r>e;++e)if(n(this.lines[e]))return!0}},fr.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(i>e){var o=Math.min(t,i-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25){var u=[];this.collapse(u),this.children=[new cr(u)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;n>t;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;i>r;++r){var o=this.children[r],a=o.chunkSize();if(a>=e){if(o.insertInner(e,t,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var u=o.lines.splice(o.lines.length-25,25),l=new cr(u);
o.height-=l.height,this.children.splice(r+1,0,l),l.parent=this}this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new fr(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=Qr(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new fr(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0,i=this.children.length;i>r;++r){var o=this.children[r],a=o.chunkSize();if(a>e){var u=Math.min(t,a-e);if(o.iterN(e,u,n))return!0;if(0==(t-=u))break;e=0}else e-=a}}};var So=0,wo=e.Doc=function(e,t,n){if(!(this instanceof wo))return new wo(e,t,n);null==n&&(n=0),fr.call(this,[new cr([new vo("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=xr(),this.cleanGeneration=1,this.frontier=n;var r=Ut(n,0);this.sel={from:r,to:r,head:r,anchor:r,shift:!1,extend:!1,goalColumn:null},this.id=++So,this.modeOption=t,"string"==typeof e&&(e=_o(e)),sr(this,{from:r,to:r,text:e},null,{head:r,anchor:r})};wo.prototype=ei(fr.prototype,{constructor:wo,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0,i=t.length;i>r;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=gr(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:function(e){var t=Ut(this.first,0),n=this.first+this.size-1;Ft(this,{from:t,to:Ut(n,dr(this,n).text.length),text:_o(e),origin:"setValue"},{head:t,anchor:t},!0)},replaceRange:function(e,t,n,r){t=Jt(this,t),n=n?Jt(this,n):t,Gt(this,e,t,n,r)},getRange:function(e,t,n){var r=mr(this,Jt(this,e),Jt(this,t));return n===!1?r:r.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},setLine:function(e,t){en(this,e)&&Gt(this,t,Ut(e,0),Jt(this,Ut(e)))},removeLine:function(e){e?Gt(this,"",Jt(this,Ut(e-1)),Jt(this,Ut(e))):Gt(this,"",Ut(0,0),Jt(this,Ut(1,0)))},getLineHandle:function(e){return en(this,e)?dr(this,e):void 0},getLineNumber:function(e){return yr(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=dr(this,e)),Rn(this,e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Jt(this,e)},getCursor:function(e){var t,n=this.sel;return t=null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||e===!1?n.to:n.from,Yt(t)},somethingSelected:function(){return!Kt(this.sel.head,this.sel.anchor)},setCursor:ut(function(e,t,n){var r=Jt(this,"number"==typeof e?Ut(e,t||0):e);n?tn(this,r):rn(this,r,r)}),setSelection:ut(function(e,t,n){rn(this,Jt(this,e),Jt(this,t||e),n)}),extendSelection:ut(function(e,t,n){tn(this,Jt(this,e),t&&Jt(this,t),n)}),getSelection:function(e){return this.getRange(this.sel.from,this.sel.to,e)},replaceSelection:function(e,t,n){Ft(this,{from:this.sel.from,to:this.sel.to,text:_o(e),origin:n},t||"around")},undo:ut(function(){Rt(this,"undo")}),redo:ut(function(){Rt(this,"redo")}),setExtending:function(e){this.sel.extend=e},historySize:function(){var e=this.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.history=xr(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Tr(this.history.done),undone:Tr(this.history.undone)}},setHistory:function(e){var t=this.history=xr(this.history.maxGeneration);t.done=e.done.slice(0),t.undone=e.undone.slice(0)},markText:function(e,t,n){return Tn(this,Jt(this,e),Jt(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft};return e=Jt(this,e),Tn(this,e,e,n,"bookmark")},findMarksAt:function(e){e=Jt(this,e);var t=[],n=dr(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(r){var i=r.text.length+1;return i>e?(t=e,!0):(e-=i,++n,void 0)}),Jt(this,Ut(n,t))},indexFromPos:function(e){e=Jt(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new wo(gr(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new wo(gr(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],r},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var r=this.linked[n];if(r.doc==t){this.linked.splice(n,1),t.unlinkDoc(this);break}}if(t.history==this.history){var i=[t.id];hr(t,function(e){i.push(e.id)},!0),t.history=xr(),t.history.done=Tr(this.history.done,i),t.history.undone=Tr(this.history.undone,i)}},iterLinkedDocs:function(e){hr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),wo.prototype.eachLine=wo.prototype.iter;var xo="iter insert remove copy getEditor".split(" ");for(var Co in wo.prototype)wo.prototype.hasOwnProperty(Co)&&Qr(xo,Co)<0&&(e.prototype[Co]=function(e){return function(){return e.apply(this.doc,arguments)}}(wo.prototype[Co]));Ur(wo),e.e_stop=Hr,e.e_preventDefault=_r,e.e_stopPropagation=jr;var ko,Lo=0;e.on=Fr,e.off=$r,e.signal=Rr;var qo=30,Ao=e.Pass={toString:function(){return"CodeMirror.Pass"}};Kr.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},e.countColumn=Xr;var To=[""],Mo=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Oo=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;e.replaceGetRect=function(e){ci=e};var Io=function(){if(Mi)return!1;var e=ai("div");return"draggable"in e||"dragDrop"in e}();qi?fi=function(e,t){return 36==e.charCodeAt(t-1)&&39==e.charCodeAt(t)}:_i&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?fi=function(e,t){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(e.slice(t-1,t+1))}:Oi&&/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)?fi=function(e,t){var n=e.charCodeAt(t-1);return n>=8208&&8212>=n}:Oi&&(fi=function(e,t){if(t>1&&45==e.charCodeAt(t-1)){if(/\w/.test(e.charAt(t-2))&&/[^\-?\.]/.test(e.charAt(t)))return!0;if(t>2&&/[\d\.,]/.test(e.charAt(t-2))&&/[\d\.,]/.test(e.charAt(t)))return!1}return/[~!#%&*)=+}\]\\|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|…[\w~`@#$%\^&*(_=+{[><]/.test(e.slice(t-1,t+1))});var Eo,No,_o=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;r>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)};e.splitLines=_o;var jo=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},Wo=function(){var e=ai("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Ho={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};e.keyNames=Ho,function(){for(var e=0;10>e;e++)Ho[e+48]=String(e);for(var e=65;90>=e;e++)Ho[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)Ho[e+111]=Ho[e+63235]="F"+e}();var Do,zo=function(){function e(e){return 255>=e?t.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1791>=e?n.charAt(e-1536):e>=1792&&2220>=e?"r":"L"}var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,o=/[LRr]/,a=/[Lb1n]/,u=/[1n]/,l="L";return function(t){if(!r.test(t))return!1;for(var n,s=t.length,c=[],f=0;s>f;++f)c.push(n=e(t.charCodeAt(f)));for(var f=0,h=l;s>f;++f){var n=c[f];"m"==n?c[f]=h:h=n}for(var f=0,p=l;s>f;++f){var n=c[f];"1"==n&&"r"==p?c[f]="n":o.test(n)&&(p=n,"r"==n&&(c[f]="R"))}for(var f=1,h=c[0];s-1>f;++f){var n=c[f];"+"==n&&"1"==h&&"1"==c[f+1]?c[f]="1":","!=n||h!=c[f+1]||"1"!=h&&"n"!=h||(c[f]=h),h=n}for(var f=0;s>f;++f){var n=c[f];if(","==n)c[f]="N";else if("%"==n){for(var d=f+1;s>d&&"%"==c[d];++d);for(var m=f&&"!"==c[f-1]||s-1>d&&"1"==c[d]?"1":"N",g=f;d>g;++g)c[g]=m;f=d-1}}for(var f=0,p=l;s>f;++f){var n=c[f];"L"==p&&"1"==n?c[f]="L":o.test(n)&&(p=n)}for(var f=0;s>f;++f)if(i.test(c[f])){for(var d=f+1;s>d&&i.test(c[d]);++d);for(var v="L"==(f?c[f-1]:l),y="L"==(s-1>d?c[d]:l),m=v||y?"L":"R",g=f;d>g;++g)c[g]=m;f=d-1}for(var b,S=[],f=0;s>f;)if(a.test(c[f])){var w=f;for(++f;s>f&&a.test(c[f]);++f);S.push({from:w,to:f,level:0})}else{var x=f,C=S.length;for(++f;s>f&&"L"!=c[f];++f);for(var g=x;f>g;)if(u.test(c[g])){g>x&&S.splice(C,0,{from:x,to:g,level:1});var k=g;for(++g;f>g&&u.test(c[g]);++g);S.splice(C,0,{from:k,to:g,level:2}),x=g}else++g;f>x&&S.splice(C,0,{from:x,to:f,level:1})}return 1==S[0].level&&(b=t.match(/^\s+/))&&(S[0].from=b[0].length,S.unshift({from:0,to:b[0].length,level:0})),1==Zr(S).level&&(b=t.match(/\s+$/))&&(Zr(S).to-=b[0].length,S.push({from:s-b[0].length,to:s,level:0})),S[0].level!=Zr(S).level&&S.push({from:s,to:s,level:S[0].level}),S}}();return e.version="3.19.0",e}(),CodeMirror.defineMode("javascript",function(e,t){function n(e,t,n){return t.tokenize=n,n(e,t)}function r(e,t){for(var n,r=!1;null!=(n=e.next());){if(n==t&&!r)return!1;r=!r&&"\\"==n}return r}function i(e,t,n){return P=e,V=n,t}function o(e,t){var o=e.next();if('"'==o||"'"==o)return n(e,t,a(o));if("."==o&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return i("number","number");if(/[\[\]{}\(\),;\:\.]/.test(o))return i(o);if("0"==o&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),i("number","number");if(/\d/.test(o))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),i("number","number");if("/"==o)return e.eat("*")?n(e,t,u):e.eat("/")?(e.skipToEnd(),i("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(r(e,"/"),e.eatWhile(/[gimy]/),i("regexp","string-2")):(e.eatWhile(Z),i("operator",null,e.current()));if("#"==o)return e.skipToEnd(),i("error","error");if(Z.test(o))return e.eatWhile(Z),i("operator",null,e.current());e.eatWhile(/[\w\$_]/);var l=e.current(),s=Y.propertyIsEnumerable(l)&&Y[l];return s&&"."!=t.lastType?i(s.type,s.style,l):i("variable","variable",l)}function a(e){return function(t,n){return r(t,e)||(n.tokenize=o),i("string","string")}}function u(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=o;break}r="*"==n}return i("comment","comment")}function l(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function s(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function c(e,t,n,r,i){var o=e.cc;for(Q.state=e,Q.stream=i,Q.marked=null,Q.cc=o,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var a=o.length?o.pop():K?S:b;if(a(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return Q.marked?Q.marked:"variable"==n&&s(e,r)?"variable-2":t}}}function f(){for(var e=arguments.length-1;e>=0;e--)Q.cc.push(arguments[e])}function h(){return f.apply(null,arguments),!0}function p(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var n=Q.state;if(n.context){if(Q.marked="def",t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;n.globalVars={name:e,next:n.globalVars}}}function d(){Q.state.context={prev:Q.state.context,vars:Q.state.localVars},Q.state.localVars=et}function m(){Q.state.localVars=Q.state.context.vars,Q.state.context=Q.state.context.prev}function g(e,t){var n=function(){var n=Q.state,r=n.indented;"stat"==n.lexical.type&&(r=n.lexical.indented),n.lexical=new l(r,Q.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function v(){var e=Q.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function y(e){return function(t){return t==e?h():";"==e?f():h(arguments.callee)}}function b(e){return"var"==e?h(g("vardef"),j,y(";"),v):"keyword a"==e?h(g("form"),S,b,v):"keyword b"==e?h(g("form"),b,v):"{"==e?h(g("}"),E,v):";"==e?h():"if"==e?h(g("form"),S,b,v,H):"function"==e?h(R):"for"==e?h(g("form"),y("("),g(")"),D,y(")"),v,b,v):"variable"==e?h(g("stat"),A):"switch"==e?h(g("form"),S,g("}","switch"),y("{"),E,v,v):"case"==e?h(S,y(":")):"default"==e?h(y(":")):"catch"==e?h(g("form"),d,y("("),B,y(")"),b,v,m):f(g("stat"),S,y(";"),v)}function S(e){return x(e,!1)}function w(e){return x(e,!0)}function x(e,t){var n=t?q:L;return J.hasOwnProperty(e)?h(n):"function"==e?h(R):"keyword c"==e?h(t?k:C):"("==e?h(g(")"),C,y(")"),v,n):"operator"==e?h(t?w:S):"["==e?h(g("]"),I(w,"]"),v,n):"{"==e?h(g("}"),I(M,"}"),v,n):h()}function C(e){return e.match(/[;\}\)\],]/)?f():f(S)}function k(e){return e.match(/[;\}\)\],]/)?f():f(w)}function L(e,t){return","==e?h(S):q(e,t,!1)}function q(e,t,n){var r=0==n?L:q,i=0==n?S:w;return"operator"==e?/\+\+|--/.test(t)?h(r):"?"==t?h(S,y(":"),i):h(i):";"!=e?"("==e?h(g(")","call"),I(w,")"),v,r):"."==e?h(T,r):"["==e?h(g("]"),C,y("]"),v,r):void 0:void 0}function A(e){return":"==e?h(v,b):f(L,y(";"),v)}function T(e){return"variable"==e?(Q.marked="property",h()):void 0}function M(e,t){if("variable"==e){if(Q.marked="property","get"==t||"set"==t)return h(O)}else("number"==e||"string"==e)&&(Q.marked=e+" property");return J.hasOwnProperty(e)?h(y(":"),w):void 0}function O(e){return":"==e?h(S):"variable"!=e?h(y(":"),S):(Q.marked="property",h(R))}function I(e,t){function n(r){if(","==r){var i=Q.state.lexical;return"call"==i.info&&(i.pos=(i.pos||0)+1),h(e,n)}return r==t?h():h(y(t))}return function(r){return r==t?h():f(e,n)}}function E(e){return"}"==e?h():f(b,E)}function N(e){return":"==e?h(_):f()}function _(e){return"variable"==e?(Q.marked="variable-3",h()):f()}function j(e,t){return"variable"==e?(p(t),X?h(N,W):h(W)):f()}function W(e,t){return"="==t?h(w,W):","==e?h(j):void 0}function H(e,t){return"keyword b"==e&&"else"==t?h(g("form"),b,v):void 0}function D(e){return"var"==e?h(j,y(";"),F):";"==e?h(F):"variable"==e?h(z):f(S,y(";"),F)}function z(e,t){return"in"==t?h(S):h(L,F)}function F(e,t){return";"==e?h($):"in"==t?h(S):f(S,y(";"),$)}function $(e){")"!=e&&h(S)}function R(e,t){return"variable"==e?(p(t),h(R)):"("==e?h(g(")"),d,I(B,")"),v,b,m):void 0}function B(e,t){return"variable"==e?(p(t),X?h(N):h()):void 0}var P,V,G=e.indentUnit,U=t.statementIndent,K=t.json,X=t.typescript,Y=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),o={type:"atom",style:"atom"},a={"if":e("if"),"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o,"this":e("this")};if(X){var u={type:"variable",style:"variable-3"},l={"interface":e("interface"),"class":e("class"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),"super":e("super"),string:u,number:u,bool:u,any:u};for(var s in l)a[s]=l[s]}return a}(),Z=/[+\-*&%=<>!?|~^]/,J={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0},Q={state:null,column:null,marked:null,cc:null},et={name:"this",next:{name:"arguments"}};return v.lex=!0,{startState:function(e){return{tokenize:o,lastType:null,cc:[],lexical:new l((e||0)-G,0,"block",!1),localVars:t.localVars,globalVars:t.globalVars,context:t.localVars&&{vars:t.localVars},indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),t.tokenize!=u&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==P?n:(t.lastType="operator"!=P||"++"!=V&&"--"!=V?P:"incdec",c(t,n,P,V,e))},indent:function(e,n){if(e.tokenize==u)return CodeMirror.Pass;if(e.tokenize!=o)return 0;for(var r=n&&n.charAt(0),i=e.lexical,a=e.cc.length-1;a>=0;--a){var l=e.cc[a];if(l==v)i=i.prev;else if(l!=H||/^else\b/.test(n))break}"stat"==i.type&&"}"==r&&(i=i.prev),U&&")"==i.type&&"stat"==i.prev.type&&(i=i.prev);var s=i.type,c=r==s;return"vardef"==s?i.indented+("operator"==e.lastType||","==e.lastType?4:0):"form"==s&&"{"==r?i.indented:"form"==s?i.indented+G:"stat"==s?i.indented+("operator"==e.lastType||","==e.lastType?U||G:0):"switch"!=i.info||c||0==t.doubleIndentSwitch?i.align?i.column+(c?0:1):i.indented+(c?0:G):i.indented+(/^(?:case|default)\b/.test(n)?G:2*G)},electricChars:":{}",blockCommentStart:K?null:"/*",blockCommentEnd:K?null:"*/",lineComment:K?null:"//",fold:"brace",helperType:K?"json":"javascript",jsonMode:K}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("application/x-json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,o=Function.prototype,a=r.push,u=r.slice,l=r.concat,s=i.toString,c=i.hasOwnProperty,f=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,m=r.filter,g=r.every,v=r.some,y=r.indexOf,b=r.lastIndexOf,S=Array.isArray,w=Object.keys,x=o.bind,C=function(e){return e instanceof C?e:this instanceof C?(this._wrapped=e,void 0):new C(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):e._=C,C.VERSION="1.5.2";var k=C.each=C.forEach=function(e,t,r){if(null!=e)if(f&&e.forEach===f)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,o=e.length;o>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var a=C.keys(e),i=0,o=a.length;o>i;i++)if(t.call(r,e[a[i]],a[i],e)===n)return};C.map=C.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(k(e,function(e,i,o){r.push(t.call(n,e,i,o))}),r)};var L="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=C.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(k(e,function(e,o,a){i?n=t.call(r,n,e,o,a):(n=e,i=!0)}),!i)throw new TypeError(L);return n},C.reduceRight=C.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=C.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var a=C.keys(e);o=a.length}if(k(e,function(u,l,s){l=a?a[--o]:--o,i?n=t.call(r,n,e[l],l,s):(n=e[l],i=!0)}),!i)throw new TypeError(L);return n},C.find=C.detect=function(e,t,n){var r;return q(e,function(e,i,o){return t.call(n,e,i,o)?(r=e,!0):void 0}),r},C.filter=C.select=function(e,t,n){var r=[];return null==e?r:m&&e.filter===m?e.filter(t,n):(k(e,function(e,i,o){t.call(n,e,i,o)&&r.push(e)}),r)},C.reject=function(e,t,n){return C.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},C.every=C.all=function(e,t,r){t||(t=C.identity);var i=!0;return null==e?i:g&&e.every===g?e.every(t,r):(k(e,function(e,o,a){return(i=i&&t.call(r,e,o,a))?void 0:n}),!!i)};var q=C.some=C.any=function(e,t,r){t||(t=C.identity);var i=!1;return null==e?i:v&&e.some===v?e.some(t,r):(k(e,function(e,o,a){return i||(i=t.call(r,e,o,a))?n:void 0}),!!i)};C.contains=C.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):q(e,function(e){return e===t})},C.invoke=function(e,t){var n=u.call(arguments,2),r=C.isFunction(t);return C.map(e,function(e){return(r?t:e[t]).apply(e,n)})},C.pluck=function(e,t){return C.map(e,function(e){return e[t]})},C.where=function(e,t,n){return C.isEmpty(t)?n?void 0:[]:C[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},C.findWhere=function(e,t){return C.where(e,t,!0)},C.max=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&C.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return k(e,function(e,i,o){var a=t?t.call(n,e,i,o):e;a>r.computed&&(r={value:e,computed:a})}),r.value},C.min=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&C.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return k(e,function(e,i,o){var a=t?t.call(n,e,i,o):e;a<r.computed&&(r={value:e,computed:a})}),r.value},C.shuffle=function(e){var t,n=0,r=[];return k(e,function(e){t=C.random(n++),r[n-1]=r[t],r[t]=e}),r},C.sample=function(e,t,n){return arguments.length<2||n?e[C.random(e.length-1)]:C.shuffle(e).slice(0,Math.max(0,t))};var A=function(e){return C.isFunction(e)?e:function(t){return t[e]}};C.sortBy=function(e,t,n){var r=A(t);return C.pluck(C.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,n,r){var i={},o=null==n?C.identity:A(n);return k(t,function(n,a){var u=o.call(r,n,a,t);e(i,u,n)}),i}};C.groupBy=T(function(e,t,n){(C.has(e,t)?e[t]:e[t]=[]).push(n)}),C.indexBy=T(function(e,t,n){e[t]=n}),C.countBy=T(function(e,t){C.has(e,t)?e[t]++:e[t]=1}),C.sortedIndex=function(e,t,n,r){n=null==n?C.identity:A(n);for(var i=n.call(r,t),o=0,a=e.length;a>o;){var u=o+a>>>1;n.call(r,e[u])<i?o=u+1:a=u}return o},C.toArray=function(e){return e?C.isArray(e)?u.call(e):e.length===+e.length?C.map(e,C.identity):C.values(e):[]},C.size=function(e){return null==e?0:e.length===+e.length?e.length:C.keys(e).length},C.first=C.head=C.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},C.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},C.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},C.rest=C.tail=C.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},C.compact=function(e){return C.filter(e,C.identity)};var M=function(e,t,n){return t&&C.every(e,C.isArray)?l.apply(n,e):(k(e,function(e){C.isArray(e)||C.isArguments(e)?t?a.apply(n,e):M(e,t,n):n.push(e)}),n)};C.flatten=function(e,t){return M(e,t,[])},C.without=function(e){return C.difference(e,u.call(arguments,1))},C.uniq=C.unique=function(e,t,n,r){C.isFunction(t)&&(r=n,n=t,t=!1);var i=n?C.map(e,n,r):e,o=[],a=[];return k(i,function(n,r){(t?r&&a[a.length-1]===n:C.contains(a,n))||(a.push(n),o.push(e[r]))}),o},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(e){var t=u.call(arguments,1);return C.filter(C.uniq(e),function(e){return C.every(t,function(t){return C.indexOf(t,e)>=0})})},C.difference=function(e){var t=l.apply(r,u.call(arguments,1));return C.filter(e,function(e){return!C.contains(t,e)})},C.zip=function(){for(var e=C.max(C.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=C.pluck(arguments,""+n);return t},C.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},C.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=C.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},C.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},C.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,o=new Array(r);r>i;)o[i++]=e,e+=n;return o};var O=function(){};C.bind=function(e,t){var n,r;if(x&&e.bind===x)return x.apply(e,u.call(arguments,1));if(!C.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(u.call(arguments)));O.prototype=e.prototype;var i=new O;O.prototype=null;var o=e.apply(i,n.concat(u.call(arguments)));return Object(o)===o?o:i}},C.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},C.bindAll=function(e){var t=u.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return k(t,function(t){e[t]=C.bind(e[t],e)}),e},C.memoize=function(e,t){var n={};return t||(t=C.identity),function(){var r=t.apply(this,arguments);return C.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},C.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},C.defer=function(e){return C.delay.apply(C,[e,1].concat(u.call(arguments,1)))},C.throttle=function(e,t,n){var r,i,o,a=null,u=0;n||(n={});var l=function(){u=n.leading===!1?0:new Date,a=null,o=e.apply(r,i)};return function(){var s=new Date;u||n.leading!==!1||(u=s);var c=t-(s-u);return r=this,i=arguments,0>=c?(clearTimeout(a),a=null,u=s,o=e.apply(r,i)):a||n.trailing===!1||(a=setTimeout(l,c)),o}},C.debounce=function(e,t,n){var r,i,o,a,u;return function(){o=this,i=arguments,a=new Date;var l=function(){var s=new Date-a;t>s?r=setTimeout(l,t-s):(r=null,n||(u=e.apply(o,i)))},s=n&&!r;return r||(r=setTimeout(l,t)),s&&(u=e.apply(o,i)),u}},C.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},C.wrap=function(e,t){return function(){var n=[e];return a.apply(n,arguments),t.apply(this,n)}},C.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},C.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},C.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)C.has(e,n)&&t.push(n);return t},C.values=function(e){for(var t=C.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},C.pairs=function(e){for(var t=C.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},C.invert=function(e){for(var t={},n=C.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},C.functions=C.methods=function(e){var t=[];for(var n in e)C.isFunction(e[n])&&t.push(n);return t.sort()},C.extend=function(e){return k(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},C.pick=function(e){var t={},n=l.apply(r,u.call(arguments,1));return k(n,function(n){n in e&&(t[n]=e[n])}),t},C.omit=function(e){var t={},n=l.apply(r,u.call(arguments,1));for(var i in e)C.contains(n,i)||(t[i]=e[i]);return t},C.defaults=function(e){return k(u.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,t){return t(e),e};var I=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof C&&(e=e._wrapped),t instanceof C&&(t=t._wrapped);var i=s.call(e);if(i!=s.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return r[o]==t;var a=e.constructor,u=t.constructor;if(a!==u&&!(C.isFunction(a)&&a instanceof a&&C.isFunction(u)&&u instanceof u))return!1;n.push(e),r.push(t);var l=0,c=!0;if("[object Array]"==i){if(l=e.length,c=l==t.length)for(;l--&&(c=I(e[l],t[l],n,r)););}else{for(var f in e)if(C.has(e,f)&&(l++,!(c=C.has(t,f)&&I(e[f],t[f],n,r))))break;if(c){for(f in t)if(C.has(t,f)&&!l--)break;c=!l}}return n.pop(),r.pop(),c};C.isEqual=function(e,t){return I(e,t,[],[])},C.isEmpty=function(e){if(null==e)return!0;if(C.isArray(e)||C.isString(e))return 0===e.length;for(var t in e)if(C.has(e,t))return!1;return!0},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=S||function(e){return"[object Array]"==s.call(e)},C.isObject=function(e){return e===Object(e)},k(["Arguments","Function","String","Number","Date","RegExp"],function(e){C["is"+e]=function(t){return s.call(t)=="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(e){return!(!e||!C.has(e,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(e){return"function"==typeof e}),C.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},C.isNaN=function(e){return C.isNumber(e)&&e!=+e},C.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==s.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,t){return c.call(e,t)},C.noConflict=function(){return e._=t,this},C.identity=function(e){return e},C.times=function(e,t,n){for(var r=Array(Math.max(0,e)),i=0;e>i;i++)r[i]=t.call(n,i);return r},C.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var E={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};E.unescape=C.invert(E.escape);var N={escape:new RegExp("["+C.keys(E.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(E.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(e){C[e]=function(t){return null==t?"":(""+t).replace(N[e],function(t){return E[e][t]})}}),C.result=function(e,t){if(null==e)return void 0;var n=e[t];return C.isFunction(n)?n.call(e):n},C.mixin=function(e){k(C.functions(e),function(t){var n=C[t]=e[t];C.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),D.call(this,n.apply(C,e))}})};var _=0;C.uniqueId=function(e){var t=++_+"";return e?e+t:t},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(e,t,n){var r;n=C.defaults({},n,C.templateSettings);var i=new RegExp([(n.escape||j).source,(n.interpolate||j).source,(n.evaluate||j).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(i,function(t,n,r,i,u){return a+=e.slice(o,u).replace(H,function(e){return"\\"+W[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=u+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(n.variable||"obj","_",a)}catch(u){throw u.source=a,u}if(t)return r(t,C);var l=function(e){return r.call(this,e,C)
};return l.source="function("+(n.variable||"obj")+"){\n"+a+"}",l},C.chain=function(e){return C(e).chain()};var D=function(e){return this._chain?C(e).chain():e};C.mixin(C),k(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];C.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],D.call(this,n)}}),k(["concat","join","slice"],function(e){var t=r[e];C.prototype[e]=function(){return D.call(this,t.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){function e(e,t,n){for(var r=(n||0)-1,i=e?e.length:0;++r<i;)if(e[r]===t)return r;return-1}function t(t,n){var r=typeof n;if(t=t.cache,"boolean"==r||null==n)return t[n]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?n:y+n;return t=(t=t[r])&&t[i],"object"==r?t&&e(t,n)>-1?0:-1:t?0:-1}function n(e){var t=this.cache,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?e:y+e,i=t[n]||(t[n]={});"object"==n?(i[r]||(i[r]=[])).push(e):i[r]=!0}}function r(e){return e.charCodeAt(0)}function i(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||"undefined"==typeof n)return 1;if(r>n||"undefined"==typeof r)return-1}return e.index-t.index}function o(e){var t=-1,r=e.length,i=e[0],o=e[0|r/2],a=e[r-1];if(i&&"object"==typeof i&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var u=l();u["false"]=u["null"]=u["true"]=u.undefined=!1;var s=l();for(s.array=e,s.cache=u,s.push=n;++t<r;)s.push(e[t]);return s}function a(e){return"\\"+K[e]}function u(){return m.pop()||[]}function l(){return g.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function s(){}function c(e){e.length=0,m.length<S&&m.push(e)}function f(e){var t=e.cache;t&&f(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,g.length<S&&g.push(e)}function h(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,o=Array(0>i?0:i);++r<i;)o[r]=e[t+r];return o}function p(n){function m(e){return e&&"object"==typeof e&&!Yr(e)&&Lr.call(e,"__wrapped__")?e:new g(e)}function g(e,t){this.__chain__=!!t,this.__wrapped__=e}function S(e,t,n,r,i){if(n){var o=n(e);if("undefined"!=typeof o)return o}var a=qt(e);if(!a)return e;var l=Ir.call(e);if(!P[l])return e;var s=Ur[l];switch(l){case H:case D:return new s(+e);case F:case B:return new s(e);case R:return o=s(e.source,q.exec(e)),o.lastIndex=e.lastIndex,o}var f=Yr(e);if(t){var p=!r;r||(r=u()),i||(i=u());for(var d=r.length;d--;)if(r[d]==e)return i[d];o=f?s(e.length):{}}else o=f?h(e):ri({},e);return f&&(Lr.call(e,"index")&&(o.index=e.index),Lr.call(e,"input")&&(o.input=e.input)),t?(r.push(e),i.push(o),(f?Vt:ai)(e,function(e,a){o[a]=S(e,t,n,r,i)}),p&&(c(r),c(i)),o):o}function K(e,t,n){if("function"!=typeof e)return Gn;if("undefined"==typeof t)return e;var r=e.__bindData__||Kr.funcNames&&!e.name;if("undefined"==typeof r){var i=I&&Cr.call(e);Kr.funcNames||!i||A.test(i)||(r=!0),(Kr.funcNames||!r)&&(r=!Kr.funcDecomp||I.test(i),Xr(e,r))}if(r!==!0&&r&&1&r[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return On(e,t)}function Y(e,t,n,r){for(var i=(r||0)-1,o=e?e.length:0,a=[];++i<o;){var u=e[i];if(u&&"object"==typeof u&&"number"==typeof u.length&&(Yr(u)||st(u))){t||(u=Y(u,t,n));var l=-1,s=u.length,c=a.length;for(a.length+=s;++l<s;)a[c++]=u[l]}else n||a.push(u)}return a}function Z(e,t,n,r,i,o){if(n){var a=n(e,t);if("undefined"!=typeof a)return!!a}if(e===t)return 0!==e||1/e==1/t;var l=typeof e,s=typeof t;if(!(e!==e||e&&U[l]||t&&U[s]))return!1;if(null==e||null==t)return e===t;var f=Ir.call(e),h=Ir.call(t);if(f==j&&(f=$),h==j&&(h=$),f!=h)return!1;switch(f){case H:case D:return+e==+t;case F:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case R:case B:return e==dr(t)}var p=f==W;if(!p){if(Lr.call(e,"__wrapped__ ")||Lr.call(t,"__wrapped__"))return Z(e.__wrapped__||e,t.__wrapped__||t,n,r,i,o);if(f!=$)return!1;var d=e.constructor,m=t.constructor;if(d!=m&&!(Lt(d)&&d instanceof d&&Lt(m)&&m instanceof m))return!1}var g=!i;i||(i=u()),o||(o=u());for(var v=i.length;v--;)if(i[v]==e)return o[v]==t;var y=0;if(a=!0,i.push(e),o.push(t),p){if(v=e.length,y=t.length,a=y==e.length,!a&&!r)return a;for(;y--;){var b=v,S=t[y];if(r)for(;b--&&!(a=Z(e[b],S,n,r,i,o)););else if(!(a=Z(e[y],S,n,r,i,o)))break}return a}return oi(t,function(t,u,l){return Lr.call(l,u)?(y++,a=Lr.call(e,u)&&Z(e[u],t,n,r,i,o)):void 0}),a&&!r&&oi(e,function(e,t,n){return Lr.call(n,t)?a=--y>-1:void 0}),g&&(c(i),c(o)),a}function Q(e,t,n,r,i){(Yr(t)?Vt:ai)(t,function(t,o){var a,u,l=t,s=e[o];if(t&&((u=Yr(t))||ui(t))){for(var c=r.length;c--;)if(a=r[c]==t){s=i[c];break}if(!a){var f;n&&(l=n(s,t),(f="undefined"!=typeof l)&&(s=l)),f||(s=u?Yr(s)?s:[]:ui(s)?s:{}),r.push(t),i.push(s),f||Q(s,t,n,r,i)}}else n&&(l=n(s,t),"undefined"==typeof l&&(l=t)),"undefined"!=typeof l&&(s=l);e[o]=s})}function tt(n,r,i){var a=-1,l=at(),s=n?n.length:0,h=[],p=!r&&s>=b&&l===e,d=i||p?u():h;if(p){var m=o(d);m?(l=t,d=m):(p=!1,d=i?d:(c(d),h))}for(;++a<s;){var g=n[a],v=i?i(g,a,n):g;(r?!a||d[d.length-1]!==v:l(d,v)<0)&&((i||p)&&d.push(v),h.push(g))}return p?(c(d.array),f(d)):i&&c(d),h}function nt(e){return function(t,n,r){var i={};n=m.createCallback(n,r,3);var o=-1,a=t?t.length:0;if("number"==typeof a)for(;++o<a;){var u=t[o];e(i,u,n(u,o,t),t)}else ai(t,function(t,r,o){e(i,t,n(t,r,o),o)});return i}}function rt(e,t,n,r,i,o){var a=1&t,u=2&t,l=4&t,s=8&t,c=16&t,f=32&t,h=e;if(!u&&!Lt(e))throw new mr;c&&!n.length&&(t&=-17,c=n=!1),f&&!r.length&&(t&=-33,f=r=!1);var p=e&&e.__bindData__;if(p)return!a||1&p[1]||(p[4]=i),!a&&1&p[1]&&(t|=8),!l||4&p[1]||(p[5]=o),c&&Ar.apply(p[2]||(p[2]=[]),n),f&&Ar.apply(p[3]||(p[3]=[]),r),p[1]|=t,rt.apply(null,p);if(!a||u||l||f||!(Kr.fastBind||_r&&c))m=function(){var p=arguments,d=a?i:this;if((l||c||f)&&(p=Pr.call(p),c&&Er.apply(p,n),f&&Ar.apply(p,r),l&&p.length<o))return t|=16,rt(e,s?t:-4&t,p,null,i,o);if(u&&(e=d[h]),this instanceof m){d=it(e.prototype);var g=e.apply(d,p);return qt(g)?g:d}return e.apply(d,p)};else{if(c){var d=[i];Ar.apply(d,n)}var m=c?_r.apply(e,d):_r.call(e,i)}return Xr(m,Pr.call(arguments)),m}function it(e){return qt(e)?jr(e):{}}function ot(e){return Qr[e]}function at(){var t=(t=m.indexOf)===dn?e:t;return t}function ut(e){var t,n;return e&&Ir.call(e)==$&&(t=e.constructor,!Lt(t)||t instanceof t)?(oi(e,function(e,t){n=t}),"undefined"==typeof n||Lr.call(e,n)):!1}function lt(e){return ei[e]}function st(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ir.call(e)==j||!1}function ct(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n=t,t=!1),S(e,t,"function"==typeof n&&K(n,r,1))}function ft(e,t,n){return S(e,!0,"function"==typeof t&&K(t,n,1))}function ht(e,t,n){var r;return t=m.createCallback(t,n,3),ai(e,function(e,n,i){return t(e,n,i)?(r=n,!1):void 0}),r}function pt(e,t,n){var r;return t=m.createCallback(t,n,3),mt(e,function(e,n,i){return t(e,n,i)?(r=n,!1):void 0}),r}function dt(e,t,n){var r=[];oi(e,function(e,t){r.push(t,e)});var i=r.length;for(t=K(t,n,3);i--&&t(r[i--],r[i],e)!==!1;);return e}function mt(e,t,n){var r=Jr(e),i=r.length;for(t=K(t,n,3);i--;){var o=r[i];if(t(e[o],o,e)===!1)break}return e}function gt(e){var t=[];return oi(e,function(e,n){Lt(e)&&t.push(n)}),t.sort()}function vt(e,t){return e?Lr.call(e,t):!1}function yt(e){for(var t=-1,n=Jr(e),r=n.length,i={};++t<r;){var o=n[t];i[e[o]]=o}return i}function bt(e){return e===!0||e===!1||Ir.call(e)==H}function St(e){return e?"object"==typeof e&&Ir.call(e)==D:!1}function wt(e){return e?1===e.nodeType:!1}function xt(e){var t=!0;if(!e)return t;var n=Ir.call(e),r=e.length;return n==W||n==B||n==j||n==$&&"number"==typeof r&&Lt(e.splice)?!r:(ai(e,function(){return t=!1}),t)}function Ct(e,t,n,r){return Z(e,t,"function"==typeof n&&K(n,r,2))}function kt(e){return Hr(e)&&!Dr(parseFloat(e))}function Lt(e){return"function"==typeof e}function qt(e){return!(!e||!U[typeof e])}function At(e){return Mt(e)&&e!=+e}function Tt(e){return null===e}function Mt(e){return"number"==typeof e||Ir.call(e)==F}function Ot(e){return e?"object"==typeof e&&Ir.call(e)==R:!1}function It(e){return"string"==typeof e||Ir.call(e)==B}function Et(e){return"undefined"==typeof e}function Nt(e){var t=arguments,n=2;if(!qt(e))return e;if("number"!=typeof t[2]&&(n=t.length),n>3&&"function"==typeof t[n-2])var r=K(t[--n-1],t[n--],2);else n>2&&"function"==typeof t[n-1]&&(r=t[--n]);for(var i=Pr.call(arguments,1,n),o=-1,a=u(),l=u();++o<n;)Q(e,i[o],r,a,l);return c(a),c(l),e}function _t(e,t,n){var r=at(),i="function"==typeof t,o={};if(i)t=m.createCallback(t,n,3);else var a=Y(arguments,!0,!1,1);return oi(e,function(e,n,u){(i?!t(e,n,u):r(a,n)<0)&&(o[n]=e)}),o}function jt(e){for(var t=-1,n=Jr(e),r=n.length,i=ar(r);++t<r;){var o=n[t];i[t]=[o,e[o]]}return i}function Wt(e,t,n){var r={};if("function"!=typeof t)for(var i=-1,o=Y(arguments,!0,!1,1),a=qt(e)?o.length:0;++i<a;){var u=o[i];u in e&&(r[u]=e[u])}else t=m.createCallback(t,n,3),oi(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r}function Ht(e,t,n,r){var i=Yr(e);if(t=K(t,r,4),null==n)if(i)n=[];else{var o=e&&e.constructor,a=o&&o.prototype;n=it(a)}return(i?Vt:ai)(e,function(e,r,i){return t(n,e,r,i)}),n}function Dt(e){for(var t=-1,n=Jr(e),r=n.length,i=ar(r);++t<r;)i[t]=e[n[t]];return i}function zt(e){for(var t=arguments,n=-1,r=Y(t,!0,!1,1),i=t[2]&&t[2][t[1]]===e?1:r.length,o=ar(i);++n<i;)o[n]=e[r[n]];return o}function Ft(e,t,n){var r=-1,i=at(),o=e?e.length:0,a=!1;return n=(0>n?Fr(0,o+n):n)||0,Yr(e)?a=i(e,t,n)>-1:"number"==typeof o?a=(It(e)?e.indexOf(t,n):i(e,t,n))>-1:ai(e,function(e){return++r>=n?!(a=e===t):void 0}),a}function $t(e,t,n){var r=!0;t=m.createCallback(t,n,3);var i=-1,o=e?e.length:0;if("number"==typeof o)for(;++i<o&&(r=!!t(e[i],i,e)););else ai(e,function(e,n,i){return r=!!t(e,n,i)});return r}function Rt(e,t,n){var r=[];t=m.createCallback(t,n,3);var i=-1,o=e?e.length:0;if("number"==typeof o)for(;++i<o;){var a=e[i];t(a,i,e)&&r.push(a)}else ai(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function Bt(e,t,n){t=m.createCallback(t,n,3);var r=-1,i=e?e.length:0;if("number"!=typeof i){var o;return ai(e,function(e,n,r){return t(e,n,r)?(o=e,!1):void 0}),o}for(;++r<i;){var a=e[r];if(t(a,r,e))return a}}function Pt(e,t,n){var r;return t=m.createCallback(t,n,3),Gt(e,function(e,n,i){return t(e,n,i)?(r=e,!1):void 0}),r}function Vt(e,t,n){var r=-1,i=e?e.length:0;if(t=t&&"undefined"==typeof n?t:K(t,n,3),"number"==typeof i)for(;++r<i&&t(e[r],r,e)!==!1;);else ai(e,t);return e}function Gt(e,t,n){var r=e?e.length:0;if(t=t&&"undefined"==typeof n?t:K(t,n,3),"number"==typeof r)for(;r--&&t(e[r],r,e)!==!1;);else{var i=Jr(e);r=i.length,ai(e,function(e,n,o){return n=i?i[--r]:--r,t(o[n],n,o)})}return e}function Ut(e,t){var n=Pr.call(arguments,2),r=-1,i="function"==typeof t,o=e?e.length:0,a=ar("number"==typeof o?o:0);return Vt(e,function(e){a[++r]=(i?t:e[t]).apply(e,n)}),a}function Kt(e,t,n){var r=-1,i=e?e.length:0;if(t=m.createCallback(t,n,3),"number"==typeof i)for(var o=ar(i);++r<i;)o[r]=t(e[r],r,e);else o=[],ai(e,function(e,n,i){o[++r]=t(e,n,i)});return o}function Xt(e,t,n){var i=-1/0,o=i;if(!t&&Yr(e))for(var a=-1,u=e.length;++a<u;){var l=e[a];l>o&&(o=l)}else t=!t&&It(e)?r:m.createCallback(t,n,3),Vt(e,function(e,n,r){var a=t(e,n,r);a>i&&(i=a,o=e)});return o}function Yt(e,t,n){var i=1/0,o=i;if(!t&&Yr(e))for(var a=-1,u=e.length;++a<u;){var l=e[a];o>l&&(o=l)}else t=!t&&It(e)?r:m.createCallback(t,n,3),Vt(e,function(e,n,r){var a=t(e,n,r);i>a&&(i=a,o=e)});return o}function Zt(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r)for(var i=ar(r);++n<r;)i[n]=e[n][t];return i||Kt(e,t)}function Jt(e,t,n,r){if(!e)return n;var i=arguments.length<3;t=K(t,r,4);var o=-1,a=e.length;if("number"==typeof a)for(i&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);else ai(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)});return n}function Qt(e,t,n,r){var i=arguments.length<3;return t=K(t,r,4),Gt(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)}),n}function en(e,t,n){return t=m.createCallback(t,n,3),Rt(e,function(e,n,r){return!t(e,n,r)})}function tn(e,t,n){var r=e?e.length:0;if("number"!=typeof r&&(e=Dt(e)),null==t||n)return e?e[Xn(r-1)]:d;var i=nn(e);return i.length=$r(Fr(0,t),i.length),i}function nn(e){var t=-1,n=e?e.length:0,r=ar("number"==typeof n?n:0);return Vt(e,function(e){var n=Xn(++t);r[t]=r[n],r[n]=e}),r}function rn(e){var t=e?e.length:0;return"number"==typeof t?t:Jr(e).length}function on(e,t,n){var r;t=m.createCallback(t,n,3);var i=-1,o=e?e.length:0;if("number"==typeof o)for(;++i<o&&!(r=t(e[i],i,e)););else ai(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function an(e,t,n){var r=-1,o=e?e.length:0,a=ar("number"==typeof o?o:0);for(t=m.createCallback(t,n,3),Vt(e,function(e,n,i){var o=a[++r]=l();o.criteria=t(e,n,i),o.index=r,o.value=e}),o=a.length,a.sort(i);o--;){var u=a[o];a[o]=u.value,f(u)}return a}function un(e){return e&&"number"==typeof e.length?h(e):Dt(e)}function ln(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r}function sn(n){var r=-1,i=at(),a=n?n.length:0,u=Y(arguments,!0,!0,1),l=[],s=a>=b&&i===e;if(s){var c=o(u);c?(i=t,u=c):s=!1}for(;++r<a;){var h=n[r];i(u,h)<0&&l.push(h)}return s&&f(u),l}function cn(e,t,n){var r=-1,i=e?e.length:0;for(t=m.createCallback(t,n,3);++r<i;)if(t(e[r],r,e))return r;return-1}function fn(e,t,n){var r=e?e.length:0;for(t=m.createCallback(t,n,3);r--;)if(t(e[r],r,e))return r;return-1}function hn(e,t,n){var r=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var o=-1;for(t=m.createCallback(t,n,3);++o<i&&t(e[o],o,e);)r++}else if(r=t,null==r||n)return e?e[0]:d;return h(e,0,$r(Fr(0,r),i))}function pn(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n=r&&r[t]===e?null:t,t=!1),null!=n&&(e=Kt(e,n,r)),Y(e,t)}function dn(t,n,r){if("number"==typeof r){var i=t?t.length:0;r=0>r?Fr(0,i+r):r||0}else if(r){var o=Cn(t,n);return t[o]===n?o:-1}return e(t,n,r)}function mn(e,t,n){var r=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var o=i;for(t=m.createCallback(t,n,3);o--&&t(e[o],o,e);)r++}else r=null==t||n?1:t||r;return h(e,0,$r(Fr(0,i-r),i))}function gn(n){for(var r=arguments,i=r.length,a=-1,l=u(),s=-1,h=at(),p=n?n.length:0,d=[],m=u();++a<i;){var g=r[a];l[a]=h===e&&(g?g.length:0)>=b&&o(a?r[a]:m)}e:for(;++s<p;){var v=l[0];if(g=n[s],(v?t(v,g):h(m,g))<0){for(a=i,(v||m).push(g);--a;)if(v=l[a],(v?t(v,g):h(r[a],g))<0)continue e;d.push(g)}}for(;i--;)v=l[i],v&&f(v);return c(l),c(m),d}function vn(e,t,n){var r=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var o=i;for(t=m.createCallback(t,n,3);o--&&t(e[o],o,e);)r++}else if(r=t,null==r||n)return e?e[i-1]:d;return h(e,Fr(0,i-r))}function yn(e,t,n){var r=e?e.length:0;for("number"==typeof n&&(r=(0>n?Fr(0,r+n):$r(n,r-1))+1);r--;)if(e[r]===t)return r;return-1}function bn(e){for(var t=arguments,n=0,r=t.length,i=e?e.length:0;++n<r;)for(var o=-1,a=t[n];++o<i;)e[o]===a&&(Or.call(e,o--,1),i--);return e}function Sn(e,t,n){e=+e||0,n="number"==typeof n?n:+n||1,null==t&&(t=e,e=0);for(var r=-1,i=Fr(0,Sr((t-e)/(n||1))),o=ar(i);++r<i;)o[r]=e,e+=n;return o}function wn(e,t,n){var r=-1,i=e?e.length:0,o=[];for(t=m.createCallback(t,n,3);++r<i;){var a=e[r];t(a,r,e)&&(o.push(a),Or.call(e,r--,1),i--)}return o}function xn(e,t,n){if("number"!=typeof t&&null!=t){var r=0,i=-1,o=e?e.length:0;for(t=m.createCallback(t,n,3);++i<o&&t(e[i],i,e);)r++}else r=null==t||n?1:Fr(0,t);return h(e,r)}function Cn(e,t,n,r){var i=0,o=e?e.length:i;for(n=n?m.createCallback(n,r,1):Gn,t=n(t);o>i;){var a=i+o>>>1;n(e[a])<t?i=a+1:o=a}return i}function kn(){return tt(Y(arguments,!0,!0))}function Ln(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n=r&&r[t]===e?null:t,t=!1),null!=n&&(n=m.createCallback(n,r,3)),tt(e,t,n)}function qn(e){return sn(e,Pr.call(arguments,1))}function An(){for(var e=arguments.length>1?arguments:arguments[0],t=-1,n=e?Xt(Zt(e,"length")):0,r=ar(0>n?0:n);++t<n;)r[t]=Zt(e,t);return r}function Tn(e,t){for(var n=-1,r=e?e.length:0,i={};++n<r;){var o=e[n];t?i[o]=t[n]:o&&(i[o[0]]=o[1])}return i}function Mn(e,t){if(!Lt(t))throw new mr;return function(){return--e<1?t.apply(this,arguments):void 0}}function On(e,t){return arguments.length>2?rt(e,17,Pr.call(arguments,2),null,t):rt(e,1,null,null,t)}function In(e){for(var t=arguments.length>1?Y(arguments,!0,!1,1):gt(e),n=-1,r=t.length;++n<r;){var i=t[n];e[i]=rt(e[i],1,null,null,e)}return e}function En(e,t){return arguments.length>2?rt(t,19,Pr.call(arguments,2),null,e):rt(t,3,null,null,e)}function Nn(){for(var e=arguments,t=e.length;t--;)if(!Lt(e[t]))throw new mr;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function _n(e,t,n){var r=typeof e;if(null==e||"function"==r)return K(e,t,n);if("object"!=r)return function(t){return t[e]};var i=Jr(e),o=i[0],a=e[o];return 1!=i.length||a!==a||qt(a)?function(t){for(var n=i.length,r=!1;n--&&(r=Z(t[i[n]],e[i[n]],null,!0)););return r}:function(e){var t=e[o];return a===t&&(0!==a||1/a==1/t)}}function jn(e,t){return t="number"==typeof t?t:+t||e.length,rt(e,4,null,null,null,t)}function Wn(e,t,n){var r,i,o,a,u,l,s,c=0,f=!1,h=!0;if(!Lt(e))throw new mr;if(t=Fr(0,t)||0,n===!0){var p=!0;h=!1}else qt(n)&&(p=n.leading,f="maxWait"in n&&(Fr(t,n.maxWait)||0),h="trailing"in n?n.trailing:h);var m=function(){var n=t-(qr()-a);if(0>=n){i&&wr(i);var f=s;i=l=s=d,f&&(c=qr(),o=e.apply(u,r))}else l=Mr(m,n)},g=function(){l&&wr(l),i=l=s=d,(h||f!==t)&&(c=qr(),o=e.apply(u,r))};return function(){if(r=arguments,a=qr(),u=this,s=h&&(l||!p),f===!1)var n=p&&!l;else{i||p||(c=a);var d=f-(a-c);0>=d?(i&&(i=wr(i)),c=a,o=e.apply(u,r)):i||(i=Mr(g,d))}return l||t===f||(l=Mr(m,t)),n&&(o=e.apply(u,r)),o}}function Hn(e){if(!Lt(e))throw new mr;var t=Pr.call(arguments,1);return Mr(function(){e.apply(d,t)},1)}function Dn(e,t){if(!Lt(e))throw new mr;var n=Pr.call(arguments,2);return Mr(function(){e.apply(d,n)},t)}function zn(e,t){if(!Lt(e))throw new mr;var n=function(){var r=n.cache,i=t?t.apply(this,arguments):y+arguments[0];return Lr.call(r,i)?r[i]:r[i]=e.apply(this,arguments)};return n.cache={},n}function Fn(e){var t,n;if(!Lt(e))throw new mr;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function $n(e){return rt(e,16,Pr.call(arguments,1))}function Rn(e){return rt(e,32,null,Pr.call(arguments,1))}function Bn(e,t,n){var r=!0,i=!0;if(!Lt(e))throw new mr;n===!1?r=!1:qt(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),V.leading=r,V.maxWait=t,V.trailing=i;var o=Wn(e,t,V);return o}function Pn(e,t){if(!Lt(t))throw new mr;return function(){var n=[e];return Ar.apply(n,arguments),t.apply(this,n)}}function Vn(e){return null==e?"":dr(e).replace(ni,ot)}function Gn(e){return e}function Un(e,t){var n=e,r=!t||Lt(n);t||(n=g,t=e,e=m),Vt(gt(t),function(i){var o=e[i]=t[i];r&&(n.prototype[i]=function(){var t=this.__wrapped__,r=[t];Ar.apply(r,arguments);var i=o.apply(e,r);return t&&"object"==typeof t&&t===i?this:(i=new n(i),i.__chain__=this.__chain__,i)})})}function Kn(){return n._=yr,this}function Xn(e,t,n){var r=null==e,i=null==t;null==n&&("boolean"==typeof e&&i?(n=e,e=1):i||"boolean"!=typeof t||(n=t,i=!0)),r&&i&&(t=1),e=+e||0,i?(t=e,e=0):t=+t||0;var o=Br();return n||e%1||t%1?$r(e+o*(t-e+parseFloat("1e-"+((o+"").length-1))),t):e+xr(o*(t-e+1))}function Yn(e,t){if(e){var n=e[t];return Lt(n)?e[t]():n}}function Zn(e,t,n){var r=m.templateSettings;e||(e=""),n=ii({},n,r);var i,o=ii({},n.imports,r.imports),u=Jr(o),l=Dt(o),s=0,c=n.interpolate||O,f="__p += '",h=pr((n.escape||O).source+"|"+c.source+"|"+(c===T?L:O).source+"|"+(n.evaluate||O).source+"|$","g");e.replace(h,function(t,n,r,o,u,l){return r||(r=o),f+=e.slice(s,l).replace(E,a),n&&(f+="' +\n__e("+n+") +\n'"),u&&(i=!0,f+="';\n"+u+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),s=l+t.length,t}),f+="';\n";var p=n.variable,g=p;g||(p="obj",f="with ("+p+") {\n"+f+"\n}\n"),f=(i?f.replace(x,""):f).replace(C,"$1").replace(k,"$1;"),f="function("+p+") {\n"+(g?"":p+" || ("+p+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+_++ +"]")+"\n*/";try{var y=sr(u,"return "+f+v).apply(d,l)}catch(b){throw b.source=f,b}return t?y(t):(y.source=f,y)}function Jn(e,t,n){e=(e=+e)>-1?e:0;var r=-1,i=ar(e);for(t=K(t,n,1);++r<e;)i[r]=t(r);return i}function Qn(e){return null==e?"":dr(e).replace(ti,lt)}function er(e){var t=++v;return dr(null==e?"":e)+t}function tr(e){return e=new g(e),e.__chain__=!0,e}function nr(e,t){return t(e),e}function rr(){return this.__chain__=!0,this}function ir(){return dr(this.__wrapped__)}function or(){return this.__wrapped__}n=n?et.defaults(X.Object(),n,et.pick(X,N)):X;var ar=n.Array,ur=n.Boolean,lr=n.Date,sr=n.Function,cr=n.Math,fr=n.Number,hr=n.Object,pr=n.RegExp,dr=n.String,mr=n.TypeError,gr=[],vr=hr.prototype,yr=n._,br=pr("^"+dr(vr.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Sr=cr.ceil,wr=n.clearTimeout,xr=cr.floor,Cr=sr.prototype.toString,kr=br.test(kr=hr.getPrototypeOf)&&kr,Lr=vr.hasOwnProperty,qr=br.test(qr=lr.now)&&qr||function(){return+new lr},Ar=gr.push,Tr=n.setImmediate,Mr=n.setTimeout,Or=gr.splice,Ir=vr.toString,Er=gr.unshift,Nr=function(){try{var e={},t=br.test(t=hr.defineProperty)&&t,n=t(e,e,e)&&t}catch(r){}return n}(),_r=br.test(_r=Ir.bind)&&_r,jr=br.test(jr=hr.create)&&jr,Wr=br.test(Wr=ar.isArray)&&Wr,Hr=n.isFinite,Dr=n.isNaN,zr=br.test(zr=hr.keys)&&zr,Fr=cr.max,$r=cr.min,Rr=n.parseInt,Br=cr.random,Pr=gr.slice,Vr=br.test(n.attachEvent),Gr=_r&&!/\n|true/.test(_r+Vr),Ur={};Ur[W]=ar,Ur[H]=ur,Ur[D]=lr,Ur[z]=sr,Ur[$]=hr,Ur[F]=fr,Ur[R]=pr,Ur[B]=dr,g.prototype=m.prototype;var Kr=m.support={};Kr.fastBind=_r&&!Gr,Kr.funcDecomp=!br.test(n.WinRTError)&&I.test(p),Kr.funcNames="string"==typeof sr.name,m.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:T,variable:"",imports:{_:m}},jr||(it=function(e){if(qt(e)){s.prototype=e;var t=new s;s.prototype=null}return t||{}});var Xr=Nr?function(e,t){G.value=t,Nr(e,"__bindData__",G)}:s,Yr=Wr||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ir.call(e)==W||!1},Zr=function(e){var t,n=e,r=[];if(!n)return r;if(!U[typeof e])return r;for(t in n)Lr.call(n,t)&&r.push(t);return r},Jr=zr?function(e){return qt(e)?zr(e):[]}:Zr,Qr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ei=yt(Qr),ti=pr("("+Jr(ei).join("|")+")","g"),ni=pr("["+Jr(Qr).join("")+"]","g"),ri=function(e,t,n){var r,i=e,o=i;if(!i)return o;var a=arguments,u=0,l="number"==typeof n?2:a.length;if(l>3&&"function"==typeof a[l-2])var s=K(a[--l-1],a[l--],2);else l>2&&"function"==typeof a[l-1]&&(s=a[--l]);for(;++u<l;)if(i=a[u],i&&U[typeof i])for(var c=-1,f=U[typeof i]&&Jr(i),h=f?f.length:0;++c<h;)r=f[c],o[r]=s?s(o[r],i[r]):i[r];return o},ii=function(e,t,n){var r,i=e,o=i;if(!i)return o;for(var a=arguments,u=0,l="number"==typeof n?2:a.length;++u<l;)if(i=a[u],i&&U[typeof i])for(var s=-1,c=U[typeof i]&&Jr(i),f=c?c.length:0;++s<f;)r=c[s],"undefined"==typeof o[r]&&(o[r]=i[r]);return o},oi=function(e,t,n){var r,i=e,o=i;if(!i)return o;if(!U[typeof i])return o;t=t&&"undefined"==typeof n?t:K(t,n,3);for(r in i)if(t(i[r],r,e)===!1)return o;return o},ai=function(e,t,n){var r,i=e,o=i;if(!i)return o;if(!U[typeof i])return o;t=t&&"undefined"==typeof n?t:K(t,n,3);for(var a=-1,u=U[typeof i]&&Jr(i),l=u?u.length:0;++a<l;)if(r=u[a],t(i[r],r,e)===!1)return o;return o},ui=function(e){if(!e||Ir.call(e)!=$)return!1;var t=e.valueOf,n="function"==typeof t&&(n=kr(t))&&kr(n);return n?e==n||kr(e)==n:ut(e)},li=nt(function(e,t,n){Lr.call(e,n)?e[n]++:e[n]=1}),si=nt(function(e,t,n){(Lr.call(e,n)?e[n]:e[n]=[]).push(t)}),ci=nt(function(e,t,n){e[n]=t}),fi=Rt;Gr&&J&&"function"==typeof Tr&&(Hn=function(e){if(!Lt(e))throw new mr;return Tr.apply(n,arguments)});var hi=8==Rr(w+"08")?Rr:function(e,t){return Rr(It(e)?e.replace(M,""):e,t||0)};return m.after=Mn,m.assign=ri,m.at=zt,m.bind=On,m.bindAll=In,m.bindKey=En,m.chain=tr,m.compact=ln,m.compose=Nn,m.countBy=li,m.createCallback=_n,m.curry=jn,m.debounce=Wn,m.defaults=ii,m.defer=Hn,m.delay=Dn,m.difference=sn,m.filter=Rt,m.flatten=pn,m.forEach=Vt,m.forEachRight=Gt,m.forIn=oi,m.forInRight=dt,m.forOwn=ai,m.forOwnRight=mt,m.functions=gt,m.groupBy=si,m.indexBy=ci,m.initial=mn,m.intersection=gn,m.invert=yt,m.invoke=Ut,m.keys=Jr,m.map=Kt,m.max=Xt,m.memoize=zn,m.merge=Nt,m.min=Yt,m.omit=_t,m.once=Fn,m.pairs=jt,m.partial=$n,m.partialRight=Rn,m.pick=Wt,m.pluck=Zt,m.pull=bn,m.range=Sn,m.reject=en,m.remove=wn,m.rest=xn,m.shuffle=nn,m.sortBy=an,m.tap=nr,m.throttle=Bn,m.times=Jn,m.toArray=un,m.transform=Ht,m.union=kn,m.uniq=Ln,m.values=Dt,m.where=fi,m.without=qn,m.wrap=Pn,m.zip=An,m.zipObject=Tn,m.collect=Kt,m.drop=xn,m.each=Vt,m.eachRight=Gt,m.extend=ri,m.methods=gt,m.object=Tn,m.select=Rt,m.tail=xn,m.unique=Ln,m.unzip=An,Un(m),m.clone=ct,m.cloneDeep=ft,m.contains=Ft,m.escape=Vn,m.every=$t,m.find=Bt,m.findIndex=cn,m.findKey=ht,m.findLast=Pt,m.findLastIndex=fn,m.findLastKey=pt,m.has=vt,m.identity=Gn,m.indexOf=dn,m.isArguments=st,m.isArray=Yr,m.isBoolean=bt,m.isDate=St,m.isElement=wt,m.isEmpty=xt,m.isEqual=Ct,m.isFinite=kt,m.isFunction=Lt,m.isNaN=At,m.isNull=Tt,m.isNumber=Mt,m.isObject=qt,m.isPlainObject=ui,m.isRegExp=Ot,m.isString=It,m.isUndefined=Et,m.lastIndexOf=yn,m.mixin=Un,m.noConflict=Kn,m.parseInt=hi,m.random=Xn,m.reduce=Jt,m.reduceRight=Qt,m.result=Yn,m.runInContext=p,m.size=rn,m.some=on,m.sortedIndex=Cn,m.template=Zn,m.unescape=Qn,m.uniqueId=er,m.all=$t,m.any=on,m.detect=Bt,m.findWhere=Bt,m.foldl=Jt,m.foldr=Qt,m.include=Ft,m.inject=Jt,ai(m,function(e,t){m.prototype[t]||(m.prototype[t]=function(){var t=[this.__wrapped__],n=this.__chain__;Ar.apply(t,arguments);var r=e.apply(m,t);return n?new g(r,n):r})}),m.first=hn,m.last=vn,m.sample=tn,m.take=hn,m.head=hn,ai(m,function(e,t){var n="sample"!==t;m.prototype[t]||(m.prototype[t]=function(t,r){var i=this.__chain__,o=e(this.__wrapped__,t,r);return i||null!=t&&(!r||n&&"function"==typeof t)?new g(o,i):o})}),m.VERSION="2.2.1",m.prototype.chain=rr,m.prototype.toString=ir,m.prototype.value=or,m.prototype.valueOf=or,Vt(["join","pop","shift"],function(e){var t=gr[e];m.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new g(n,e):n}}),Vt(["push","reverse","sort","unshift"],function(e){var t=gr[e];m.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),Vt(["concat","slice","splice"],function(e){var t=gr[e];m.prototype[e]=function(){return new g(t.apply(this.__wrapped__,arguments),this.__chain__)}}),m}var d,m=[],g=[],v=0,y=+new Date+"",b=75,S=40,w=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",x=/\b__p \+= '';/g,C=/\b(__p \+=) '' \+/g,k=/(__e\(.*?\)|\b__t\)) \+\n'';/g,L=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,q=/\w*$/,A=/^function[ \n\r\t]+\w/,T=/<%=([\s\S]+?)%>/g,M=RegExp("^["+w+"]*0+(?=.$)"),O=/($^)/,I=/\bthis\b/,E=/['\n\r\t\u2028\u2029\\]/g,N=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],_=0,j="[object Arguments]",W="[object Array]",H="[object Boolean]",D="[object Date]",z="[object Function]",F="[object Number]",$="[object Object]",R="[object RegExp]",B="[object String]",P={};P[z]=!1,P[j]=P[W]=P[H]=P[D]=P[F]=P[$]=P[R]=P[B]=!0;var V={leading:!1,maxWait:0,trailing:!1},G={configurable:!1,enumerable:!1,value:null,writable:!1},U={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},K={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},X=U[typeof window]&&window||this,Y=U[typeof exports]&&exports&&!exports.nodeType&&exports,Z=U[typeof module]&&module&&!module.nodeType&&module,J=Z&&Z.exports===Y&&Y,Q=U[typeof global]&&global;!Q||Q.global!==Q&&Q.window!==Q||(X=Q);var et=p();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(X._=et,define(function(){return et})):Y&&Z?J?(Z.exports=et)._=et:Y._=et:X._=et}.call(this),function(e,t){"use strict";function n(e,t,r){var i=this;return null==i||i.constructor!=n?new n(e,t,r):(C(e,"Object")?r=e:C(e,"Function")?(r=t,t=e):C(t,"Object")?(r=t,t=null,i.name=e):i.name=e,I(i,r),i.id||(i.id=++pt),null==i.fn&&(i.fn=t),i.stats=N(i.stats),i.times=N(i.times),void 0)}function r(e){var t=this;return null==t||t.constructor!=r?new r(e):(t.benchmark=e,st(t),void 0)}function i(e){var t=this;return null==t||t.constructor!=i?new i(e):e instanceof i?e:j(t,{timeStamp:+new Date},"string"==typeof e?{type:e}:e)}function o(e,t){var n=this;return null==n||n.constructor!=o?new o(e,t):(C(e,"Object")?t=e:n.name=e,I(n,t),void 0)}function a(){for(var e,t=-1,n=arguments.length,r=c.call(this),i=r.length;++t<n;)if(e=arguments[t],C(e,"Array"))for(var o=0,a=e.length;a>o;o++,i++)o in e&&(r[i]=e[o]);else r[i++]=e;return r}function u(e,t,n){for(var r=e+t,i=n?n.length:0,o=e-1,a=e+i,u=this,l=Array(t),s=c.call(u,r);++o<r;)o in u&&(l[o-e]=u[o],delete u[o]);for(o=e-1;++o<a;)u[o]=n[o-e];for(e=o--,a=Rt(0,(u.length>>>0)-t+i);++o<a;)o-e in s?u[o]=s[o-e]:o in u&&delete u[o];for(t=t>i?t-i:0;t--;)o=a+t,o in u&&delete u[o];return u.length=a,l}function l(){var e,t,n=-1,r=Object(this),i=r.length>>>0,o=$t(i/2);if(i>1)for(;++n<o;)e=i-n-1,t=e in r?r[e]:Ot,n in r?r[e]=r[n]:delete r[e],t!=Ot?r[n]=t:delete r[n];return r}function s(){return u.call(this,0,1)[0]}function c(e,t){var n=-1,r=Object(this),i=r.length>>>0,o=[];for(e=h(e),e=0>e?Rt(i+e,0):Bt(e,i),e--,t=null==t?i:h(t),t=0>t?Rt(i+t,0):Bt(t,i);++n,++e<t;)e in r&&(o[n]=r[e]);return o}function f(e,t){var n=Object(this),r=n.length>>>0;return e=h(e),e=0>e?Rt(r+e,0):Bt(e,r),t=1==arguments.length?r-e:Bt(Rt(h(t),0),r-e),u.call(n,e,t,c.call(arguments,2))}function h(e){return e=+e,0!==e&&isFinite(e)?e-e%1:e||0}function p(){var e=Object(this);return u.call(e,0,0,arguments),e.length}function d(e,t){return function(){e.apply(t,arguments)}}function m(){return m=function(e,t){var r,i=mt?define.amd:n,o=Ot+"createFunction";return O((mt?"define.amd.":"Benchmark.")+o+"=function("+e+"){"+t+"}"),r=i[o],delete i[o],r},m=jt.browser&&(m("",'return"'+Ot+'"')||T)()==Ot?m:Function,m.apply(null,arguments)}function g(e,t){e._timerId=setTimeout(t,1e3*e.delay)}function v(e){Mt.appendChild(e),Mt.innerHTML=""}function y(){var e,n,r=!0,i=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];return function(t,i){function o(){this.valueOf=0}o.prototype.valueOf=0;for(i in new o)t+="valueOf"==i?1:0;for(i in arguments)"0"==i&&(r=!1);n=2==t,e=!t}(0),y=function(o,a,u){u||(u={});var l=o;o=Object(o);var s,c,f,h,p=!l,m=u.which,g="all"==m,v=-1,y=o,b=o.length,S=g||"own"==m,w={},k=C(o,"Function"),L=u.bind;if(L!==t&&(a=d(a,L)),g&&jt.getAllKeys)for(v=0,f=yt(o),b=f.length;b>v&&(c=f[v],a(o[c],c,o)!==!1);v++);else{for(c in o)if(p=!(k&&"prototype"==c||n&&(F(w,c)||!(w[c]=!0))||!(!S||S&&F(o,c))||a(o[c],c,o)!==!1))break;if(!p&&(r&&x(o)||(Dt||zt)&&C(o,"String")&&(y=Dt?o.split(""):o)))for(;++v<b&&!(p=a(y[v],String(v),o)===!1););if(!p&&e)for(s=o.constructor,h=s&&s.prototype&&s.prototype.constructor===s,v=0;7>v&&(c=i[v],h&&"constructor"==c||!F(o,c)||a(o[c],c,o)!==!1);v++);}return l},y.apply(null,arguments)}function b(e){return!F(e,"toString")&&(/^[\s(]*function[^(]*\(([^\s,)]+)/.exec(e)||0)[1]||""}function S(e){return U(e,function(e,t){return e+t})/e.length||0}function w(e,t){var n=t;return q(e)?n=String(e):jt.decompilation&&(n=(/^[^{]+\{([\s\S]*)}\s*$/.exec(e)||0)[1]),n=(n||"").replace(/^\s+|\s+$/g,""),/^(?:\/\*+[\w|\W]*?\*\/|\/\/.*?[\n\r\u2028\u2029]|\s)*(["'])use strict\1;?$/.test(n)?"":n}function x(){return x=function(e){return"[object Arguments]"==Tt.call(e)},Ht&&(x=function(e){return F(e,"callee")&&!(qt&&qt.call(e,"callee"))}),x(arguments[0])}function C(e,t){return null!=e&&Tt.call(e)=="[object "+t+"]"}function k(e,t){var n=null!=e?typeof e[t]:"number";return!/^(?:boolean|number|string|undefined)$/.test(n)&&("object"==n?!!e[t]:!0)}function L(e){var t=!1;if(!e||"object"!=typeof e||x(e))return t;var n=e.constructor;return!jt.nodeClass&&"function"!=typeof e.toString&&"string"==typeof(e+"")||C(n,"Function")&&!(n instanceof n)?t:jt.iteratesOwnFirst?(y(e,function(e,n){t=n}),t===!1||F(e,t)):(y(e,function(n,r){return t=!F(e,r),!1}),t===!1)}function q(e){return F(e,"toString")||C(e,"String")}function A(e){return function(){var t=[this];return t.push.apply(t,arguments),e.apply(null,t)}}function T(){}function M(e){try{var t=gt&&vt(e)}catch(n){}return t||null}function O(e){var t=mt?define.amd:n,r=dt.createElement("script"),i=dt.getElementsByTagName("script")[0],o=i.parentNode,a=Ot+"runScript",u="("+(mt?"define.amd.":"Benchmark.")+a+"||function(){})();";
try{r.appendChild(dt.createTextNode(u+e)),t[a]=function(){v(r)}}catch(l){o=o.cloneNode(!1),i=null,r.text=e}o.insertBefore(r,i),delete t[a]}function I(e,t){t=j({},e.constructor.options,t),e.options=D(t,function(t,n){null!=t&&(/^on[A-Z]/.test(n)?H(n.split(" "),function(n){e.on(n.slice(2).toLowerCase(),t)}):F(e,n)||(e[n]=N(t)))})}function E(){var e=this,t=e.benchmark,n=t._original;n.aborted?(e.teardown(),t.running=!1,ft(e)):++e.cycles<t.count?jt.timeout?setTimeout(function(){t.compiled.call(e,Wt)},0):t.compiled.call(e,Wt):(Wt.stop(e),e.teardown(),g(t,function(){ft(e)}))}function N(e){function t(e){this.raw=e}function n(n,r){if(!n||n.constructor!=t)if(n===Object(n))w[w.length++]={key:r,parent:a,source:e};else try{a[r]=n}catch(i){}}function r(e){for(var n=Ot;e[n]&&e[n].constructor!=t;)n+=1;return n}var i,o,a,u,l,s,c,f,h,p,d,m,g,v={value:e},b=0,S=[],w={length:0},x=[];do{if(c=v.key,p=v.parent,m=v.source,a=e=m?m[c]:v.value,i=o=l=!1,e===Object(e)){if(C(e.deepClone,"Function"))a=e.deepClone();else switch(u=e.constructor,Tt.call(e)){case"[object Array]":a=new u(e.length);break;case"[object Boolean]":a=new u(1==e);break;case"[object Date]":a=new u(+e);break;case"[object Object]":L(e)&&(a={});break;case"[object Number]":case"[object String]":a=new u(e);break;case"[object RegExp]":a=u(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":""))}if(a&&a!=e&&(l=m&&jt.descriptors&&bt(m,c),!(i=l&&(l.get||l.set)))){if(s=wt(e))h=r(e),e[h]&&(o=a=e[h].raw);else for(g=0,f=x.length;f>g;g++)if(v=x[g],v.object===e){o=a=v.clone;break}o||(s?(e[h]=new t(a),S.push({key:h,object:e})):x.push({clone:a,object:e}),y(e,n,{which:"all"}))}}p?i||l&&!(l.configurable&&l.enumerable&&l.writable)?("value"in l&&(l.value=a),At(p,c,l)):p[c]=a:d=a}while(v=w[b++]);for(b=0,f=S.length;f>b;b++)v=S[b],delete v.object[v.key];return d}function _(e,t,n){var r=e;e=Object(e);var i=t,o=-1,a=e.length,u=!(!e.snapshotItem||!(a=e.snapshotLength)),l=(Dt||zt)&&C(e,"String"),s=u||l||"item"in e,c=e;if(a===a>>>0){if(s)if(t=function(e,t){return i.call(this,e,t,c)},l)e=e.split("");else for(e=[];++o<a;)e[o]=u?r.snapshotItem(o):r[o];H(e,t,n)}else D(e,t,n);return r}function j(e){var t=e;return delete arguments[0],H(arguments,function(e){y(e,function(e,n){t[n]=e})}),t}function W(e,t,n){var r;return"successful"==t?t=function(e){return e.cycles&&isFinite(e.hz)}:("fastest"==t||"slowest"==t)&&(r=W(e,"successful").sort(function(e,n){return e=e.stats,n=n.stats,(e.mean+e.moe>n.mean+n.moe?1:-1)*("fastest"==t?1:-1)}),r=W(r,function(e){return 0==r[0].compare(e)})),r||U(e,function(r,i,o){return t.call(n,i,o,e)?(r.push(i),r):r},[])}function H(e,n,r){var i=-1,o=(e=Object(e)).length>>>0;for(r!==t&&(n=d(n,r));++i<o&&!(i in e&&n(e[i],i,e)===!1););return e}function D(e,t,n){return y(e,t,{bind:n,which:"own"})}function z(e){return e=String(e).split("."),e[0].replace(/(?=(?:\d{3})+$)(?!\b)/g,",")+(e[1]?"."+e[1]:"")}function F(){return F=function(e,t){var n=null!=e&&(e.constructor||Object).prototype;return!!n&&t in Object(e)&&!(t in n&&e[t]===n[t])},C(St,"Function")?F=function(e,t){return null!=e&&St.call(e,t)}:{}.__proto__==Object.prototype&&(F=function(e,t){var n=!1;return null!=e&&(e=Object(e),e.__proto__=[e.__proto__,e.__proto__=null,n=t in e][0]),n}),F.apply(this,arguments)}function $(e,t,n){var r=h(n),i=(e=Object(e)).length>>>0;for(r=(0>r?Rt(0,i+r):r)-1;++r<i;)if(r in e&&t===e[r])return r;return-1}function R(e,t){return D(t,function(t,n){e=e.replace(RegExp("#\\{"+n.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")+"\\}","g"),t)}),e}function B(e,r){function a(){var e,n=l(p);return n&&(p.on("complete",u),e=p.events.complete,e.splice(0,0,e.pop())),b[m]=C(p&&p[r],"Function")?p[r].apply(p,h):t,!n&&u()}function u(t){var n,r=p,o=l(r);if(o&&(r.off("complete",u),r.emit("complete")),v.type="cycle",v.target=r,n=i(v),y.onCycle.call(e,n),n.aborted||f()===!1)v.type="complete",y.onComplete.call(e,i(v));else if(p=d?e[0]:b[m],l(p))g(p,a);else{if(!o)return!0;for(;a(););}return t?(t.aborted=!0,void 0):!1}function l(e){var t=h[0]&&h[0].async;return Object(e).constructor==n&&"run"==r&&((null==t?e.options.async:t)&&jt.timeout||e.defer)}function f(){var t=b.length;if(d){do++m>0&&s.call(e);while((t=e.length)&&!("0"in e))}else for(;++m<t&&!(m in b););return(d?t:t>m)?m:m=!1}var h,p,d,m=-1,v={currentTarget:e},y={onStart:T,onCycle:T,onComplete:T},b=V(e,function(e){return e});if(C(r,"String")?h=c.call(arguments,2):(y=j(y,r),r=y.name,h=C(h="args"in y?y.args:[],"Array")?h:[h],d=y.queued),f()!==!1)if(p=b[m],v.type="start",v.target=p,y.onStart.call(e,i(v)),e.aborted&&e.constructor==o&&"run"==r)v.type="cycle",y.onCycle.call(e,i(v)),v.type="complete",y.onComplete.call(e,i(v));else if(l(p))g(p,a);else for(;a(););return b}function P(e,t,n){var r=[],i=(e=Object(e)).length,o=i===i>>>0;return n||(n=": "),_(e,function(e,t){r.push(o?e:t+n+e)}),r.join(t||",")}function V(e,t,n){return U(e,function(r,i,o){return r[o]=t.call(n,i,o,e),r},Array(Object(e).length>>>0))}function G(e,n){return V(e,function(e){return null==e?t:e[n]})}function U(e,t,n){var r=arguments.length<3;return H(e,function(i,o){n=r?(r=!1,i):t(n,i,o,e)}),n}function K(){var e,t=this,n=It.resetSuite;return t.running&&(e=i("abort"),t.emit(e),(!e.cancelled||n)&&(It.abortSuite=!0,t.reset(),delete It.abortSuite,n||(t.aborted=!0,B(t,"abort")))),t}function X(e,t,r){var o=this,a=n(e,t,r),u=i({type:"add",target:a});return o.emit(u),u.cancelled||o.push(a),o}function Y(e){var t=this,n=new t.constructor(j({},t.options,e));return D(t,function(e,t){F(n,t)||(n[t]=e&&C(e.clone,"Function")?e.clone():N(e))}),n}function Z(e){var t=this,n=new t.constructor;return n.push.apply(n,W(t,e)),n}function J(){var e,t=this,n=It.abortSuite;return t.running&&!n?(It.resetSuite=!0,t.abort(),delete It.resetSuite):!t.aborted&&!t.running||(t.emit(e=i("reset")),e.cancelled)||(t.running=!1,n||B(t,"reset")),t}function Q(e){var t=this;return t.reset(),t.running=!0,e||(e={}),B(t,{name:"run",args:e,queued:e.queued,onStart:function(e){t.emit(e)},onCycle:function(e){var n=e.target;n.error&&t.emit({type:"error",target:n}),t.emit(e),e.aborted=t.aborted},onComplete:function(e){t.running=!1,t.emit(e)}}),t}function et(e){var t,n=this,r=i(e),o=n.events,a=(arguments[0]=r,arguments);return r.currentTarget||(r.currentTarget=n),r.target||(r.target=n),delete r.result,o&&(t=F(o,r.type)&&o[r.type])&&H(t.slice(),function(e){return(r.result=e.apply(n,a))===!1&&(r.cancelled=!0),!r.aborted}),r.result}function tt(e){var t=this,n=t.events||(t.events={});return F(n,e)?n[e]:n[e]=[]}function nt(e,t){var n=this,r=n.events;return r&&_(e?e.split(" "):r,function(e,n){var i;"string"==typeof e&&(n=e,e=F(r,n)&&r[n]),e&&(t?(i=$(e,t),i>-1&&e.splice(i,1)):e.length=0)}),n}function rt(e,t){var n=this,r=n.events||(n.events={});return H(e.split(" "),function(e){(F(r,e)?r[e]:r[e]=[]).push(t)}),n}function it(){var e,t=this,n=It.reset;return t.running&&(e=i("abort"),t.emit(e),(!e.cancelled||n)&&(It.abort=!0,t.reset(),delete It.abort,jt.timeout&&(clearTimeout(t._timerId),delete t._timerId),n||(t.aborted=!0,t.running=!1))),t}function ot(e){var t=this,n=new t.constructor(j({},t,e));return n.options=j({},t.options,e),D(t,function(e,t){F(n,t)||(n[t]=N(e))}),n}function at(e){function t(e,t){return U(t,function(t,n){return t+(n>e?0:e>n?1:.5)},0)}function n(e,n){return U(e,function(e,r){return e+t(r,n)},0)}function r(e){return(e-s*c/2)/Vt(s*c*(s+c+1)/12)}var i,o,a=this,u=a.stats.sample,l=e.stats.sample,s=u.length,c=l.length,f=Rt(s,c),h=Bt(s,c),p=n(u,l),d=n(l,u),m=Bt(p,d);return a==e?0:s+c>30?(o=r(m),Ft(o)>1.96?o>0?-1:1:0):(i=5>f||3>h?0:_t[f][h-3],i>=m?m==p?1:-1:0)}function ut(){var e,t,n=this,r=0,o={length:0},a={length:0};if(n.running&&!It.abort)It.reset=!0,n.abort(),delete It.reset;else{e={destination:n,source:j({},n.constructor.prototype,n.options)};do D(e.source,function(t,n){var r,i=e.destination,u=i[n];t&&"object"==typeof t?(C(t,"Array")?(C(u,"Array")||(r=u=[]),u.length!=t.length&&(r=u=u.slice(0,t.length),u.length=t.length)):u&&"object"==typeof u||(r=u={}),r&&(o[o.length++]={destination:i,key:n,value:u}),a[a.length++]={destination:u,source:t}):t===u||null==t||C(t,"Function")||(o[o.length++]={destination:i,key:n,value:t})});while(e=a[r++]);o.length&&(n.emit(t=i("reset")),!t.cancelled)&&H(o,function(e){e.destination[e.key]=e.value})}return n}function lt(){var e=this,t=e.error,n=e.hz,r=e.id,i=e.stats,o=i.sample.length,a=jt.java?"+/-":"±",u=e.name||(isNaN(r)?r:"<Test #"+r+">");return u+=t?": "+P(t):" x "+z(n.toFixed(100>n?2:0))+" ops/sec "+a+i.rme.toFixed(2)+"% ("+o+" run"+(1==o?"":"s")+" sampled)"}function st(){function t(e){for(var t,n,r=30,i=1e3,o=Wt.ns,a=[];r--;){if("us"==e)if(i=1e6,o.stop)for(o.start();!(t=o.microseconds()););else if(o[kt])i=1e3,t=Function("n","var r,s=n."+kt+"();while(!(r=n."+kt+"()-s)){};return r")(o);else for(n=o();!(t=o()-n););else if("ns"==e)if(i=1e9,o.nanoTime)for(n=o.nanoTime();!(t=o.nanoTime()-n););else{for(n=(n=o())[0]+n[1]/i;!(t=(t=o())[0]+t[1]/i-n););i=1}else for(n=new o;!(t=new o-n););if(!(t>0)){a.push(1/0);break}a.push(t)}return S(a)/i}function i(e){return R(e,u).replace(/\$/g,/\d+/.exec(Ot))}var o,a=n.options,u={begin:"s$=new n$",end:"r$=(new n$-s$)/1e3",uid:Ot},l=[{ns:Wt.ns,res:Rt(.0015,t("ms")),unit:"ms"}];st=function(e){var t;e instanceof r&&(t=e,e=t.benchmark);var n=e._original,u=n.fn,l=t?b(u)||"deferred":"",s=q(u),c={setup:w(n.setup,i("m$.setup()")),fn:w(u,i("m$.fn("+l+")")),fnArg:l,teardown:w(n.teardown,i("m$.teardown()"))},f=n.count=e.count,h=jt.decompilation||s,p=n.id,d=!(c.fn||s),g=n.name||("number"==typeof p?"<Test #"+p+">":p),v=Wt.ns,y=0;if(e.minTime=n.minTime||(n.minTime=n.options.minTime=a.minTime),o)try{v.nanoTime()}catch(S){v=Wt.ns=new o.Packages.nano}var x=n.compiled=m(i("t$"),R(i(t?'var d$=this,#{fnArg}=d$,m$=d$.benchmark._original,f$=m$.fn,su$=m$.setup,td$=m$.teardown;if(!d$.cycles){d$.fn=function(){var #{fnArg}=d$;if(typeof f$=="function"){try{#{fn}\n}catch(e$){f$(d$)}}else{#{fn}\n}};d$.teardown=function(){d$.cycles=0;if(typeof td$=="function"){try{#{teardown}\n}catch(e$){td$()}}else{#{teardown}\n}};if(typeof su$=="function"){try{#{setup}\n}catch(e$){su$()}}else{#{setup}\n};t$.start(d$);}d$.fn();return{}':'var r$,s$,m$=this,f$=m$.fn,i$=m$.count,n$=t$.ns;#{setup}\n#{begin};while(i$--){#{fn}\n}#{end};#{teardown}\nreturn{elapsed:r$,uid:"#{uid}"}'),c));try{if(d)throw new Error('The test "'+g+'" is empty. This may be the result of dead code removal.');t||(n.count=1,x=(x.call(n,Wt)||{}).uid==Ot&&x,n.count=f)}catch(S){x=null,e.error=S||new Error(String(S)),n.count=f}if(h&&!x&&!t&&!d){x=m(i("t$"),R(i((e.error&&!s?"var r$,s$,m$=this,f$=m$.fn,i$=m$.count":"function f$(){#{fn}\n}var r$,s$,m$=this,i$=m$.count")+",n$=t$.ns;#{setup}\n#{begin};m$.f$=f$;while(i$--){m$.f$()}#{end};"+"delete m$.f$;#{teardown}\nreturn{elapsed:r$}"),c));try{n.count=1,x.call(n,Wt),n.compiled=x,n.count=f,delete e.error}catch(S){n.count=f,e.error?x=null:(n.compiled=x,e.error=S||new Error(String(S)))}}return e.compiled=x,e.error||(y=x.call(t||n,Wt).elapsed),y},_(dt&&dt.applets||[],function(e){return!(Wt.ns=o="nanoTime"in e&&e)});try{"number"==typeof Wt.ns.nanoTime()&&l.push({ns:Wt.ns,res:t("ns"),unit:"ns"})}catch(s){}try{(Wt.ns=new(e.chrome||e.chromium).Interval)&&l.push({ns:Wt.ns,res:t("us"),unit:"us"})}catch(s){}if((Wt.ns=kt&&Ct)&&l.push({ns:Wt.ns,res:t("us"),unit:"us"}),Lt&&"function"==typeof(Wt.ns=Lt.hrtime)&&l.push({ns:Wt.ns,res:t("ns"),unit:"ns"}),xt&&"function"==typeof(Wt.ns=xt.now)&&l.push({ns:Wt.ns,res:t("us"),unit:"us"}),Wt=U(l,function(e,t){return t.res<e.res?t:e}),"ns"!=Wt.unit&&o&&(o=v(o)),1/0==Wt.res)throw new Error("Benchmark.js was unable to find a working timer.");return"ns"==Wt.unit?Wt.ns.nanoTime?j(u,{begin:"s$=n$.nanoTime()",end:"r$=(n$.nanoTime()-s$)/1e9"}):j(u,{begin:"s$=n$()",end:"r$=n$(s$);r$=r$[0]+(r$[1]/1e9)"}):"us"==Wt.unit&&(Wt.ns.stop?j(u,{begin:"s$=n$.start()",end:"r$=n$.microseconds()/1e6"}):kt?j(u,{begin:"s$=n$."+kt+"()",end:"r$=(n$."+kt+"()-s$)/1e3"}):j(u,{begin:"s$=n$()",end:"r$=(n$()-s$)/1e6"})),Wt.start=m(i("o$"),i("var n$=this.ns,#{begin};o$.elapsed=0;o$.timeStamp=s$")),Wt.stop=m(i("o$"),i("var n$=this.ns,s$=o$.timeStamp,#{end};o$.elapsed=r$")),a.minTime||(a.minTime=Rt(Wt.res/2/.01,.05)),st.apply(null,arguments)}function ct(e,t){function n(){s.push(e.clone({_original:e,events:{abort:[r],cycle:[r],error:[r],start:[r]}}))}function r(t){var n=this,r=t.type;e.running?"start"==r?n.count=e.initCount:("error"==r&&(e.error=n.error),"abort"==r?(e.abort(),e.emit("cycle")):(t.currentTarget=t.target=e,e.emit(t))):e.aborted&&(n.events.abort.length=0,n.abort())}function i(t){var r,i,o,f,h,p,d,m,g=t.target,v=e.aborted,y=+new Date,b=c.push(g.times.period),w=b>=l&&(a+=y-g.times.timeStamp)/1e3>e.maxTime,x=e.times,C=function(e,t){return e+Pt(t-o,2)};(v||1/0==g.hz)&&(w=!(b=c.length=s.length=0)),v||(o=S(c),m=U(c,C,0)/(b-1)||0,p=Vt(m),d=p/Vt(b),i=b-1,r=Nt[Math.round(i)||1]||Nt.infinity,f=d*r,h=100*(f/o)||0,j(e.stats,{deviation:p,mean:o,moe:f,rme:h,sem:d,variance:m}),w&&(e.initCount=u,e.running=!1,v=!0,x.elapsed=(y-x.timeStamp)/1e3),1/0!=e.hz&&(e.hz=1/o,x.cycle=o*e.count,x.period=o)),s.length<2&&!w&&n(),t.aborted=v}t||(t={});var o=t.async,a=0,u=e.initCount,l=e.minSamples,s=[],c=e.stats.sample;n(),B(s,{name:"run",args:{async:o},queued:!0,onCycle:i,onComplete:function(){e.emit("complete")}})}function ft(e,t){t||(t={});var n;e instanceof r&&(n=e,e=e.benchmark);var o,a,u,l,s,c,f=t.async,h=e._original,p=e.count,d=e.times;e.running&&(a=++e.cycles,o=n?n.elapsed:st(e),s=e.minTime,a>h.cycles&&(h.cycles=a),e.error&&(l=i("error"),l.message=e.error,e.emit(l),l.cancelled||e.abort())),e.running&&(h.times.cycle=d.cycle=o,c=h.times.period=d.period=o/p,h.hz=e.hz=1/c,h.initCount=e.initCount=p,e.running=s>o,e.running&&(o||null==(u=Et[e.cycles])||(p=$t(4e6/u)),p<=e.count&&(p+=Math.ceil((s-o)/c)),e.running=1/0!=p)),l=i("cycle"),e.emit(l),l.aborted&&e.abort(),e.running?(e.count=p,n?e.compiled.call(n,Wt):f?g(e,function(){ft(e,t)}):ft(e)):(jt.browser&&O(Ot+"=1;delete "+Ot),e.emit("complete"))}function ht(e){var t=this,n=i("start");return t.running=!1,t.reset(),t.running=!0,t.count=t.initCount,t.times.timeStamp=+new Date,t.emit(n),n.cancelled||(e={async:(null==(e=e&&e.async)?t.async:e)&&jt.timeout},t._original?t.defer?r(t):ft(t,e):ct(t,e)),t}var pt=0,dt=k(e,"document")&&document,mt="function"==typeof define&&"object"==typeof define.amd&&define.amd&&define,gt="object"==typeof exports&&exports&&("object"==typeof global&&global&&global==global.global&&(e=global),exports),vt="function"==typeof require&&require,yt=Object.getOwnPropertyNames,bt=Object.getOwnPropertyDescriptor,St={}.hasOwnProperty,wt=Object.isExtensible||function(){return!0},xt=M("microtime"),Ct=k(e,"performance")&&performance,kt=Ct&&(Ct.now&&"now"||Ct.webkitNow&&"webkitNow"),Lt=k(e,"process")&&process,qt={}.propertyIsEnumerable,At=Object.defineProperty,Tt={}.toString,Mt=dt&&dt.createElement("div"),Ot="uid"+ +new Date,It={},Et={1:4096,2:512,3:64,4:8,5:0},Nt={1:12.706,2:4.303,3:3.182,4:2.776,5:2.571,6:2.447,7:2.365,8:2.306,9:2.262,10:2.228,11:2.201,12:2.179,13:2.16,14:2.145,15:2.131,16:2.12,17:2.11,18:2.101,19:2.093,20:2.086,21:2.08,22:2.074,23:2.069,24:2.064,25:2.06,26:2.056,27:2.052,28:2.048,29:2.045,30:2.042,infinity:1.96},_t={5:[0,1,2],6:[1,2,3,5],7:[1,3,5,6,8],8:[2,4,6,8,10,13],9:[2,4,7,10,12,15,17],10:[3,5,8,11,14,17,20,23],11:[3,6,9,13,16,19,23,26,30],12:[4,7,11,14,18,22,26,29,33,37],13:[4,8,12,16,20,24,28,33,37,41,45],14:[5,9,13,17,22,26,31,36,40,45,50,55],15:[5,10,14,19,24,29,34,39,44,49,54,59,64],16:[6,11,15,21,26,31,37,42,47,53,59,64,70,75],17:[6,11,17,22,28,34,39,45,51,57,63,67,75,81,87],18:[7,12,18,24,30,36,42,48,55,61,67,74,80,86,93,99],19:[7,13,19,25,32,38,45,52,58,65,72,78,85,92,99,106,113],20:[8,14,20,27,34,41,48,55,62,69,76,83,90,98,105,112,119,127],21:[8,15,22,29,36,43,50,58,65,73,80,88,96,103,111,119,126,134,142],22:[9,16,23,30,38,45,53,61,69,77,85,93,101,109,117,125,133,141,150,158],23:[9,17,24,32,40,48,56,64,73,81,89,98,106,115,123,132,140,149,157,166,175],24:[10,17,25,33,42,50,59,67,76,85,94,102,111,120,129,138,147,156,165,174,183,192],25:[10,18,27,35,44,53,62,71,80,89,98,107,117,126,135,145,154,163,173,182,192,201,211],26:[11,19,28,37,46,55,64,74,83,93,102,112,122,132,141,151,161,171,181,191,200,210,220,230],27:[11,20,29,38,48,57,67,77,87,97,107,118,125,138,147,158,168,178,188,199,209,219,230,240,250],28:[12,21,30,40,50,60,70,80,90,101,111,122,132,143,154,164,175,186,196,207,218,228,239,250,261,272],29:[13,22,32,42,52,62,73,83,94,105,116,127,138,149,160,171,182,193,204,215,226,238,249,260,271,282,294],30:[13,23,33,43,54,65,76,87,98,109,120,131,143,154,166,177,189,200,212,223,235,247,258,270,282,293,305,317]},jt={};!function(){jt.air=C(e.runtime,"ScriptBridgingProxyObject"),jt.argumentsClass=C(arguments,"Arguments"),jt.browser=dt&&k(e,"navigator"),jt.charByIndex="xx"=="x"[0]+Object("x")[0],jt.charByOwnIndex=jt.charByIndex&&F("x","0"),jt.java=C(e.java,"JavaPackage"),jt.timeout=k(e,"setTimeout")&&k(e,"clearTimeout");try{jt.decompilation="1"===Function("return ([object Object])")()(0).x}catch(t){jt.decompilation=!1}try{var n={};jt.descriptors=(At(n,n,n),"value"in bt(n,n))}catch(t){jt.descriptors=!1}try{jt.getAllKeys=/\bvalueOf\b/.test(yt(Object.prototype))}catch(t){jt.getAllKeys=!1}jt.iteratesOwnFirst=function(){function e(){this.x=1}var t=[];e.prototype={y:1};for(var n in new e)t.push(n);return"x"==t[0]}();try{jt.nodeClass="[object Object]"!=Tt.call(dt||0)}catch(t){jt.nodeClass=!0}}();var Wt={ns:Date,start:null,stop:null},Ht=!jt.argumentsClass,Dt=!jt.charByIndex,zt=!jt.charByOwnIndex,Ft=Math.abs,$t=Math.floor,Rt=Math.max,Bt=Math.min,Pt=Math.pow,Vt=Math.sqrt;j(n,{options:{async:!1,defer:!1,delay:.005,id:t,initCount:1,maxTime:5,minSamples:5,minTime:0,name:t,onAbort:t,onComplete:t,onCycle:t,onError:t,onReset:t,onStart:t},platform:M("platform")||e.platform||{description:e.navigator&&navigator.userAgent||null,layout:null,product:null,name:null,manufacturer:null,os:null,prerelease:null,version:null,toString:function(){return this.description||""}},version:"1.0.0",support:jt,deepClone:N,each:_,extend:j,filter:W,forEach:H,forOwn:D,formatNumber:z,hasKey:(F(n,""),F),indexOf:$,interpolate:R,invoke:B,join:P,map:V,pluck:G,reduce:U}),j(n.prototype,{count:0,cycles:0,hz:0,compiled:t,error:t,fn:t,aborted:!1,running:!1,setup:T,teardown:T,stats:{moe:0,rme:0,sem:0,deviation:0,mean:0,sample:[],variance:0},times:{cycle:0,elapsed:0,period:0,timeStamp:0},abort:it,clone:ot,compare:at,emit:et,listeners:tt,off:nt,on:rt,reset:ut,run:ht,toString:lt}),j(r.prototype,{benchmark:null,cycles:0,elapsed:0,timeStamp:0,resolve:E}),j(i.prototype,{aborted:!1,cancelled:!1,currentTarget:t,result:t,target:t,timeStamp:0,type:""}),o.options={name:t},j(o.prototype,{length:0,aborted:!1,running:!1,forEach:A(H),indexOf:A($),invoke:A(B),join:[].join,map:A(V),pluck:A(G),pop:[].pop,push:[].push,sort:[].sort,reduce:A(U),abort:K,add:X,clone:Y,emit:et,filter:Z,listeners:tt,off:nt,on:rt,reset:J,run:Q,concat:a,reverse:l,shift:s,slice:c,splice:f,unshift:p}),j(n,{Deferred:r,Event:i,Suite:o}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return n}):gt?"object"==typeof module&&module&&module.exports==gt?(module.exports=n).Benchmark=n:gt.Benchmark=n:e.Benchmark=n,jt.air&&st({_original:{fn:T,count:1,options:{}}})}(this),function(context){function Sequence(){}function MappedSequence(e,t){this.parent=e,this.mapFn=t}function CachingSequence(){}function FilteredSequence(e,t){this.parent=e,this.filterFn=t}function ConcatenatedSequence(e,t){this.parent=e,this.arrays=t}function SimpleIntersectionSequence(e,t){this.parent=e,this.array=t,this.each=getEachForIntersection(t)}function getEachForIntersection(e){return e.length<40?SimpleIntersectionSequence.prototype.eachArrayCache:SimpleIntersectionSequence.prototype.eachMemoizerCache}function SimpleZippedSequence(e,t){this.parent=e,this.array=t}function Iterator(e){this.sequence=e,this.index=-1}function FilteringIterator(e,t){this.iterator=e.getIterator(),this.filterFn=t}function CharIterator(e){this.source=e,this.index=-1}function StringMatchIterator(source,pattern){this.source=source,this.pattern=eval(""+pattern+(pattern.global?"":"g"))}function SplitWithRegExpIterator(source,pattern){this.source=source,this.pattern=eval(""+pattern+(pattern.global?"":"g"))}function SplitWithStringIterator(e,t){this.source=e,this.delimiter=t}function UniqueMemoizer(e){this.iterator=e,this.set=new Set,this.memo=[],this.currentValue=void 0}function ArrayLikeSequence(){}function IndexedMappedSequence(e,t){this.parent=e,this.mapFn=t}function IndexedFilteredSequence(e,t){this.parent=e,this.filterFn=t}function IndexedReversedSequence(e){this.parent=e}function IndexedTakeSequence(e,t){this.parent=e,this.count=t}function IndexedDropSequence(e,t){this.parent=e,this.count="number"==typeof t?t:1}function IndexedConcatenatedSequence(e,t){this.parent=e,this.other=t}function IndexedUniqueSequence(e,t){this.parent=e,this.each=getEachForParent(e),this.keyFn=t}function getEachForParent(e){return e.length()<100?IndexedUniqueSequence.prototype.eachArrayCache:UniqueSequence.prototype.each}function ArrayWrapper(e){this.source=e}function MappedArrayWrapper(e,t){this.source=e,this.mapFn=t}function FilteredArrayWrapper(e,t){this.parent=e,this.filterFn=t}function UniqueArrayWrapper(e,t){this.parent=e,this.each=getEachForSource(e.source),this.keyFn=createCallback(t)}function getEachForSource(e){return e.length<40?UniqueArrayWrapper.prototype.eachNoCache:e.length<100?UniqueArrayWrapper.prototype.eachArrayCache:UniqueSequence.prototype.each}function ConcatArrayWrapper(e,t){this.source=e,this.other=t}function ObjectLikeSequence(){}function AssignSequence(e,t){this.parent=e,this.other=t}function DefaultsSequence(e,t){this.parent=e,this.defaults=t}function InvertedSequence(e){this.parent=e}function PickSequence(e,t){this.parent=e,this.properties=t}function OmitSequence(e,t){this.parent=e,this.properties=t}function ObjectWrapper(e){this.source=e}function StringLikeSequence(){}function StringMatchSequence(e,t){this.source=e,this.pattern=t}function SplitStringSequence(e,t){this.source=e,this.pattern=t}function StringWrapper(e){this.source=e}function GeneratedSequence(e,t){this.get=e,this.fixedLength=t}function GeneratedIterator(e){this.sequence=e,this.index=0,this.currentValue=null}function AsyncSequence(e,t){if(e instanceof AsyncSequence)throw"Sequence is already asynchronous!";this.parent=e,this.onNextCallback=getOnNextCallback(t),this.cancelCallback=getCancelCallback()}function getOnNextCallback(e){return"undefined"==typeof e&&"function"==typeof context.setImmediate?context.setImmediate:(e=e||0,function(t){return setTimeout(t,e)})}function getCancelCallback(e){return"undefined"==typeof e&&"function"==typeof context.clearImmediate?context.clearImmediate:context.clearTimeout}function StreamLikeSequence(){}function LinesSequence(e){this.parent=e}function StreamingHttpSequence(e){this.url=e}function createCallback(e){switch(typeof e){case"function":return e;case"string":return function(t){return t[e]};case"object":return function(t){return Lazy(e).all(function(e,n){return t[n]===e})};case"undefined":return function(e){return e};default:throw"Don't know how to make a callback from a "+typeof e+"!"}}function createSet(e){var t=new Set;return Lazy(e||[]).flatten().each(function(e){t.add(e)}),t}function compare(e,t,n){return"function"==typeof n?compare(n(e),n(t)):e===t?0:e>t?1:-1}function forEach(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n])===!1)return!1;return!0}function recursiveForEach(e,t,n){n=n||[0];for(var r=-1;++r<e.length;)if(e[r]instanceof Array){if(recursiveForEach(e[r],t,n)===!1)return!1}else if(t(e[r],n[0]++)===!1)return!1;return!0}function getFirst(e){var t;return e.each(function(e){return t=e,!1}),t}function contains(e,t){for(var n=-1,r=e.length;++n<r;)if(e[n]===t)return!0;return!1}function containsBefore(e,t,n,r){r=r||function(e){return e};for(var i=-1;++i<n;)if(r(e[i])===r(t))return!0;return!1}function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function indent(e){return new Array(e).join("  ")}function Set(){this.table={}}Sequence.define=function(e,t){if(!t||!t.getIterator&&!t.each)throw"A custom sequence must implement *at least* getIterator or each!";var n=t.init,r=n?function(){this.parent=arguments[0],n.apply(this,arguments)}:function(){this.parent=arguments[0]};r.prototype=new Sequence,delete t.init;for(var i in t)r.prototype[i]=t[i];for(var o="string"==typeof e?[e]:e,a=0;a<o.length;++a)switch(n&&n.length||0){case 0:Sequence.prototype[o[a]]=function(){return new r(this)};break;case 1:Sequence.prototype[o[a]]=function(e){return new r(this,e)};break;case 2:Sequence.prototype[o[a]]=function(e,t){return new r(this,e,t)};break;case 3:Sequence.prototype[o[a]]=function(e,t,n){return new r(this,e,t,n)};break;default:throw"Really need more than three arguments? https://github.com/dtao/lazy.js/issues/new"}return r},Sequence.prototype.toArray=function(){var e=[];return this.each(function(t){e.push(t)}),e},Sequence.prototype.toObject=function(){var e={};return this.each(function(t){e[t[0]]=t[1]}),e},Sequence.prototype.each=function(e){for(var t=this.getIterator(),n=-1;t.moveNext();)if(e(t.current(),++n)===!1)return!1;return!0},Sequence.prototype.forEach=function(e){return this.each(e)},Sequence.prototype.map=function(e){return"string"==typeof e?this.pluck(e):new MappedSequence(this,e)},Sequence.prototype.collect=Sequence.prototype.map,Sequence.prototype.pluck=function(e){return this.map(function(t){return t[e]})},Sequence.prototype.invoke=function(e){return this.map(function(t){return t[e]()})},Sequence.prototype.select=function(e){return new FilteredSequence(this,createCallback(e))},Sequence.prototype.filter=Sequence.prototype.select,Sequence.prototype.reject=function(e){return this.filter(function(t){return!e(t)})},Sequence.prototype.where=function(e){return this.filter(function(t){for(var n in e)if(t[n]!==e[n])return!1;return!0})};var ReversedSequence=Sequence.define("reverse",{each:function(e){for(var t=this.parent.toArray(),n=t.length;--n>=0&&e(t[n])!==!1;);}});Sequence.prototype.concat=function(){return new ConcatenatedSequence(this,Array.prototype.slice.call(arguments,0))},Sequence.prototype.first=function(e){return"undefined"==typeof e?getFirst(this):new TakeSequence(this,e)},Sequence.prototype.head=Sequence.prototype.first,Sequence.prototype.take=Sequence.prototype.first,Sequence.prototype.takeWhile=function(e){return new TakeWhileSequence(this,e)},Sequence.prototype.initial=function(e){return"undefined"==typeof e&&(e=1),this.take(this.length()-e)},Sequence.prototype.last=function(e){return"undefined"==typeof e?this.reverse().first():this.reverse().take(e).reverse()},Sequence.prototype.findWhere=function(e){return this.where(e).first()};var DropSequence=Sequence.define(["drop","skip","tail","rest"],{init:function(e,t){this.count="number"==typeof t?t:1},each:function(e){var t=this,n=0;t.parent.each(function(r){return n++<t.count?void 0:e(r)})}});Sequence.prototype.dropWhile=Sequence.prototype.skipWhile=function(e){return new DropWhileSequence(this,e)},Sequence.prototype.sortBy=function(e){return new SortedSequence(this,e)},Sequence.prototype.groupBy=function(e){return new GroupedSequence(this,e)},Sequence.prototype.countBy=function(e){return new CountedSequence(this,e)},Sequence.prototype.uniq=function(e){return new UniqueSequence(this,createCallback(e))},Sequence.prototype.unique=Sequence.prototype.uniq,Sequence.prototype.zip=function(e){return 1===arguments.length?new SimpleZippedSequence(this,e):new ZippedSequence(this,Array.prototype.slice.call(arguments,0))},Sequence.prototype.shuffle=function(){return new ShuffledSequence(this)},Sequence.prototype.flatten=function(){return new FlattenedSequence(this)},Sequence.prototype.compact=function(){return this.filter(function(e){return!!e})},Sequence.prototype.without=function(){return new WithoutSequence(this,Array.prototype.slice.call(arguments,0))},Sequence.prototype.difference=Sequence.prototype.without,Sequence.prototype.union=function(e){return this.concat(e).uniq()},Sequence.prototype.intersection=function(e){return 1===arguments.length&&arguments[0]instanceof Array?new SimpleIntersectionSequence(this,e):new IntersectionSequence(this,Array.prototype.slice.call(arguments,0))},Sequence.prototype.every=function(e){var t=!0;return this.each(function(n,r){return e(n,r)?void 0:(t=!1,!1)}),t},Sequence.prototype.all=Sequence.prototype.every,Sequence.prototype.some=function(e){e||(e=function(){return!0});var t=!1;return this.each(function(n){return e(n)?(t=!0,!1):void 0}),t},Sequence.prototype.any=Sequence.prototype.some,Sequence.prototype.isEmpty=function(){return!this.any()},Sequence.prototype.indexOf=function(e){var t=0,n=-1;return this.each(function(r){return r===e?(n=t,!1):(++t,void 0)}),n},Sequence.prototype.lastIndexOf=function(e){var t=this.reverse().indexOf(e);return-1!==t&&(t=this.length()-t-1),t},Sequence.prototype.sortedIndex=function(e){for(var t,n=0,r=this.length();r>n;)t=n+r>>>1,-1===compare(this.get(t),e)?n=t+1:r=t;return n},Sequence.prototype.contains=function(e){return-1!==this.indexOf(e)},Sequence.prototype.reduce=function(e,t){return arguments.length<2?this.tail().reduce(e,this.head()):(this.each(function(n,r){t=e(t,n,r)}),t)},Sequence.prototype.inject=Sequence.prototype.reduce,Sequence.prototype.foldl=Sequence.prototype.reduce,Sequence.prototype.reduceRight=function(e,t){if(arguments.length<2)return this.initial(1).reduceRight(e,this.last());var n=this.length()-1;return this.reverse().reduce(function(t,r){return e(t,r,n--)},t)},Sequence.prototype.foldr=Sequence.prototype.reduceRight,Sequence.prototype.find=function(e){return this.filter(e).first()},Sequence.prototype.detect=Sequence.prototype.find,Sequence.prototype.min=function(e){var t,n=1/0;return"undefined"!=typeof e?(e=createCallback(e),this.each(function(r){var i=e(r);n>i&&(n=i,t=r)}),t):(this.each(function(e){n>e&&(n=e)}),n)},Sequence.prototype.max=function(e){var t,n=-1/0;return"undefined"!=typeof e?(e=createCallback(e),this.each(function(r){var i=e(r);i>n&&(n=i,t=r)}),t):(this.each(function(e){e>n&&(n=e)}),n)},Sequence.prototype.sum=function(e){return"undefined"!=typeof e?(e=createCallback(e),this.reduce(function(t,n){return t+=e(n)},0)):this.reduce(function(e,t){return e+=t},0)},Sequence.prototype.join=function(e){e="string"==typeof e?e:",";var t="";return this.each(function(n){t.length>0&&(t+=e),t+=n}),t},Sequence.prototype.toString=Sequence.prototype.join,Sequence.prototype.async=function(e){return new AsyncSequence(this,e)},MappedSequence.prototype=new Sequence,MappedSequence.prototype.each=function(e){var t=this.mapFn;return this.parent.each(function(n,r){return e(t(n,r),r)})},CachingSequence.prototype=new Sequence,CachingSequence.inherit=function(e){return e.prototype=new CachingSequence,e},CachingSequence.prototype.cache=function(){return this.cached||(this.cached=this.toArray()),this.cached},CachingSequence.prototype.get=function(e){return this.cache()[e]},CachingSequence.prototype.length=function(){return this.cache().length},CachingSequence.prototype.getIterator=function(){return Lazy(this.cache()).getIterator()},FilteredSequence.prototype=new Sequence,FilteredSequence.prototype.getIterator=function(){return new FilteringIterator(this.parent,this.filterFn)},FilteredSequence.prototype.each=function(e){var t=this.filterFn;return this.parent.each(function(n,r){return t(n,r)?e(n,r):void 0})},ConcatenatedSequence.prototype=new Sequence,ConcatenatedSequence.prototype.each=function(e){var t=!1,n=0;this.parent.each(function(r){return e(r,n++)===!1?(t=!0,!1):void 0}),t||Lazy(this.arrays).flatten().each(function(t){return e(t,n++)===!1?!1:void 0})};var TakeSequence=CachingSequence.inherit(function(e,t){this.parent=e,this.count=t});TakeSequence.prototype.each=function(e){var t=this,n=0;t.parent.each(function(r){var i;return n<t.count&&(i=e(r,n)),++n>=t.count?!1:i})};var TakeWhileSequence=CachingSequence.inherit(function(e,t){this.parent=e,this.predicate=t});TakeWhileSequence.prototype.each=function(e){var t=this.predicate;this.parent.each(function(n){return t(n)&&e(n)})};var DropWhileSequence=CachingSequence.inherit(function(e,t){this.parent=e,this.predicate=t});DropWhileSequence.prototype.each=function(e){var t=this.predicate,n=!1;this.parent.each(function(r){if(!n){if(t(r))return;n=!0}return e(r)})};var SortedSequence=CachingSequence.inherit(function(e,t){this.parent=e,this.sortFn=t});SortedSequence.prototype.each=function(e){var t=this.sortFn,n=this.parent.toArray(),r=-1;for(n.sort(function(e,n){return compare(e,n,t)});++r<n.length&&e(n[r],r)!==!1;);};var ShuffledSequence=CachingSequence.inherit(function(e){this.parent=e});ShuffledSequence.prototype.each=function(e){for(var t=this.parent.toArray(),n=Math.floor,r=Math.random,i=0,o=t.length-1;o>0;--o)if(swap(t,o,n(r()*o)+1),e(t[o],i++)===!1)return;e(t[0],i)
};var GroupedSequence=CachingSequence.inherit(function(e,t){t=createCallback(t),this.each=function(n){var r={};e.each(function(e){var n=t(e);r[n]?r[n].push(e):r[n]=[e]});for(var i in r)if(n([i,r[i]])===!1)break}}),CountedSequence=CachingSequence.inherit(function(e,t){t=createCallback(t),this.each=function(n){var r={};e.each(function(e){var n=t(e);r[n]?r[n]+=1:r[n]=1});for(var i in r)n([i,r[i]])}}),UniqueSequence=CachingSequence.inherit(function(e,t){this.parent=e,this.keyFn=t});UniqueSequence.prototype.each=function(e){var t=new Set,n=this.keyFn,r=0;this.parent.each(function(i){return t.add(n(i))?e(i,r++):void 0})};var FlattenedSequence=CachingSequence.inherit(function(e){this.parent=e});FlattenedSequence.prototype.each=function(e){var t=0,n=!1,r=function(i){return n?!1:i instanceof Sequence?(i.each(function(e){return r(e)===!1?(n=!0,!1):void 0}),void 0):i instanceof Array?forEach(i,r):e(i,t++)};this.parent.each(r)};var WithoutSequence=CachingSequence.inherit(function(e,t){this.parent=e,this.values=t});WithoutSequence.prototype.each=function(e){var t=createSet(this.values),n=0;this.parent.each(function(r){return t.contains(r)?void 0:e(r,n++)})},SimpleIntersectionSequence.prototype=new Sequence,SimpleIntersectionSequence.prototype.eachMemoizerCache=function(e){var t=new UniqueMemoizer(Lazy(this.array).getIterator()),n=0;this.parent.each(function(r){return t.contains(r)?e(r,n++):void 0})},SimpleIntersectionSequence.prototype.eachArrayCache=function(e){var t=this.array,n=contains,r=0;this.parent.each(function(i){return n(t,i)?e(i,r++):void 0})};var IntersectionSequence=CachingSequence.inherit(function(e,t){this.parent=e,this.arrays=t});IntersectionSequence.prototype.each=function(e){var t=Lazy(this.arrays).map(function(e){return new UniqueMemoizer(Lazy(e).getIterator())}),n=new UniqueMemoizer(t.getIterator()),r=0;this.parent.each(function(t){var i=!0;return n.each(function(e){return e.contains(t)?void 0:(i=!1,!1)}),i?e(t,r++):void 0})},SimpleZippedSequence.prototype=new Sequence,SimpleZippedSequence.prototype.each=function(e){var t=this.array;this.parent.each(function(n,r){return e([n,t[r]],r)})};var ZippedSequence=CachingSequence.inherit(function(e,t){this.parent=e,this.arrays=t});ZippedSequence.prototype.each=function(e){var t=this.arrays,n=0;this.parent.each(function(r){for(var i=[r],o=0;o<t.length;++o)t[o].length>n&&i.push(t[o][n]);return e(i,n++)})},Iterator.prototype.current=function(){return this.sequence.get(this.index)},Iterator.prototype.moveNext=function(){return this.index>=this.sequence.length()-1?!1:(++this.index,!0)},FilteringIterator.prototype.current=function(){return this.value},FilteringIterator.prototype.moveNext=function(){for(var e,t=this.iterator,n=this.filterFn;t.moveNext();)if(e=t.current(),n(e))return this.value=e,!0;return this.value=void 0,!1},CharIterator.prototype=new Iterator,CharIterator.prototype.current=function(){return this.source.charAt(this.index)},CharIterator.prototype.moveNext=function(){return++this.index<this.source.length},StringMatchIterator.prototype.current=function(){return this.match[0]},StringMatchIterator.prototype.moveNext=function(){return!!(this.match=this.pattern.exec(this.source))},SplitWithRegExpIterator.prototype.current=function(){return this.source.substring(this.start,this.end)},SplitWithRegExpIterator.prototype.moveNext=function(){if(!this.pattern)return!1;var e=this.pattern.exec(this.source);return e?(this.start=this.nextStart?this.nextStart:0,this.end=e.index,this.nextStart=e.index+e[0].length,!0):this.pattern?(this.start=this.nextStart,this.end=void 0,this.nextStart=void 0,this.pattern=void 0,!0):!1},SplitWithStringIterator.prototype.current=function(){return this.source.substring(this.leftIndex,this.rightIndex)},SplitWithStringIterator.prototype.moveNext=function(){return this.finished||(this.leftIndex="undefined"!=typeof this.leftIndex?this.rightIndex+this.delimiter.length:0,this.rightIndex=this.source.indexOf(this.delimiter,this.leftIndex)),-1===this.rightIndex?(this.finished=!0,this.rightIndex=void 0,!0):!this.finished},UniqueMemoizer.prototype=new Iterator,UniqueMemoizer.prototype.current=function(){return this.currentValue},UniqueMemoizer.prototype.moveNext=function(){for(var e,t=this.iterator,n=this.set,r=this.memo;t.moveNext();)if(e=t.current(),n.add(e))return r.push(e),this.currentValue=e,!0;return!1},UniqueMemoizer.prototype.each=function(e){for(var t=this.memo,n=t.length,r=-1;++r<n;)if(e(t[r],r)===!1)return!1;for(;this.moveNext()&&e(this.currentValue,r++)!==!1;);},UniqueMemoizer.prototype.contains=function(e){if(this.set.contains(e))return!0;for(;this.moveNext();)if(this.currentValue===e)return!0;return!1},ArrayLikeSequence.prototype=new Sequence,ArrayLikeSequence.define=function(e,t){var n=t?function(){this.parent=arguments[0],t.apply(this,arguments)}:function(){this.parent=arguments[0]};return n.prototype=new ArrayLikeSequence,ArrayLikeSequence.prototype[e]=function(e,t,r){return new n(this,e,t,r)},n},ArrayLikeSequence.prototype.get=function(e){return this.parent.get(e)},ArrayLikeSequence.prototype.length=function(){return this.parent.length()},ArrayLikeSequence.prototype.getIterator=function(){return new Iterator(this)},ArrayLikeSequence.prototype.each=function(e){for(var t=this.length(),n=-1;++n<t&&e(this.get(n),n)!==!1;);},ArrayLikeSequence.prototype.map=function(e){return"string"==typeof e?this.pluck(e):new IndexedMappedSequence(this,e)},ArrayLikeSequence.prototype.collect=ArrayLikeSequence.prototype.map,ArrayLikeSequence.prototype.select=function(e){return new IndexedFilteredSequence(this,createCallback(e))},ArrayLikeSequence.prototype.filter=ArrayLikeSequence.prototype.select,ArrayLikeSequence.prototype.reverse=function(){return new IndexedReversedSequence(this)},ArrayLikeSequence.prototype.first=function(e){return"undefined"==typeof e?this.get(0):new IndexedTakeSequence(this,e)},ArrayLikeSequence.prototype.head=ArrayLikeSequence.prototype.take=ArrayLikeSequence.prototype.first,ArrayLikeSequence.prototype.rest=function(e){return new IndexedDropSequence(this,e)},ArrayLikeSequence.prototype.tail=ArrayLikeSequence.prototype.drop=ArrayLikeSequence.prototype.rest,ArrayLikeSequence.prototype.concat=function(e){return 1===arguments.length&&arguments[0]instanceof Array?new IndexedConcatenatedSequence(this,e):Sequence.prototype.concat.apply(this,arguments)},ArrayLikeSequence.prototype.uniq=function(e){return new IndexedUniqueSequence(this,createCallback(e))},IndexedMappedSequence.prototype=new ArrayLikeSequence,IndexedMappedSequence.prototype.get=function(e){return 0>e||e>=this.parent.length()?void 0:this.mapFn(this.parent.get(e),e)},IndexedFilteredSequence.prototype=new FilteredSequence,IndexedFilteredSequence.prototype.each=function(e){for(var t,n=this.parent,r=this.filterFn,i=this.parent.length(),o=-1;++o<i&&(t=n.get(o),!r(t,o)||e(t,o)!==!1););},IndexedReversedSequence.prototype=new ArrayLikeSequence,IndexedReversedSequence.prototype.get=function(e){return this.parent.get(this.length()-e-1)},IndexedTakeSequence.prototype=new ArrayLikeSequence,IndexedTakeSequence.prototype.length=function(){var e=this.parent.length();return this.count<=e?this.count:e},IndexedDropSequence.prototype=new ArrayLikeSequence,IndexedDropSequence.prototype.get=function(e){return this.parent.get(this.count+e)},IndexedDropSequence.prototype.length=function(){var e=this.parent.length();return this.count<=e?e-this.count:0},IndexedConcatenatedSequence.prototype=new ArrayLikeSequence,IndexedConcatenatedSequence.prototype.get=function(e){var t=this.parent.length();return t>e?this.parent.get(e):this.other[e-t]},IndexedConcatenatedSequence.prototype.length=function(){return this.parent.length()+this.other.length},IndexedUniqueSequence.prototype=new Sequence,IndexedUniqueSequence.prototype.eachArrayCache=function(e){for(var t,n,r=this.parent,i=this.keyFn,o=r.length(),a=[],u=contains,l=-1,s=0;++l<o;)if(n=r.get(l),t=i(n),!u(a,t)&&(a.push(t),e(n,s++)===!1))return!1},IndexedUniqueSequence.prototype.eachSetCache=UniqueSequence.prototype.each,ArrayWrapper.prototype=new ArrayLikeSequence,ArrayWrapper.prototype.get=function(e){return this.source[e]},ArrayWrapper.prototype.length=function(){return this.source.length},ArrayWrapper.prototype.each=function(e){for(var t=this.source,n=t.length,r=-1;++r<n&&e(t[r],r)!==!1;);},ArrayWrapper.prototype.map=ArrayWrapper.prototype.collect=function(e){return"string"==typeof e?this.pluck(e):new MappedArrayWrapper(this.source,e)},ArrayWrapper.prototype.filter=ArrayWrapper.prototype.select=function(e){return new FilteredArrayWrapper(this,createCallback(e))},ArrayWrapper.prototype.uniq=ArrayWrapper.prototype.unique=function(e){return new UniqueArrayWrapper(this,createCallback(e))},ArrayWrapper.prototype.concat=function(e){return 1===arguments.length&&arguments[0]instanceof Array?new ConcatArrayWrapper(this.source,e):ArrayLikeSequence.prototype.concat.apply(this,arguments)},ArrayWrapper.prototype.toArray=function(){return this.source.slice(0)},MappedArrayWrapper.prototype=new ArrayLikeSequence,MappedArrayWrapper.prototype.get=function(e){return 0>e||e>=this.source.length?void 0:this.mapFn(this.source[e])},MappedArrayWrapper.prototype.length=function(){return this.source.length},MappedArrayWrapper.prototype.each=function(e){for(var t=this.source,n=this.source.length,r=this.mapFn,i=-1;++i<n;)if(e(r(t[i],i),i)===!1)return},FilteredArrayWrapper.prototype=new FilteredSequence,FilteredArrayWrapper.prototype.each=function(e){for(var t,n=this.parent.source,r=this.filterFn,i=n.length,o=-1;++o<i&&(t=n[o],!r(t,o)||e(t,o)!==!1););},UniqueArrayWrapper.prototype=new CachingSequence,UniqueArrayWrapper.prototype.eachNoCache=function(e){for(var t,n=this.parent.source,r=this.keyFn,i=n.length,o=containsBefore,a=-1,u=0;++a<i;)if(t=n[a],!o(n,t,a,r)&&e(t,u++)===!1)return!1},UniqueArrayWrapper.prototype.eachArrayCache=function(e){for(var t,n,r=this.parent.source,i=this.keyFn,o=r.length,a=[],u=contains,l=-1,s=0;++l<o;)if(n=r[l],t=i(n),!u(a,t)&&(a.push(t),e(n,s++)===!1))return!1},UniqueArrayWrapper.prototype.eachSetCache=UniqueSequence.prototype.each,ConcatArrayWrapper.prototype=new ArrayLikeSequence,ConcatArrayWrapper.prototype.get=function(e){var t=this.source.length;return t>e?this.source[e]:this.other[e-t]},ConcatArrayWrapper.prototype.length=function(){return this.source.length+this.other.length},ConcatArrayWrapper.prototype.each=function(e){for(var t=this.source,n=t.length,r=this.other,i=r.length,o=0,a=-1;++a<n;)if(e(t[a],o++)===!1)return!1;for(a=-1;++a<i;)if(e(r[a],o++)===!1)return!1},ObjectLikeSequence.prototype=new Sequence,ObjectLikeSequence.prototype.get=function(e){return this.parent.get(e)},ObjectLikeSequence.prototype.keys=function(){return this.map(function(e,t){return t})},ObjectLikeSequence.prototype.values=function(){return this.map(function(e){return e})},ObjectLikeSequence.prototype.assign=function(e){return new AssignSequence(this,e)},ObjectLikeSequence.prototype.extend=ObjectLikeSequence.prototype.assign,ObjectLikeSequence.prototype.defaults=function(e){return new DefaultsSequence(this,e)},ObjectLikeSequence.prototype.invert=function(){return new InvertedSequence(this)},ObjectLikeSequence.prototype.functions=function(){return this.filter(function(e){return"function"==typeof e}).map(function(e,t){return t})},ObjectLikeSequence.prototype.methods=ObjectLikeSequence.prototype.functions,ObjectLikeSequence.prototype.pick=function(e){return new PickSequence(this,e)},ObjectLikeSequence.prototype.omit=function(e){return new OmitSequence(this,e)},ObjectLikeSequence.prototype.toArray=function(){return this.map(function(e,t){return[t,e]}).toArray()},ObjectLikeSequence.prototype.pairs=ObjectLikeSequence.prototype.toArray,ObjectLikeSequence.prototype.toObject=function(){return this.map(function(e,t){return[t,e]}).toObject()},AssignSequence.prototype=new ObjectLikeSequence,AssignSequence.prototype.each=function(e){var t=new Set,n=!1;Lazy(this.other).each(function(r,i){return e(r,i)===!1?(n=!0,!1):(t.add(i),void 0)}),n||this.parent.each(function(n,r){return t.contains(r)||e(n,r)!==!1?void 0:!1})},DefaultsSequence.prototype=new ObjectLikeSequence,DefaultsSequence.prototype.each=function(e){var t=new Set,n=!1;this.parent.each(function(r,i){return e(r,i)===!1?(n=!0,!1):("undefined"!=typeof r&&t.add(i),void 0)}),n||Lazy(this.defaults).each(function(n,r){return t.contains(r)||e(n,r)!==!1?void 0:!1})},InvertedSequence.prototype=new ObjectLikeSequence,InvertedSequence.prototype.each=function(e){this.parent.each(function(t,n){return e(n,t)})},PickSequence.prototype=new ObjectLikeSequence,PickSequence.prototype.each=function(e){var t=contains,n=this.properties;this.parent.each(function(r,i){return t(n,i)?e(r,i):void 0})},OmitSequence.prototype=new ObjectLikeSequence,OmitSequence.prototype.each=function(e){var t=contains,n=this.properties;this.parent.each(function(r,i){return t(n,i)?void 0:e(r,i)})},ObjectWrapper.prototype=new ObjectLikeSequence,ObjectWrapper.prototype.get=function(e){return this.source[e]},ObjectWrapper.prototype.each=function(e){var t,n=this.source;for(t in n)if(e(n[t],t)===!1)return},StringLikeSequence.prototype=new ArrayLikeSequence,StringLikeSequence.prototype.getIterator=function(){return new CharIterator(this.source)},StringLikeSequence.prototype.charAt=function(e){return this.get(e)},StringLikeSequence.prototype.each=function(e){for(var t=this.source,n=t.length,r=-1;++r<n&&e(t.charAt(r))!==!1;);},StringLikeSequence.prototype.match=function(e){return new StringMatchSequence(this.source,e)},StringLikeSequence.prototype.split=function(e){return new SplitStringSequence(this.source,e)},StringMatchSequence.prototype=new Sequence,StringMatchSequence.prototype.each=function(e){for(var t=this.getIterator();t.moveNext();)if(e(t.current())===!1)return},StringMatchSequence.prototype.getIterator=function(){return new StringMatchIterator(this.source,this.pattern)},SplitStringSequence.prototype=new Sequence,SplitStringSequence.prototype.each=function(e){for(var t=this.getIterator();t.moveNext()&&e(t.current())!==!1;);},SplitStringSequence.prototype.getIterator=function(){return this.pattern instanceof RegExp?""===this.pattern.source||"(?:)"===this.pattern.source?new CharIterator(this.source):new SplitWithRegExpIterator(this.source,this.pattern):""===this.pattern?new CharIterator(this.source):new SplitWithStringIterator(this.source,this.pattern)},StringWrapper.prototype=new StringLikeSequence,StringWrapper.prototype.get=function(e){return this.source.charAt(e)},StringWrapper.prototype.length=function(){return this.source.length},GeneratedSequence.prototype=new Sequence,GeneratedSequence.prototype.length=function(){return this.fixedLength},GeneratedSequence.prototype.each=function(e){for(var t=this.get,n=this.fixedLength,r=0;("undefined"==typeof n||n>r)&&e(t(r++))!==!1;);},GeneratedSequence.prototype.getIterator=function(){return new GeneratedIterator(this)},GeneratedIterator.prototype.current=function(){return this.currentValue},GeneratedIterator.prototype.moveNext=function(){var e=this.sequence;return"number"==typeof e.fixedLength&&this.index>=e.fixedLength?!1:(this.currentValue=e.get(this.index++),!0)},AsyncSequence.prototype=new Sequence,AsyncSequence.prototype.each=function(e){var t=this.parent.getIterator(),n=this.onNextCallback,r=this.cancelCallback,i={id:null,cancel:function(){i.id&&(r(i.id),i.id=null)},onError:function(e){i.errorCallback=e},errorCallback:function(){}};return t.moveNext()&&(i.id=n(function o(){try{e(t.current())!==!1&&t.moveNext()&&(i.id=n(o))}catch(r){i.errorCallback(r)}})),i},StreamLikeSequence.prototype=new Sequence,StreamLikeSequence.prototype.lines=function(){return new LinesSequence(this)},LinesSequence.prototype=new Sequence,LinesSequence.prototype.each=function(e){var t=!1;this.parent.each(function(n){return Lazy(n).split("\n").each(function(n){return e(n)===!1?(t=!0,!1):void 0}),!t})},StreamingHttpSequence.prototype=new StreamLikeSequence,StreamingHttpSequence.prototype.each=function(e){var t=new XMLHttpRequest,n=0,r=!1;t.open("GET",this.url);var i=function(o){r||(o=t.responseText.substring(n),e(o)===!1&&(t.removeEventListener("progress",i,!1),t.abort(),r=!0),n+=o.length)};t.addEventListener("progress",i,!1),t.send()};var Lazy=function(e){return e instanceof Array?new ArrayWrapper(e):"string"==typeof e?new StringWrapper(e):e instanceof Sequence?e:new ObjectWrapper(e)};Lazy.generate=function(e,t){return new GeneratedSequence(e,t)},Lazy.range=function(){var e=arguments.length>1?arguments[0]:0,t=arguments.length>1?arguments[1]:arguments[0],n=arguments.length>2?arguments[2]:1;return this.generate(function(t){return e+n*t}).take(Math.floor((t-e)/n))},Lazy.repeat=function(e,t){return Lazy.generate(function(){return e},t)},Lazy.Sequence=Sequence,Lazy.ArrayLikeSequence=ArrayLikeSequence,Lazy.ObjectLikeSequence=ObjectLikeSequence,Lazy.StringLikeSequence=StringLikeSequence,Lazy.GeneratedSequence=GeneratedSequence,Lazy.AsyncSequence=AsyncSequence,Lazy.noop=function(){},Lazy.identity=function(e){return e},Set.prototype.add=function(e){var t,n,r=this.table,i=typeof e;switch(i){case"number":case"boolean":case"undefined":return r[e]?!1:(r[e]=!0,!0);case"string":return t=e.charAt(0),("_ftc@".indexOf(t)>=0||t>="0"&&"9">=t)&&(e="@"+e),r[e]?!1:(r[e]=!0,!0);default:return n=this.objects,n||(n=this.objects=[]),contains(n,e)?!1:(n.push(e),!0)}},Set.prototype.contains=function(e){var t,n=typeof e;switch(n){case"number":case"boolean":case"undefined":return!!this.table[e];case"string":return t=e.charAt(0),("_ftc@".indexOf(t)>=0||t>="0"&&"9">=t)&&(e="@"+e),!!this.table[e];default:return this.objects&&contains(this.objects,e)}},"object"==typeof module?module.exports=Lazy:context.Lazy=Lazy}("undefined"!=typeof global?global:this),function(e){function t(e){this.source=e}function n(e){this.source=e}function r(e,t){this.element=e,this.eventName=t}var i=e.Lazy;t.prototype=new i.ArrayLikeSequence,t.prototype.get=function(e){return this.source[e]},t.prototype.length=function(){return this.source.length},t.prototype.flatten=function(){return new n(this.source)},n.prototype=new i.Sequence,n.prototype.each=function(e){var t=0,n=!1;i(this.source).each(function(r){return e(r,t++)===!1?!1:(i(r.children).flatten().each(function(r){return e(r,t++)===!1?(n=!0,!1):void 0}),n?!1:void 0)})},r.prototype=new i.Sequence,r.prototype.each=function(e){var t=this.element,n=this.eventName,r=function(i){e(i)===!1&&t.removeEventListener(n,r)};this.element.addEventListener(this.eventName,r)},i.events=function(e,t){return new r(e,t)};var o=i;i=function(e){return e instanceof NodeList||e instanceof HTMLCollection?new t(e):o(e)};for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a]);e.Lazy=i}(window),window.HighTables={},HighTables.charts={},$(document).ready(function(){function e(e){var t=o[e].engine,n=o[e].options;$("."+e+"-chart").each(function(){t.renderTo(this,n)})}function t(e){var t=o[e].engine,n=o[e].options;$("table.render-to-"+e+"-chart").each(function(){t.renderFromTable(this,n)})}function n(){for(var n in o)e(n),t(n)}function r(e){for(var t=$(e).attr("class").split(/\s+/),n=0;n<t.length;++n)if(t[n].match(/^(?:line|spline|area|stack|bar|column|pie)-chart$/))return t[n].replace(/-chart$/g,"")}function i(e){for(var t=$(e).attr("class").split(/\s+/),n=0;n<t.length;++n)if(t[n].match(/^render-to-(?:line|spline|area|stack|bar|column|pie)-chart$/))return t[n].replace(/^render-to-/g,"").replace(/-chart$/g,"")}Highcharts.setOptions({credits:{enabled:!!HighTables.includeHighchartsLinks}});var o={line:{engine:HighTables.LineChart},spline:{engine:HighTables.LineChart,options:{chart:{type:"spline"}}},area:{engine:HighTables.LineChart,options:{chart:{type:"area"}}},stack:{engine:HighTables.LineChart,options:{chart:{type:"area"},plotOptions:{area:{stacking:"normal"}}}},bar:{engine:HighTables.BarChart},column:{engine:HighTables.BarChart,options:{chart:{type:"column"}}},pie:{engine:HighTables.PieChart}};HighTables.renderCharts=n,HighTables.renderChart=function(e){var t=r(e),n=o[t].engine,i=o[t].options;n.renderTo(e,i)},HighTables.renderChartFromTable=function(e){var t=i(e),n=o[t].engine,r=o[t].options;n.renderFromTable(e,r)},n()}),HighTables.Parse=function(){function e(e){var t=parseFloat(e&&e.replace(/^\$|,/g,""));return isNaN(t)?null:t}function t(e){for(var t=[],n=0;n<e.length;++n)t.push(parseInt(e[n]));return t}function n(e,t){var n,r=0,o=[];for(i=0;i<e.length;++i)if("..."===e[i])for(n=e[i+1]||t+1;n>r;)o.push(r++);else r=parseInt(e[i]),o.push(r++);return o}return{number:e,integers:t,integersWithRanges:n}}(),HighTables.Base=function(e){function t(e,t){for(var n=e.split("."),r=window;n.length>0;)r=r[n.shift()];return"function"==typeof r&&t?r():r}function n(){return p||(p=e.is("table")?e:$(e.attr("data-source"))),p}function r(){var t,n={};for(var r in d)t=e.attr("data-"+r),t&&$.extend(n,d[r](t));return $.extend(n,{labelColumn:i(),valueColumns:o(),limit:a(),threshold:u(),transpose:l(),rowFilter:s()})}function i(){return parseInt(e.attr("data-label-column"))}function o(){var t=e.attr("data-value-columns");return t?HighTables.Parse.integersWithRanges(t.split(","),n().find("tr:first th, tr:first td").length-1):null}function a(){return parseInt(e.attr("data-limit"))}function u(){return parseFloat(e.attr("data-threshold"))}function l(){return"true"===e.attr("data-transpose")}function s(){var n=e.attr("data-row-filter");return n?t(n):void 0}e=$(e);var c,f,h,p,d={options:function(e){return t(e,!0)},title:function(e){return{title:{text:e}}},order:function(e){return{order:e}},"x-interval":function(e){return{xAxis:{tickInterval:parseInt(e)}}},"x-min":function(e){return{xAxis:{min:parseInt(e)}}},"y-interval":function(e){return{yAxis:{tickInterval:parseInt(e)}}},"y-min":function(e){return{yAxis:{min:parseInt(e)}}}};this.getTable=n,this.options=function(){return c||(c=r(),c.labelColumn=this.labelColumn(),c.valueColumns=this.valueColumns(),c.limit=a(),c.threshold=u(),c.transpose=l()),c},this.labelColumn=function(){return"undefined"==typeof f&&(f=i()),f},this.valueColumns=function(){return"undefined"==typeof h&&(h=o()),h},this.element=e},HighTables.Table=function(e){function t(e,t,n){return t in e?e[t]:n}function n(e,n){n=n||{};var r,i=e.text()||e.find("input").val();return t(n,"numeric",!0)?(r=HighTables.Parse.number(i),!n.threshold||r>=n.threshold?r:null):i}function r(e,t,r){var i=s.find("tr:nth-child("+(e+1)+")").find("th:nth-child("+t+"), td:nth-child("+t+")");return n(i,r)}$.extend(this,new HighTables.Base(e));var i,o,a,u,l,s=this.element;this.getCellValue=n,this.getOrCreateChart=function(){return i||(i=$("<div>").addClass("chart"),i.attr("id","chart-"+$(".chart").length+1),i.insertBefore(s)),i},this.firstRow=function(){return o||(o=s.find("tr:first")),o},this.bodyRows=function(){return a||(a=s.find("tr:gt(0)")),a},this.columnCount=function(){return u||(u=this.firstRow().find("td,th").length),u},this.rowCount=function(){return l||(l=s.find("tr").length),l},this.getColumnHeader=function(e){return n(this.firstRow().find("td:nth-child("+(e+1)+"),th:nth-child("+(e+1)+")"),{numeric:!1})},this.getColumnData=function(e,t){t=t||this.options()||{};var r=[];return this.bodyRows().each(function(){if(!t.rowFilter||t.rowFilter(this)!==!1){var i=$(this).find("td:nth-child("+(e+1)+")");r.push(n(i,t))}}),t.limit&&(r=r.slice(0,t.limit)),"descending"===t.order&&r.reverse(),r},this.getRowHeader=function(e){return n($(s.find("tr").get(e)).find("td:first"),{numeric:!1})},this.getRowData=function(e,t){t=t||this.options()||{};var i=[];if(t.valueColumns)for(var o=0;o<t.valueColumns.length;++o)i.push(r(e,t.valueColumns[o],t));else $(s.find("tr").get(e)).find("td:gt(0):not(.exclude-from-chart),th:gt(0):not(.exclude-from-chart)").each(function(){i.push(n($(this),t))});return i}},HighTables.Chart=function(e){$.extend(this,new HighTables.Base(e))},HighTables.LineChart=function(){function e(e,t){return t.labelColumn||0,e.getColumnData(0,$.extend({},t,{numeric:!1}))}function t(e,t){var n=[],r=t.valueColumns;if(r)for(var i=0;i<r.length;++i)n.push({name:e.getColumnHeader(r[i]),data:e.getColumnData(r[i],t)});else for(var i=1;i<e.columnCount();i++)n.push({name:e.getColumnHeader(i),data:e.getColumnData(i,t)});return n}function n(n,r,i){i=i||{};var a=e(n,i),u=t(n,i);o.push(new Highcharts.Chart($.extend(!0,{chart:{renderTo:r[0],type:"line"},xAxis:{categories:a},yAxis:{title:!1},title:!1,series:u},i)))}function r(e,t){var r=new HighTables.Chart(e),i=new HighTables.Table(r.getTable()[0]);return n(i,r.element,$.extend({},r.options(),t))}function i(e,t){var r=new HighTables.Table(e);return n(r,r.getOrCreateChart(),$.extend({},r.options(),t))}var o=HighTables.charts.line=[];return{renderTo:r,renderFromTable:i}}(),HighTables.BarChart=function(){function e(e,t){return t.transpose?e.getColumnData(0,$.extend({},t,{numeric:!1})):e.getRowData(0,$.extend({},t,{numeric:!1}))}function t(e){for(var t=0;t<e.length;++t)if(e[t])return!0;return!1}function n(e,n){for(var r,i=[],o=n.transpose?e.columnCount():e.rowCount(),a=n.limit?Math.min(n.limit+1,o):o,u=1;a>u;u++)r=n.transpose?{name:e.getColumnHeader(u),data:e.getColumnData(u,n)}:{name:e.getRowHeader(u),data:e.getRowData(u,n)},t(r.data)&&i.push(r);return i}function r(t,r,i){i=i||{};var o=e(t,i),u=n(t,i);a.push(new Highcharts.Chart($.extend(!0,{chart:{renderTo:r[0],type:"bar"},xAxis:{categories:o},yAxis:{title:!1},title:!1,series:u},i)))}function i(e,t){var n=new HighTables.Chart(e),i=new HighTables.Table(n.getTable()[0]);return r(i,n.element,$.extend({},n.options(),t))}function o(e,t){var n=new HighTables.Table(e);return r(n,n.getOrCreateChart(),$.extend({},n.options(),t))}var a=HighTables.charts.bar=[];return{renderTo:i,renderFromTable:o}}(),HighTables.PieChart=function(){function e(e){return e.valueColumns?"nth-child("+e.valueColumns[0]+")":"last-child"}function t(t,n){return t.getCellValue(t.firstRow().find("th:"+e(n)),{numeric:!1})}function n(e,t){return e.getCellValue($(t).find("td:first"),{numeric:!1})}function r(t,n,r){return t.getCellValue($(n).find("td:"+e(r)))}function i(e,t){var i=[];return e.bodyRows().each(function(){var o=n(e,this),a=r(e,this,t);o&&a&&i.push([o,a])}),i}function o(e,n){var r=t(e,n),o=i(e,n);return[{type:"pie",name:r,data:o}]}function a(e,t,n){n=n||{};var r=o(e,n);s.push(new Highcharts.Chart($.extend(!0,{chart:{renderTo:t[0],type:"pie"},title:!1,series:r},n)))}function u(e,t){var n=new HighTables.Chart(e),r=new HighTables.Table(n.getTable()[0]);return a(r,n.element,$.extend({},n.options(),t))}function l(e,t){var n=new HighTables.Table(e);return a(n,n.getOrCreateChart(),$.extend({},n.options(),t))}var s=HighTables.charts.pie=[];return{renderTo:u,renderFromTable:l}}();var lodash=_.noConflict();window.addEventListener("load",function(){function createEditor(e){var t=document.getElementById(e),n=t.querySelector("textarea");return CodeMirror.fromTextArea(n,{mode:"javascript",lineNumbers:!0})}function displayError(e){var t=document.createElement("P");t.textContent=e,errors.appendChild(t)}function addBenchmarkToSuite(e,t,n,r){r=r||function(e){return e};var i=_.template(benchmarkTemplate,{name:e,setup:setupEditor.getValue(),code:r(t.getValue()),inputSize:n});return i}function formatNumber(e){for(var t=e.toFixed(3).split("."),n=t[0],r=t[1],i=[];n.length>=3;)i.unshift(n.substring(n.length-3)),n=n.substring(0,n.length-3);return n.length>0&&i.unshift(n),i.join(",")+"."+r}function parseNumber(e){return Number(String(e).replace(/,/g,""))}function getRowData(e){return e?{name:e.children[0].textContent,results:Lazy(e.querySelectorAll("td:not(:first-child)")).map(function(e){return{inputSize:e.getAttribute("data-input-size"),hz:parseNumber(e.textContent)}}).toArray()}:null}function setLastCellValue(e,t){e.querySelector("td:last-child").textContent=t}function loadSavedBenchmarks(){return JSON.parse(localStorage.benchmarks||"[]")}function saveBenchmarks(e,t){localStorage.benchmarks=JSON.stringify(e),populateBenchmarksList(e),t&&highlightBenchmark(t)}function deleteBenchmark(e){e=Number(e);var t=loadSavedBenchmarks();t.splice(e,1),saveBenchmarks(t)}function populateBenchmarksList(e){benchmarksList.innerHTML="",Lazy(e).each(function(e,t){var n=document.createElement("A");n.setAttribute("href","javascript:void(0);"),n.setAttribute("data-benchmark",t);var r=document.createElement("SPAN");r.className="delete",n.appendChild(r);var i=document.createElement("SPAN");i.className="title",i.textContent=e.title,n.appendChild(i);var o=document.createElement("SMALL");o.textContent=new Date(e.created).toLocaleString(),n.appendChild(o),benchmarksList.appendChild(n)})}function highlightBenchmark(e){var t=Lazy(benchmarksList.children).find(function(t){return t.querySelector(".title").textContent===e});t&&(t.className="highlighted",t.scrollIntoView(),setTimeout(function(){t.removeAttribute("class")},1e3))}function resetResultsTable(){for(var e=results.parentNode.firstElementChild.firstElementChild,t=e.children.length-1;t>=1;--t)e.removeChild(e.children[t])}function addInputSizeColumn(e){var t=results.parentNode.firstElementChild.firstElementChild,n=document.createElement("TH");n.textContent="Ops/sec (N="+e+")",t.appendChild(n)}function addResultsRow(e){var t=document.createElement("TR");t.setAttribute("data-benchmark",e.name),results.appendChild(t);var n=document.createElement("TD");return n.textContent=e.name,t.appendChild(n),Lazy(e.results).each(function(e){var n=document.createElement("TD");n.setAttribute("data-input-size",e.inputSize),n.textContent=formatNumber(e.hz),t.appendChild(n)}),t}function addOrUpdateResultsRow(e,t){var n=results.querySelector('tr[data-benchmark="'+e.name+'"]');if(!n){n=document.createElement("TR"),n.setAttribute("data-benchmark",e.name);var r=document.createElement("TD");r.textContent=e.name,n.appendChild(r),Lazy(t).each(function(e){var t=document.createElement("TD");t.setAttribute("data-input-size",e),n.appendChild(t)}),results.appendChild(n)}var i=n.querySelector('td[data-input-size="'+e.inputSize+'"]');return i.textContent=formatNumber(e.hz),n}function runBenchmarks(){var suite=new Benchmark.Suite;results.innerHTML="",progress.innerHTML="",chart.innerHTML="",resetResultsTable();var sizes=inputSizes.value.split(/,\s*/);Lazy(sizes).each(function(inputSize){addInputSizeColumn(inputSize),eval(addBenchmarkToSuite("Underscore",underscoreEditor,inputSize)),eval(addBenchmarkToSuite("Lo-Dash",underscoreEditor,inputSize,function(e){return e.replace(/\b_\b/g,"lodash")})),eval(addBenchmarkToSuite("Lazy.js",lazyEditor,inputSize))});var cycles={},topCycles=0,resultCount=0;suite.forEach(function(e){e.on("cycle",function(){var t=e.name+" (N="+e.inputSize+")",n=progress.querySelector('.progress-bar[data-benchmark="'+t+'"]');n||(n=document.createElement("DIV"),n.className="progress progress-striped active",progress.appendChild(n),n=n.appendChild(document.createElement("DIV")),n.className="progress-bar",n.setAttribute("data-benchmark",t),n.appendChild(document.createElement("SPAN")));var r=cycles[t]||0;r+=e.count,topCycles=Math.max(topCycles,r),n.querySelector("SPAN").textContent=t+": "+r+" runs",cycles[t]=r,Lazy(progress.querySelectorAll(".progress-bar")).each(function(e){var t=cycles[e.getAttribute("data-benchmark")];e.style.width=Math.floor(100*(t/topCycles))+"%"})}),e.on("error",function(e){displayError(e.message)})}),suite.on("cycle",function(e){var t=e.target,n=progress.querySelector(".progress.active");n&&(n.className="progress"),addOrUpdateResultsRow(t,sizes),++resultCount===3*sizes.length&&(createChartFromTable(),runButton.removeAttribute("disabled"))}),runButton.setAttribute("disabled","disabled"),suite.run({async:!0})}function createChartFromTable(){chart.style.display=null,HighTables.renderCharts(),setTimeout(function(){progress.innerHTML=""},1e3)}Benchmark.options.maxTime=1;var results=document.querySelector("table#results tbody"),progress=document.getElementById("progress"),chart=document.getElementById("chart"),errors=document.getElementById("errors"),title=document.querySelector('input[name="title"]'),inputSizes=document.querySelector('input[name="input-sizes"]'),benchmarksList=document.querySelector(".saved-benchmarks"),setupEditor=createEditor("setup"),lazyEditor=createEditor("lazy"),underscoreEditor=createEditor("underscore"),newButton=document.getElementById("new-benchmark"),runButton=document.getElementById("run-benchmarks"),saveButton=document.getElementById("save-benchmarks"),benchmarkTemplate=document.getElementById("benchmark-template").textContent;benchmarksList.addEventListener("click",function(e){var t=e.target;if("SPAN"===t.nodeName&&"delete"===t.className&&confirm("Are you sure you want to delete this benchmark?"))return deleteBenchmark(t.getAttribute("data-benchmark")),void 0;for(;"A"!==t.nodeName;)if(t=t.parentNode,t===document)return;var n=t.getAttribute("data-benchmark"),r=loadSavedBenchmarks()[n];title.value=r.title,inputSizes.value=r.inputSizes||"",setupEditor.setValue(r.setup),lazyEditor.setValue(r.lazy),underscoreEditor.setValue(r.underscore),results.innerHTML="",progress.innerHTML="",chart.innerHTML="",resetResultsTable(),r.lazyResults&&(Lazy(r.lazyResults.results).pluck("inputSize").each(addInputSizeColumn),addResultsRow(r.underscoreResults),addResultsRow(r.lodashResults),addResultsRow(r.lazyResults),createChartFromTable())
}),newButton.addEventListener("click",function(){results.innerHTML="",progress.innerHTML="",chart.innerHTML="",title.value="",setupEditor.setValue(""),lazyEditor.setValue(""),underscoreEditor.setValue("")}),runButton.addEventListener("click",function(){runBenchmarks()}),saveButton.addEventListener("click",function(){var e={title:title.value,inputSizes:inputSizes.value,setup:setupEditor.getValue(),lazy:lazyEditor.getValue(),underscore:underscoreEditor.getValue(),underscoreResults:getRowData(results.children[0]),lodashResults:getRowData(results.children[1]),lazyResults:getRowData(results.children[2]),created:(new Date).getTime()},t=loadSavedBenchmarks(),n=Lazy(t).pluck("title").indexOf(e.title);-1!==n?t[n]=Lazy(t[n]).extend(e).toObject():t.push(e),saveBenchmarks(t,e.title)}),window.addEventListener("error",function(e){displayError(e.message)}),populateBenchmarksList(loadSavedBenchmarks())});